(function(c,e){var q,g,h,n,l,j,a,p=c[e],k="undefined",b=false,m={animate:false,smoothScroll:true,scrollDuration:1000,scrollTopMargin:200,showCloseButton:true,showPrevButton:false,showNextButton:true,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:true,cookieName:"hopscotch.tour.state"},d=(typeof window.jQuery!==k),o=(typeof window.sessionStorage!==k),i=document.body.style,f=(typeof i.MozTransition!==k||typeof i.MsTransition!==k||typeof i.webkitTransition!==k||typeof i.OTransition!==k||typeof i.transition!==k);if(p){return}a=function(){if(b){p.startTour()}};if(window.addEventListener){window.addEventListener("load",a,false)}else{if(window.attachEvent){window.attachEvent("onload",a)}}l={addClass:function(t,v){var s,u,r;if(t.className.length===0){t.className=v}else{s=t.className.split(/\s+/);for(u=0,r=s.length;u<r;++u){if(s[u]===v){return}}s.splice(0,0,v);t.className=s.join(" ")}},removeClass:function(r,w){var v,z,x,u,s,y,t;z=w.split(/\s+/);v=r.className.split(/\s+/);for(u=0,y=z.length;u<y;++u){x=z[u];for(s=0,t=v.length;s<t;++s){if(v[s]===x){break}}if(s<t){v.splice(s,1)}}r.className=v.join(" ")},getPixelValue:function(s){var r=typeof s;if(r==="number"){return s}if(r==="string"){return parseInt(s,10)}return 0},valOrDefault:function(s,r){return typeof s!==k?s:r},invokeCallbacks:function(v,s){var u=j[v],t,r;for(t=0,r=u.length;t<r;++t){u[t].cb.apply(this,s)}},getScrollTop:function(){if(typeof window.pageYOffset!==k){return window.pageYOffset}else{return document.documentElement.scrollTop}},getScrollLeft:function(){if(typeof window.pageXOffset!==k){return window.pageXOffset}else{return document.documentElement.scrollLeft}},getWindowHeight:function(){return window.innerHeight||document.documentElement.clientHeight},getWindowWidth:function(){return window.innerWidth||document.documentElement.clientWidth},addClickListener:function(s,r){return s.addEventListener?s.addEventListener("click",r,false):s.attachEvent("onclick",r)},removeClickListener:function(s,r){s.removeEventListener?s.removeEventListener("click",r,false):s.detachEvent("click",r)},evtPreventDefault:function(r){if(r.preventDefault){r.preventDefault()}else{if(event){event.returnValue=false}}},extend:function(s,r){var t;for(t in r){if(r.hasOwnProperty(t)){s[t]=r[t]}}},getStepTarget:function(s){var r;if(!s||!s.target){return null}if(typeof s.target==="string"){if(/[#\.].*/.test(s.target)){if(document.querySelector){return document.querySelector(s.target)}if(d){r=jQuery(s.target);return r.length?r[0]:null}if(window.Sizzle){r=Sizzle(s.target);return r.length?r[0]:null}if(s.target[0]==="#"&&s.target.indexOf(" ")===-1){return document.getElementById(s.target.substring(1))}return null}return document.getElementById(s.target)}return s.target},setState:function(t,u,v){var r="",s;if(o){sessionStorage.setItem(t,u)}else{if(v){s=new Date();s.setTime(s.getTime()+(v*24*60*60*1000));r="; expires="+s.toGMTString()}document.cookie=t+"="+u+r+"; path=/"}},getState:function(s){var u=s+"=",r=document.cookie.split(";"),t,v;if(o){return sessionStorage.getItem(s)}else{for(t=0;t<r.length;t++){v=r[t];while(v.charAt(0)===" "){v=v.substring(1,v.length)}if(v.indexOf(u)===0){return v.substring(u.length,v.length)}}return null}},clearState:function(r){if(o){sessionStorage.removeItem(r)}else{this.setState(r,"",-1)}}};j={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]};n={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"};g=function(r){this.init(r)};g.prototype={isShowing:false,currStep:undefined,_createButton:function(t,s){var r=document.createElement("input");r.id=t;r.type="button";r.value=s;l.addClass(r,"hopscotch-nav-button");if(t.indexOf("prev")>=0){l.addClass(r,"prev")}else{l.addClass(r,"next")}return r},setPosition:function(u){var z,r,x,t,y,v,w=6,C=l.getStepTarget(u),s=this.element,B=this.arrowEl,A=l.getPixelValue(u.arrowOffset);z=l.getPixelValue(u.width)||this.opt.bubbleWidth;x=l.valOrDefault(u.padding,this.opt.bubblePadding);l.removeClass(s,"fade-in-down fade-in-up fade-in-left fade-in-right");t=C.getBoundingClientRect();if(u.orientation==="top"){r=s.offsetHeight;y=(t.top-r)-this.opt.arrowWidth;v=t.left}else{if(u.orientation==="bottom"){y=t.bottom+this.opt.arrowWidth;v=t.left}else{if(u.orientation==="left"){y=t.top;v=t.left-z-2*x-2*w-this.opt.arrowWidth}else{if(u.orientation==="right"){y=t.top;v=t.right+this.opt.arrowWidth}}}}if(!A){B.style.top="";B.style.left=""}else{if(u.orientation==="top"||u.orientation==="bottom"){B.style.top="";B.style.left=A+"px"}else{if(u.orientation==="left"||u.orientation==="right"){B.style.left="";B.style.top=A+"px"}}}v+=l.getPixelValue(u.xOffset);y+=l.getPixelValue(u.yOffset);if(!u.fixedElement){y+=l.getScrollTop();v+=l.getScrollLeft()}s.style.position=(u.fixedElement?"fixed":"absolute");if(this.opt.animate&&d&&!f){$(s).animate({top:y+"px",left:v+"px"})}else{s.style.top=y+"px";s.style.left=v+"px"}},_initNavButtons:function(){var r=document.createElement("div");this.prevBtnEl=this._createButton("hopscotch-prev",n.prevBtn);this.nextBtnEl=this._createButton("hopscotch-next",n.nextBtn);this.doneBtnEl=this._createButton("hopscotch-done",n.doneBtn);l.addClass(this.doneBtnEl,"hide");r.appendChild(this.prevBtnEl);r.appendChild(this.nextBtnEl);r.appendChild(this.doneBtnEl);l.addClickListener(this.prevBtnEl,function(s){p.prevStep(true)});l.addClickListener(this.nextBtnEl,function(s){p.nextStep(true)});l.addClickListener(this.doneBtnEl,p.endTour);r.className="hopscotch-actions";this.buttonsEl=r;this.containerEl.appendChild(r);return this},_getCloseFn:function(){var r=this;if(!this.closeFn){this.closeFn=function(s){if(r.opt.onClose){r.opt.onClose()}if(r.opt.id&&!r.opt.isTourBubble){p.getCalloutManager().removeCallout(r.opt.id)}else{r.destroy()}l.evtPreventDefault(s)}}return this.closeFn},initCloseButton:function(){var r=document.createElement("a");r.className="hopscotch-bubble-close";r.href="#";r.title=n.closeTooltip;r.innerHTML=n.closeTooltip;if(this.opt.isTourBubble){l.addClickListener(r,function(t){var s=p.getCurrStepNum(),u=p.getCurrTour(),v=(s===u.steps.length-1);l.invokeCallbacks("close",[u.id,s]);p.endTour(true,v);if(t.preventDefault){t.preventDefault()}else{if(event){event.returnValue=false}}})}else{l.addClickListener(r,this._getCloseFn())}this.closeBtnEl=r;this.containerEl.appendChild(r);return this},_initArrow:function(){var r,s;this.arrowEl=document.createElement("div");this.arrowEl.className="hopscotch-bubble-arrow-container";s=document.createElement("div");s.className="hopscotch-bubble-arrow-border";r=document.createElement("div");r.className="hopscotch-bubble-arrow";this.arrowEl.appendChild(s);this.arrowEl.appendChild(r);this.element.appendChild(this.arrowEl);return this},render:function(u,y,v,z){var s=this.element,t,r,x,w;if(u){this.currStep=u}else{if(this.currStep){u=this.currStep}}t=l.valOrDefault(u.showNextButton,this.opt.showNextButton);r=l.valOrDefault(u.showPrevButton,this.opt.showPrevButton);this.setTitle(u.title||"");this.setContent(u.content||"");if(this.opt.showNumber){this.setNum(y)}this.orientation=u.orientation;if(this.opt.showNavButtons){this.showPrevButton(this.prevBtnEl&&r&&y>0);this.showNextButton(this.nextBtnEl&&t&&!v);this.nextBtnEl.value=u.showSkip?n.skipBtn:n.nextBtn;if(v){l.removeClass(this.doneBtnEl,"hide")}else{l.addClass(this.doneBtnEl,"hide")}}this._setArrow(u.orientation);x=l.getPixelValue(u.width)||this.opt.bubbleWidth;w=l.valOrDefault(u.padding,this.opt.bubblePadding);this.containerEl.style.width=x+"px";this.containerEl.style.padding=w+"px";s.style.zIndex=u.zindex||"";if(u.orientation==="top"){s.style.top="-9999px";s.style.left="-9999px";l.removeClass(s,"hide");this.setPosition(u);l.addClass(s,"hide");if(z&&!u.fixedElement){z()}else{this.show()}}else{this.setPosition(u);if(z&&!u.fixedElement){z()}else{this.show()}}return this},setTitle:function(r){if(r){this.titleEl.innerHTML=r;l.removeClass(this.titleEl,"hide")}else{l.addClass(this.titleEl,"hide")}return this},setContent:function(r){if(r){this.contentEl.innerHTML=r;l.removeClass(this.contentEl,"hide")}else{l.addClass(this.contentEl,"hide")}return this},setNum:function(r){if(n.stepNums&&r<n.stepNums.length){r=n.stepNums[r]}else{r=r+1}this.numberEl.innerHTML=r},_setArrow:function(r){l.removeClass(this.arrowEl,"down up right left");if(r==="top"){l.addClass(this.arrowEl,"down")}else{if(r==="bottom"){l.addClass(this.arrowEl,"up")}else{if(r==="left"){l.addClass(this.arrowEl,"right")}else{if(r==="right"){l.addClass(this.arrowEl,"left")}}}}},_getArrowDirection:function(){if(this.orientation==="top"){return"down"}if(this.orientation==="bottom"){return"up"}if(this.orientation==="left"){return"right"}if(this.orientation==="right"){return"left"}},show:function(){var r=this,s="fade-in-"+this._getArrowDirection(),t=1000;l.removeClass(this.element,"hide");if(this.opt.animate){setTimeout(function(){l.addClass(r.element,"animate")},50)}else{l.addClass(this.element,s);setTimeout(function(){l.removeClass(r.element,"invisible")},50);setTimeout(function(){l.removeClass(r.element,s)},t)}this.isShowing=true;return this},hide:function(r){var s=this.element;r=l.valOrDefault(r,true);s.style.top="";s.style.left="";if(r){l.addClass(s,"hide");l.removeClass(s,"invisible")}else{l.removeClass(s,"hide");if(!this.opt.animate){l.addClass(s,"invisible")}}l.removeClass(s,"animate fade-in-up fade-in-down fade-in-right fade-in-left");this.isShowing=false;return this},_showButton:function(s,r,u){var t="hide";if(u){t="hide-all"}if(typeof r===k){r=true}if(r){l.removeClass(s,t)}else{l.addClass(s,t)}},showPrevButton:function(r,s){this._showButton(this.prevBtnEl,r,s)},showNextButton:function(r,s){this._showButton(this.nextBtnEl,r,s)},showCloseButton:function(r,s){this._showButton(this.closeBtnEl,r,s)},_initAnimate:function(){var r=this;setTimeout(function(){l.addClass(r.element,"animate")},50)},_removeAnimate:function(){l.removeClass(this.element,"animate")},destroy:function(){var r=this.element;r.parentNode.removeChild(r);l.removeClickListener(this.closeBtnEl,this._getCloseFn())},init:function(y){var v=document.createElement("div"),w=document.createElement("div"),u=document.createElement("div"),t=this,x=false,s,r;this.element=v;this.containerEl=w;this.titleEl=document.createElement("h3");this.contentEl=document.createElement("p");opt={animate:m.animate,showPrevButton:m.showPrevButton,showNextButton:m.showNextButton,bubbleWidth:m.bubbleWidth,bubblePadding:m.bubblePadding,arrowWidth:m.arrowWidth,showNumber:true,showNavButtons:true,isTourBubble:true};y=(typeof y===k?{}:y);l.extend(opt,y);this.opt=opt;v.className="hopscotch-bubble animated";w.className="hopscotch-bubble-container";if(opt.showNumber){this.numberEl=document.createElement("span");this.numberEl.className="hopscotch-bubble-number";w.appendChild(this.numberEl)}else{l.addClass(v,"no-number")}u.appendChild(this.titleEl);u.appendChild(this.contentEl);u.className="hopscotch-bubble-content";w.appendChild(u);v.appendChild(w);if(opt.showNavButtons){this._initNavButtons()}this.initCloseButton();this._initArrow();s=function(){if(x||!t.isShowing){return}x=true;r=setTimeout(function(){t.setPosition(t.currStep);x=false},100)};if(window.addEventListener){window.addEventListener("resize",s,false)}else{if(window.attachEvent){window.attachEvent("onresize",s,false)}}this.hide();document.body.appendChild(v)}};h=function(){var r={};this.createCallout=function(s){var t;if(s.id){if(r[s.id]){throw"Callout by that id already exists. Please choose a unique id."}s.isTourBubble=false;t=new g(s);r[s.id]=t;if(s.target){t.render(s)}}else{throw"Must specify a callout id."}};this.getCallout=function(s){return r[s]};this.removeAllCallouts=function(){var s,t;for(s in r){this.removeCallout(s)}};this.removeCallout=function(t){var s=r[t];r[t]=null;if(!s){return}s.destroy()}};q=function(y){var E=this,D,I,s,C,w,B,r,x,A=function(){if(!D){D=new g({animate:s.animate,bubblePadding:s.bubblePadding,bubbleWidth:s.bubbleWidth,showNextButton:s.showNextButton,showPrevButton:s.showPrevButton,arrowWidth:s.arrowWidth})}return D},F=function(){var J;if(w<0||w>=C.steps.length){J=null}else{J=C.steps[w]}return J},t=function(){E.nextStep(false)},v=function(T){var S=A(),ac=S.element,X=l.getPixelValue(ac.style.top),W=X+l.getPixelValue(ac.offsetHeight),U=l.getStepTarget(F()),ad=U.getBoundingClientRect(),aa=ad.top+l.getScrollTop(),V=ad.bottom+l.getScrollTop(),Q=(X<aa)?X:aa,J=(W>V)?W:V,Z=l.getScrollTop(),L=Z+l.getWindowHeight(),M=Q-s.scrollTopMargin,K,P,O,ab,N,R,Y;if(Q>=Z&&(Q<=Z+s.scrollTopMargin||J<=L)){if(T){T()}return}else{if(!s.smoothScroll){window.scrollTo(0,M);if(T){T()}return}else{if(typeof YAHOO!==k&&typeof YAHOO.env!==k&&typeof YAHOO.env.ua!==k&&typeof YAHOO.util!==k&&typeof YAHOO.util.Scroll!==k){K=YAHOO.env.ua.webkit?document.body:document.documentElement;O=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:undefined;P=new YAHOO.util.Scroll(K,{scroll:{to:[0,M]}},s.scrollDuration/1000,O);P.onComplete.subscribe(T);P.animate()}else{if(d){$("body, html").animate({scrollTop:M},s.scrollDuration,T)}else{if(M<0){M=0}ab=(Z>Q)?-1:1;N=Math.abs(Z-M)/(s.scrollDuration/10);Y=function(){var af=l.getScrollTop(),ae=af+(ab*N);if((ab>0&&ae>=M)||(ab<0&&ae<=M)){ae=M;if(T){T()}window.scrollTo(0,ae);return}window.scrollTo(0,ae);if(l.getScrollTop()===af){if(T){T()}return}setTimeout(Y,10)};Y()}}}}},z=function(M,J){var L,K;if(w+M>=0&&w+M<C.steps.length){w+=M;K=F();setTimeout(function(){L=l.getStepTarget(K);if(L){J(w)}else{l.invokeCallbacks("error",[C.id,w]);z(M,J)}},l.valOrDefault(K.delay,0))}else{J(-1)}},H=function(J,O){var N=A(),R=this,K,M,P,L,Q;N.hide();J=l.valOrDefault(J,true);K=F();M=K;P=w;L=K.multipage;Q=function(S){if(S===-1){return this.endTour(true)}if(J){if(O>0&&M.onNext){M.onNext()}else{if(O<0&&M.onPrev){M.onPrev()}}l.invokeCallbacks(O>0?"next":"prev",[C.id,P]);if(O>0&&L){return}}this.showStep(S)};if(!L&&s.skipIfNoElement){z(O,function(S){Q.call(R,S)})}else{if(w+O>=0&&w+O<C.steps.length){w+=O;K=F();if(!l.getStepTarget(K)&&!L){l.invokeCallbacks("error",[C.id,w]);return this.endTour(true,false)}Q(w)}}return this},u=function(M){var K={},N,J,L;C=M;for(N in M){if(M.hasOwnProperty(N)&&N!=="id"&&N!=="steps"){K[N]=M[N]}}this.resetDefaultOptions();x.call(this,K,true);J=l.getState(s.cookieName);if(J){L=J.split(":");B=L[0];r=L[1];r=parseInt(r,10);if(L.length>2&&L[2]==="mp"){if(r<C.steps.length-1){++r}}}return this},G=function(J){if(J){this.configure(J)}};this.getCalloutManager=function(){if(typeof I===k){I=new h()}return I};this.startTour=function(N,M){var J,L,K;if(!C){u.call(this,N)}if(typeof M!==k){w=M}if(document.readyState!=="complete"){b=true;return this}if(typeof w===k){if(C.id===B&&typeof r!==k){w=r;L=F();K=l.getStepTarget(L);if(!K){--w;L=F();K=l.getStepTarget(L)}if(!K&&s.skipIfNoElement){z(1);K=(w!==-1)&&l.getStepTarget(C.steps[w])}if(!K){this.endTour(false,false);return this}}else{w=0}}l.invokeCallbacks("start",[C.id,w]);J=A();J.hide(false);this.isActive=true;if(s.animate){J._initAnimate()}if(!l.getStepTarget(F())){l.invokeCallbacks("error",[C.id,w]);if(s.skipIfNoElement){this.nextStep(false)}}else{this.showStep(w)}return this};this.showStep=function(K){var J=C.steps[K];setTimeout(function(){var P=C.steps,N=P.length,M=C.id+":"+K,L=A(),Q=l.getStepTarget(J),O;w=K;if(!s.animate){L.hide(false)}O=(K===N-1);L.render(J,K,O,function(){v(function(){L.show()});if(J.onShow){J.onShow()}if(J.nextOnTargetClick){l.addClickListener(Q,t)}});l.invokeCallbacks("show",[C.id,w]);if(J.multipage){M+=":mp"}l.setState(s.cookieName,M,1)},J.delay||0);return this};this.prevStep=function(J){H.call(this,J,-1);return this};this.nextStep=function(J){var K=F(),L=l.getStepTarget(K);if(K.nextOnTargetClick){l.removeClickListener(L,t)}H.call(this,J,1);return this};this.endTour=function(L,J){var K=A();L=l.valOrDefault(L,true);J=l.valOrDefault(J,true);w=0;r=undefined;K.hide();if(L){l.clearState(s.cookieName)}p.isActive=false;if(C&&J){l.invokeCallbacks("end",[C.id])}p.removeCallbacks(true);C=null;return this};this.getCurrTour=function(){return C};this.getCurrStepNum=function(){return w};this.listen=function(L,J,K){if(L&&J){j[L].push({cb:J,fromTour:K})}return this};this.removeCallback=function(N,K){var L=j[N],M,J;for(M=0,J=L.length;M<J;++M){if(K===L[M].cb){L.splice(M,1)}}return this};this.removeCallbacks=function(K){var N,L,J,M;for(M in j){if(K){N=j[M];for(L=0,J=N.length;L<J;++L){if(N[L].fromTour){N.splice(L--,1);--J}}}else{j[M]=[]}}return this};this.setCookieName=function(J){s.cookieName=J;return this};this.resetDefaultOptions=function(){if(!s){s={}}l.extend(s,m);return this};x=function(K,L){var J;if(!s){this.resetDefaultOptions()}l.extend(s,K);if(K){l.extend(n,K.i18n)}this.listen("next",K.onNext,L).listen("prev",K.onPrev,L).listen("start",K.onStart,L).listen("end",K.onEnd,L).listen("show",K.onShow,L).listen("error",K.onError,L).listen("close",K.onClose,L);J=A();if(s.animate){J._initAnimate()}else{J._removeAnimate()}J.showCloseButton(K.showCloseButton,typeof K.showCloseButton!==k);return this};this.configure=function(J){return x.call(this,J,false)};G.call(this,y)};p=new q();c[e]=p}(window,"hopscotch"));