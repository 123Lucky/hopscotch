(function(c,e){var o,g,l,k,i,a,n=c[e],j="undefined",b=false,d=(typeof window.jQuery!==j),m=(typeof window.sessionStorage!==j),h=document.body.style,f=(typeof h.MozTransition!==j||typeof h.MsTransition!==j||typeof h.webkitTransition!==j||typeof h.OTransition!==j||typeof h.transition!==j);if(n){return}a=function(){if(b){n.startTour()}};if(window.addEventListener){window.addEventListener("load",a)}else{if(window.attachEvent){window.attachEvent("onload",a)}}k={addClass:function(r,t){var q,s,p;if(r.className.length===0){r.className=t}else{q=r.className.split(" ");for(s=0,p=q.length;s<p;++s){if(q[s]===t){return}}q.splice(0,0,t);r.className=q.join(" ")}},removeClass:function(p,u){var t,x,v,s,q,w,r;x=u.split(" ");t=p.className.split(" ");for(s=0,w=x.length;s<w;++s){v=x[s];for(q=0,r=t.length;q<r;++q){if(t[q]===v){break}}if(q<r){t.splice(q,1)}}p.className=t.join(" ")},getPixelValue:function(q){var p=typeof q;if(p==="number"){return q}if(p==="string"){return parseInt(q,10)}return 0},valOrDefault:function(q,p){return typeof q!==j?q:p},invokeCallbacks:function(t,q){var s=i[t],r=0,p=s.length;for(;r<p;++r){s[r].cb.apply(this,q)}},getScrollTop:function(){if(typeof window.pageYOffset!==j){return window.pageYOffset}else{return document.documentElement.scrollTop}},getScrollLeft:function(){if(typeof window.pageXOffset!==j){return window.pageXOffset}else{return document.documentElement.scrollLeft}},getWindowHeight:function(){return window.innerHeight?window.innerHeight:document.documentElement.clientHeight},getWindowWidth:function(){return window.innerWidth?window.innerWidth:document.documentElement.clientWidth},addClickListener:function(q,p){return q.addEventListener?q.addEventListener("click",p):q.attachEvent("onclick",p)},evtPreventDefault:function(p){if(p.preventDefault){p.preventDefault()}else{if(event){event.returnValue=false}}},extend:function(q,p){var r;for(r in p){if(p.hasOwnProperty(r)){q[r]=p[r]}}},getStepTarget:function(p){if(!p){return null}if(typeof p.target==="string"){return document.getElementById(p.target)}return p.target},setState:function(r,s,t){var p="",q;if(m){sessionStorage.setItem(r,s)}else{if(t){q=new Date();q.setTime(q.getTime()+(t*24*60*60*1000));p="; expires="+q.toGMTString()}document.cookie=r+"="+s+p+"; path=/"}},getState:function(q){var s=q+"=",p=document.cookie.split(";"),r,t;if(m){return sessionStorage.getItem(q)}else{for(r=0;r<p.length;r++){t=p[r];while(t.charAt(0)===" "){t=t.substring(1,t.length)}if(t.indexOf(s)===0){return t.substring(s.length,t.length)}}return null}},clearState:function(p){if(m){sessionStorage.removeItem(p)}else{this.setState(p,"",-1)}}};i={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]};l={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"};g=function(u){var q=false,p,t=function(y,x){var w=document.createElement("input");w.id=y;w.type="button";w.value=x;k.addClass(w,"hopscotch-nav-button");if(y.indexOf("prev")>=0){k.addClass(w,"prev")}else{k.addClass(w,"next")}return w},r=function(x,w,z){var y="hide";if(z){y="hide-all"}if(typeof w===j){w=true}if(w){k.removeClass(x,y)}else{k.addClass(x,y)}},s=function(z){var E,w,C,y,D,A,B=6,H=k.getStepTarget(z),x=this.element,G=this.arrowEl,F=k.getPixelValue(z.arrowOffset);E=k.getPixelValue(z.width)||u.bubbleWidth;C=k.valOrDefault(z.padding,u.bubblePadding);k.removeClass(x,"fade-in-down fade-in-up fade-in-left fade-in-right");y=H.getBoundingClientRect();if(z.orientation==="top"){w=x.offsetHeight;D=(y.top-w)-u.arrowWidth;A=y.left}else{if(z.orientation==="bottom"){D=y.bottom+u.arrowWidth;A=y.left}else{if(z.orientation==="left"){D=y.top;A=y.left-E-2*C-2*B-u.arrowWidth}else{if(z.orientation==="right"){D=y.top;A=y.right+u.arrowWidth}}}}if(!F){G.style.top="";G.style.left=""}else{if(z.orientation==="top"||z.orientation==="bottom"){G.style.top="";G.style.left=F+"px"}else{if(z.orientation==="left"||z.orientation==="right"){G.style.left="";G.style.top=F+"px"}}}A+=k.getPixelValue(z.xOffset);D+=k.getPixelValue(z.yOffset);if(!z.fixedElement){D+=k.getScrollTop();A+=k.getScrollLeft()}x.style.position=(z.fixedElement?"fixed":"absolute");if(u.animate&&d&&!f){$(x).animate({top:D+"px",left:A+"px"})}else{x.style.top=D+"px";x.style.left=A+"px"}},v=function(){var A=document.createElement("div"),B=document.createElement("div"),z=document.createElement("div"),y=this,C=false,x,w;this.element=A;this.containerEl=B;this.titleEl=document.createElement("h3");this.numberEl=document.createElement("span");this.contentEl=document.createElement("p");A.id="hopscotch-bubble";k.addClass(A,"animated");B.id="hopscotch-bubble-container";this.numberEl.id="hopscotch-bubble-number";B.appendChild(this.numberEl);z.appendChild(this.titleEl);z.appendChild(this.contentEl);z.id="hopscotch-bubble-content";B.appendChild(z);A.appendChild(B);this.initNavButtons();this.initCloseButton();this.initArrow();x=function(){if(C||!q){return}C=true;w=setTimeout(function(){s.call(y,p,false);C=false},200)};if(window.addEventListener){window.addEventListener("resize",x)}else{if(window.attachEvent){window.attachEvent("onresize",x)}}this.hide();document.body.appendChild(A);return this};this.initNavButtons=function(){var w=document.createElement("div");this.prevBtnEl=t("hopscotch-prev",l.prevBtn);this.nextBtnEl=t("hopscotch-next",l.nextBtn);this.doneBtnEl=t("hopscotch-done",l.doneBtn);k.addClass(this.doneBtnEl,"hide");w.appendChild(this.prevBtnEl);w.appendChild(this.nextBtnEl);w.appendChild(this.doneBtnEl);k.addClickListener(this.prevBtnEl,function(x){n.prevStep(true)});k.addClickListener(this.nextBtnEl,function(x){n.nextStep(true)});k.addClickListener(this.doneBtnEl,n.endTour);w.id="hopscotch-actions";this.buttonsEl=w;this.containerEl.appendChild(w);return this};this.initCloseButton=function(){var w=document.createElement("a");w.id="hopscotch-bubble-close";w.href="#";w.title=l.closeTooltip;w.innerHTML=l.closeTooltip;k.addClickListener(w,function(y){var x=n.getCurrStepNum(),z=n.getCurrTour(),A=(x===z.steps.length-1);k.invokeCallbacks("close",[z.id,x]);n.endTour(true,A);if(y.preventDefault){y.preventDefault()}else{if(event){event.returnValue=false}}});this.closeBtnEl=w;this.containerEl.appendChild(w);return this};this.initArrow=function(){var w,x;this.arrowEl=document.createElement("div");this.arrowEl.id="hopscotch-bubble-arrow-container";x=document.createElement("div");x.className="hopscotch-bubble-arrow-border";w=document.createElement("div");w.className="hopscotch-bubble-arrow";this.arrowEl.appendChild(x);this.arrowEl.appendChild(w);this.element.appendChild(this.arrowEl);return this};this.renderStep=function(y,D,z,A,E){var F=this,x=k.valOrDefault(y.showNextButton,u.showNextButton),w=k.valOrDefault(y.showPrevButton,u.showPrevButton),C,B;p=y;this.setTitle(y.title?y.title:"");this.setContent(y.content?y.content:"");this.setNum(D);this.orientation=y.orientation;this.showPrevButton(this.prevBtnEl&&w&&(D>0||z>0));this.showNextButton(this.nextBtnEl&&x&&!A);this.nextBtnEl.value=y.showSkip?l.skipBtn:l.nextBtn;if(A){k.removeClass(this.doneBtnEl,"hide")}else{k.addClass(this.doneBtnEl,"hide")}this.setArrow(y.orientation);C=k.getPixelValue(y.width)||u.bubbleWidth;B=k.valOrDefault(y.padding,u.bubblePadding);this.containerEl.style.width=C+"px";this.containerEl.style.padding=B+"px";this.element.style.zIndex=(y.zindex?y.zindex:"");if(y.orientation==="top"){setTimeout(function(){s.call(F,y);if(E){if(!y.fixedElement){E()}else{F.show()}}},5)}else{s.call(this,y);if(E){if(!y.fixedElement){E()}else{F.show()}}}return this};this.setTitle=function(w){if(w){this.titleEl.innerHTML=w;k.removeClass(this.titleEl,"hide")}else{k.addClass(this.titleEl,"hide")}return this};this.setContent=function(w){if(w){this.contentEl.innerHTML=w;k.removeClass(this.contentEl,"hide")}else{k.addClass(this.contentEl,"hide")}return this};this.setNum=function(w){if(l.stepNums&&w<l.stepNums.length){w=l.stepNums[w]}else{w=w+1}this.numberEl.innerHTML=w};this.setArrow=function(w){if(w==="top"){this.arrowEl.className="down"}else{if(w==="bottom"){this.arrowEl.className="up"}else{if(w==="left"){this.arrowEl.className="right"}else{if(w==="right"){this.arrowEl.className="left"}}}}};this.getArrowDirection=function(){if(this.orientation==="top"){return"down"}if(this.orientation==="bottom"){return"up"}if(this.orientation==="left"){return"right"}if(this.orientation==="right"){return"left"}};this.show=function(){var w=this,x="fade-in-"+this.getArrowDirection(),y=1000;k.removeClass(this.element,"hide");if(u.animate){setTimeout(function(){k.addClass(w.element,"animate")},50)}else{k.addClass(this.element,x);setTimeout(function(){k.removeClass(w.element,"invisible")},50);setTimeout(function(){k.removeClass(w.element,x)},y)}q=true;return this};this.hide=function(w){var x=this.element;w=k.valOrDefault(w,true);x.style.top="";x.style.left="";if(w){k.addClass(x,"hide");k.removeClass(x,"invisible")}else{k.removeClass(x,"hide");if(!u.animate){k.addClass(x,"invisible")}}k.removeClass(x,"animate fade-in-up fade-in-down fade-in-right fade-in-left");q=false;return this};this.showPrevButton=function(w,x){r(this.prevBtnEl,w,x)};this.showNextButton=function(w,x){r(this.nextBtnEl,w,x)};this.showCloseButton=function(w,x){r(this.closeBtnEl,w,x)};this.initAnimate=function(){var w=this;setTimeout(function(){k.addClass(w.element,"animate")},50)};this.removeAnimate=function(){k.removeClass(this.element,"animate")};v.call(this)};o=function(v){var E="hopscotch.tour.state",A,q,z,t,G,y,p,F,u,x=function(){if(!A){A=new g(q)}return A},B=function(){var H;if(t<0||t>=z.steps.length){return null}else{H=z.steps[t]}return(H.length>0)?H[G]:H},s=function(S){var Q=x(),aa=Q.element,W=k.getPixelValue(aa.style.top),V=W+k.getPixelValue(aa.offsetHeight),T=k.getStepTarget(B()),ab=T.getBoundingClientRect(),Y=ab.top+k.getScrollTop(),U=ab.bottom+k.getScrollTop(),O=(W<Y)?W:Y,H=(V>U)?V:U,X=k.getScrollTop(),J=X+k.getWindowHeight(),K=O-q.scrollTopMargin,R=this,I,N,M,Z,L,P;if(O>=X&&(O<=X+q.scrollTopMargin||H<=J)){if(S){S()}return}else{if(!q.smoothScroll){window.scrollTo(0,K);if(S){S()}return}else{if(typeof YAHOO!==j&&typeof YAHOO.env!==j&&typeof YAHOO.env.ua!==j&&typeof YAHOO.util!==j&&typeof YAHOO.util.Scroll!==j){I=YAHOO.env.ua.webkit?document.body:document.documentElement;M=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:undefined;N=new YAHOO.util.Scroll(I,{scroll:{to:[0,K]}},q.scrollDuration/1000,M);N.onComplete.subscribe(S);N.animate()}else{if(d){$("body, html").animate({scrollTop:K},q.scrollDuration,S)}else{if(K<0){K=0}Z=(X>O)?-1:1;L=Math.abs(X-K)/(q.scrollDuration/10);P=setInterval(function(){var ad=k.getScrollTop(),ac=ad+(Z*L);if((Z>0&&ac>=K)||Z<0&&ac<=K){ac=K;clearInterval(P);if(S){S()}window.scrollTo(0,ac);return}window.scrollTo(0,ac);if(k.getScrollTop()===ad){clearInterval(P);if(S){S()}}},10)}}}}},w=function(J){var H=false,I;while(!H&&t+J>=0&&t+J<z.steps.length){t+=J;I=B();H=k.getStepTarget(I);if(!H){k.invokeCallbacks("error",[z.id,t])}}if(!H){t=-1}return t},D=function(H,L){var I=x();H=k.valOrDefault(H,true);I.hide();var K=B(),J=t;if(q.skipIfNoElement){w(L);if(t===-1){return this.endTour(true)}}else{if(t+L>=0&&t+L<z.steps.length){t+=L;K=B();if(!k.getStepTarget(K)){k.invokeCallbacks("error",[z.id,t]);return this.endTour(true,false)}}}if(H){if(L>0&&K.onNext){K.onNext()}else{if(L<0&&K.onPrev){K.onPrev()}}k.invokeCallbacks(L>0?"next":"prev",[z.id,J])}this.showStep(t);return this},r=function(M){var K={},I,N,J,H,L;z=M;for(N in M){if(M.hasOwnProperty(N)&&N!=="id"&&N!=="steps"){K[N]=M[N]}}this.resetDefaultOptions();u.call(this,K,true);H=k.getState(q.cookieName);if(H){L=H.split(":");y=L[0];p=L[1];F=undefined;J=p.split("-");if(J.length>1){p=parseInt(J[0],10);F=parseInt(J[1],10)}else{p=parseInt(p,10)}if(L.length>2&&L[2]==="mp"){if(F&&F<z.steps[p].length-1){++F}else{if(p<z.steps.length-1){++p;if(z.steps[p].length>0){F=0}else{F=undefined}}}}}return this},C=function(H){if(H){this.configure(H)}};this.startTour=function(M,L,K){var H,J,I;if(!z){r.call(this,M)}if(typeof L!==j){t=L;G=K}if(document.readyState!=="complete"){b=true;return this}if(typeof t===j){if(z.id===y&&typeof p!==j){t=p;G=F;J=B();I=k.getStepTarget(J);if(!I){--t;J=B();I=k.getStepTarget(J)}if(!I&&q.skipIfNoElement){w(1);I=(t!==-1)&&k.getStepTarget(z.steps[t])}if(!I){this.endTour(false,false);return this}}else{t=0}}k.invokeCallbacks("start",[z.id,t]);H=x();H.hide(false);this.isActive=true;if(q.animate){H.initAnimate()}if(!k.getStepTarget(B())){k.invokeCallbacks("error",[z.id,t]);if(q.skipIfNoElement){this.nextStep(false)}}else{this.showStep(t,G)}return this};this.showStep=function(K,J){var H=this,I=z.steps[K];setTimeout(function(){var P=z.steps,N=P.length,M=z.id+":"+K,L=x(),R=k.getStepTarget(I),Q,O;t=K;G=J;if(!q.animate){L.hide(false)}if(I.nextOnTargetClick){Q=function(){H.nextStep(false);return R.removeEventListener?R.removeEventListener("click",Q):R.detachEvent("click",Q)}}O=(K===N-1)||(J>=I.length-1);L.renderStep(I,K,J,O,function(){s(function(){L.show()});if(I.onShow){I.onShow()}if(I.nextOnTargetClick){k.addClickListener(R,Q)}});k.invokeCallbacks("show",[z.id,t]);if(I.multipage){M+=":mp"}k.setState(q.cookieName,M,1)},I.delay?I.delay:0);return this};this.prevStep=function(H){D.call(this,H,-1);return this};this.nextStep=function(H){D.call(this,H,1);return this};this.endTour=function(J,H){var I=x();J=k.valOrDefault(J,true);H=k.valOrDefault(H,true);t=0;G=undefined;p=undefined;I.hide();if(J){k.clearState(q.cookieName)}n.isActive=false;if(z&&H){k.invokeCallbacks("end",[z.id])}n.removeCallbacks(true);z=null;return this};this.getCurrTour=function(){return z};this.getCurrStepNum=function(){return t};this.addCallback=function(J,H,I){if(J&&H){i[J].push({cb:H,fromTour:I})}return this};this.removeCallback=function(L,I){var J=i[L],K,H;for(K=0,H=J.length;K<H;++K){if(I===J[K].cb){J.splice(K,1)}}return this};this.removeCallbacks=function(I){var L,J,H,K;for(K in i){if(I){L=i[K];for(J=0,H=L.length;J<H;++J){if(L[J].fromTour){L.splice(J--,1);--H}}}else{i[K]=[]}}return this};this.setCookieName=function(H){E=H;q.cookieName=H;return this};this.resetDefaultOptions=function(){q={animate:false,smoothScroll:true,scrollDuration:1000,scrollTopMargin:200,showCloseButton:true,showPrevButton:false,showNextButton:true,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:true,cookieName:E};return this};u=function(I,J){var H;if(!q){this.resetDefaultOptions()}k.extend(q,I);if(I){k.extend(l,I.i18n)}this.addCallback("next",I.onNext,J).addCallback("prev",I.onPrev,J).addCallback("start",I.onStart,J).addCallback("end",I.onEnd,J).addCallback("show",I.onShow,J).addCallback("error",I.onError,J).addCallback("close",I.onClose,J);H=x();if(q.animate){H.initAnimate()}else{H.removeAnimate()}H.showPrevButton(I.showPrevButton,typeof I.showPrevButton!==j);H.showNextButton(I.showNextButton,typeof I.showNextButton!==j);H.showCloseButton(I.showCloseButton,typeof I.showCloseButton!==j);return this};this.configure=function(H){return u.call(this,H,false)};C.call(this,v)};n=new o();c[e]=n}(window,"hopscotch"));