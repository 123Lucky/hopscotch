(function(c,e){var o,g,l,k,i,a,n=c[e],j="undefined",b=false,d=(typeof window.jQuery!==j),m=(typeof window.sessionStorage!==j),h=document.body.style,f=(typeof h.MozTransition!==j||typeof h.MsTransition!==j||typeof h.webkitTransition!==j||typeof h.OTransition!==j||typeof h.transition!==j);if(n){return}a=function(){if(b){n.startTour()}};if(window.addEventListener){window.addEventListener("load",a)}else{if(window.attachEvent){window.attachEvent("onload",a)}}k={addClass:function(r,t){var q,s,p;if(r.className.length===0){r.className=t}else{q=r.className.split(" ");for(s=0,p=q.length;s<p;++s){if(q[s]===t){return}}q.splice(0,0,t);r.className=q.join(" ")}},removeClass:function(p,u){var t,x,v,s,q,w,r;x=u.split(" ");t=p.className.split(" ");for(s=0,w=x.length;s<w;++s){v=x[s];for(q=0,r=t.length;q<r;++q){if(t[q]===v){break}}if(q<r){t.splice(q,1)}}p.className=t.join(" ")},getPixelValue:function(q){var p=typeof q;if(p==="number"){return q}if(p==="string"){return parseInt(q,10)}return 0},valOrDefault:function(q,p){return typeof q!==j?q:p},invokeCallbacks:function(t,q){var s=i[t],r=0,p=s.length;for(;r<p;++r){s[r].cb.apply(this,q)}},getScrollTop:function(){if(typeof window.pageYOffset!==j){return window.pageYOffset}else{return document.documentElement.scrollTop}},getScrollLeft:function(){if(typeof window.pageXOffset!==j){return window.pageXOffset}else{return document.documentElement.scrollLeft}},getWindowHeight:function(){return window.innerHeight?window.innerHeight:document.documentElement.clientHeight},getWindowWidth:function(){return window.innerWidth?window.innerWidth:document.documentElement.clientWidth},addClickListener:function(q,p){return q.addEventListener?q.addEventListener("click",p):q.attachEvent("onclick",p)},evtPreventDefault:function(p){if(p.preventDefault){p.preventDefault()}else{if(event){event.returnValue=false}}},extend:function(q,p){var r;for(r in p){if(p.hasOwnProperty(r)){q[r]=p[r]}}},getStepTarget:function(p){if(!p){return null}if(typeof p.target==="string"){return document.getElementById(p.target)}return p.target},setState:function(r,s,t){var p="",q;if(m){sessionStorage.setItem(r,s)}else{if(t){q=new Date();q.setTime(q.getTime()+(t*24*60*60*1000));p="; expires="+q.toGMTString()}document.cookie=r+"="+s+p+"; path=/"}},getState:function(q){var s=q+"=",p=document.cookie.split(";"),r,t;if(m){return sessionStorage.getItem(q)}else{for(r=0;r<p.length;r++){t=p[r];while(t.charAt(0)===" "){t=t.substring(1,t.length)}if(t.indexOf(s)===0){return t.substring(s.length,t.length)}}return null}},clearState:function(p){if(m){sessionStorage.removeItem(p)}else{this.setState(p,"",-1)}}};i={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]};l={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"};g=function(u){var q=false,p,t=function(y,x){var w=document.createElement("input");w.id=y;w.type="button";w.value=x;k.addClass(w,"hopscotch-nav-button");if(y.indexOf("prev")>=0){k.addClass(w,"prev")}else{k.addClass(w,"next")}return w},r=function(x,w,z){var y="hide";if(z){y="hide-all"}if(typeof w===j){w=true}if(w){k.removeClass(x,y)}else{k.addClass(x,y)}},s=function(z){var E,w,C,y,D,A,B=6,H=k.getStepTarget(z),x=this.element,G=this.arrowEl,F=k.getPixelValue(z.arrowOffset);E=k.getPixelValue(z.width)||u.bubbleWidth;C=k.valOrDefault(z.padding,u.bubblePadding);k.removeClass(x,"fade-in-down fade-in-up fade-in-left fade-in-right");y=H.getBoundingClientRect();if(z.orientation==="top"){w=x.offsetHeight;D=(y.top-w)-u.arrowWidth;A=y.left}else{if(z.orientation==="bottom"){D=y.bottom+u.arrowWidth;A=y.left}else{if(z.orientation==="left"){D=y.top;A=y.left-E-2*C-2*B-u.arrowWidth}else{if(z.orientation==="right"){D=y.top;A=y.right+u.arrowWidth}}}}if(!F){G.style.top="";G.style.left=""}else{if(z.orientation==="top"||z.orientation==="bottom"){G.style.top="";G.style.left=F+"px"}else{if(z.orientation==="left"||z.orientation==="right"){G.style.left="";G.style.top=F+"px"}}}A+=k.getPixelValue(z.xOffset);D+=k.getPixelValue(z.yOffset);if(!z.fixedElement){D+=k.getScrollTop();A+=k.getScrollLeft()}x.style.position=(z.fixedElement?"fixed":"absolute");if(u.animate&&d&&!f){$(x).animate({top:D+"px",left:A+"px"})}else{x.style.top=D+"px";x.style.left=A+"px"}},v=function(){var A=document.createElement("div"),B=document.createElement("div"),z=document.createElement("div"),y=this,C=false,x,w;this.element=A;this.containerEl=B;this.titleEl=document.createElement("h3");this.numberEl=document.createElement("span");this.contentEl=document.createElement("p");A.id="hopscotch-bubble";k.addClass(A,"animated");B.id="hopscotch-bubble-container";this.numberEl.id="hopscotch-bubble-number";B.appendChild(this.numberEl);z.appendChild(this.titleEl);z.appendChild(this.contentEl);z.id="hopscotch-bubble-content";B.appendChild(z);A.appendChild(B);this.initNavButtons();this.initCloseButton();this.initArrow();x=function(){if(C||!q){return}C=true;w=setTimeout(function(){s.call(y,p,false);C=false},200)};if(window.addEventListener){window.addEventListener("resize",x)}else{if(window.attachEvent){window.attachEvent("onresize",x)}}this.hide();document.body.appendChild(A);return this};this.initNavButtons=function(){var w=document.createElement("div");this.prevBtnEl=t("hopscotch-prev",l.prevBtn);this.nextBtnEl=t("hopscotch-next",l.nextBtn);this.doneBtnEl=t("hopscotch-done",l.doneBtn);k.addClass(this.doneBtnEl,"hide");w.appendChild(this.prevBtnEl);w.appendChild(this.nextBtnEl);w.appendChild(this.doneBtnEl);k.addClickListener(this.prevBtnEl,function(x){n.prevStep(true)});k.addClickListener(this.nextBtnEl,function(x){n.nextStep(true)});k.addClickListener(this.doneBtnEl,n.endTour);w.id="hopscotch-actions";this.buttonsEl=w;this.containerEl.appendChild(w);return this};this.initCloseButton=function(){var w=document.createElement("a");w.id="hopscotch-bubble-close";w.href="#";w.title=l.closeTooltip;w.innerHTML=l.closeTooltip;k.addClickListener(w,function(y){var x=n.getCurrStepNum(),z=n.getCurrTour(),A=(x===z.steps.length-1);k.invokeCallbacks("close",[z.id,x]);n.endTour(true,A);if(y.preventDefault){y.preventDefault()}else{if(event){event.returnValue=false}}});this.closeBtnEl=w;this.containerEl.appendChild(w);return this};this.initArrow=function(){var w,x;this.arrowEl=document.createElement("div");this.arrowEl.id="hopscotch-bubble-arrow-container";x=document.createElement("div");x.className="hopscotch-bubble-arrow-border";w=document.createElement("div");w.className="hopscotch-bubble-arrow";this.arrowEl.appendChild(x);this.arrowEl.appendChild(w);this.element.appendChild(this.arrowEl);return this};this.renderStep=function(y,D,z,A,E){var F=this,x=k.valOrDefault(y.showNextButton,u.showNextButton),w=k.valOrDefault(y.showPrevButton,u.showPrevButton),C,B;p=y;this.setTitle(y.title?y.title:"");this.setContent(y.content?y.content:"");this.setNum(D);this.orientation=y.orientation;this.showPrevButton(this.prevBtnEl&&w&&(D>0||z>0));this.showNextButton(this.nextBtnEl&&x&&!A);this.nextBtnEl.value=y.showSkip?l.skipBtn:l.nextBtn;if(A){k.removeClass(this.doneBtnEl,"hide")}else{k.addClass(this.doneBtnEl,"hide")}this.setArrow(y.orientation);C=k.getPixelValue(y.width)||u.bubbleWidth;B=k.valOrDefault(y.padding,u.bubblePadding);this.containerEl.style.width=C+"px";this.containerEl.style.padding=B+"px";this.element.style.zIndex=(y.zindex?y.zindex:"");if(y.orientation==="top"){setTimeout(function(){s.call(F,y);if(E){if(!y.fixedElement){E()}else{F.show()}}},5)}else{s.call(this,y);if(E){if(!y.fixedElement){E()}else{F.show()}}}return this};this.setTitle=function(w){if(w){this.titleEl.innerHTML=w;k.removeClass(this.titleEl,"hide")}else{k.addClass(this.titleEl,"hide")}return this};this.setContent=function(w){if(w){this.contentEl.innerHTML=w;k.removeClass(this.contentEl,"hide")}else{k.addClass(this.contentEl,"hide")}return this};this.setNum=function(w){if(l.stepNums&&w<l.stepNums.length){w=l.stepNums[w]}else{w=w+1}this.numberEl.innerHTML=w};this.setArrow=function(w){if(w==="top"){this.arrowEl.className="down"}else{if(w==="bottom"){this.arrowEl.className="up"}else{if(w==="left"){this.arrowEl.className="right"}else{if(w==="right"){this.arrowEl.className="left"}}}}};this.getArrowDirection=function(){if(this.orientation==="top"){return"down"}if(this.orientation==="bottom"){return"up"}if(this.orientation==="left"){return"right"}if(this.orientation==="right"){return"left"}};this.show=function(){var w=this,x="fade-in-"+this.getArrowDirection(),y=1000;k.removeClass(this.element,"hide");if(u.animate){setTimeout(function(){k.addClass(w.element,"animate")},50)}else{k.addClass(this.element,x);setTimeout(function(){k.removeClass(w.element,"invisible")},50);setTimeout(function(){k.removeClass(w.element,x)},y)}q=true;return this};this.hide=function(w){var x=this.element;w=k.valOrDefault(w,true);x.style.top="";x.style.left="";if(w){k.addClass(x,"hide");k.removeClass(x,"invisible")}else{k.removeClass(x,"hide");if(!u.animate){k.addClass(x,"invisible")}}k.removeClass(x,"animate fade-in-up fade-in-down fade-in-right fade-in-left");q=false;return this};this.showPrevButton=function(w,x){r(this.prevBtnEl,w,x)};this.showNextButton=function(w,x){r(this.nextBtnEl,w,x)};this.showCloseButton=function(w,x){r(this.closeBtnEl,w,x)};this.initAnimate=function(){var w=this;setTimeout(function(){k.addClass(w.element,"animate")},50)};this.removeAnimate=function(){k.removeClass(this.element,"animate")};v.call(this)};o=function(p){var B="hopscotch.tour.state",A,r,w,q,C,E,u,y,s,t=function(){if(!A){A=new g(r)}return A},D=function(){var G;if(q<0||q>=w.steps.length){return null}else{G=w.steps[q]}return(G.length>0)?G[C]:G},z=function(R){var P=t(),Z=P.element,V=k.getPixelValue(Z.style.top),U=V+k.getPixelValue(Z.offsetHeight),S=k.getStepTarget(D()),aa=S.getBoundingClientRect(),X=aa.top+k.getScrollTop(),T=aa.bottom+k.getScrollTop(),N=(V<X)?V:X,G=(U>T)?U:T,W=k.getScrollTop(),I=W+k.getWindowHeight(),J=N-r.scrollTopMargin,Q=this,H,M,L,Y,K,O;if(N>=W&&(N<=W+r.scrollTopMargin||G<=I)){if(R){R()}return}else{if(!r.smoothScroll){window.scrollTo(0,J);if(R){R()}return}else{if(typeof YAHOO!==j&&typeof YAHOO.env!==j&&typeof YAHOO.env.ua!==j&&typeof YAHOO.util!==j&&typeof YAHOO.util.Scroll!==j){H=YAHOO.env.ua.webkit?document.body:document.documentElement;L=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:undefined;M=new YAHOO.util.Scroll(H,{scroll:{to:[0,J]}},r.scrollDuration/1000,L);M.onComplete.subscribe(R);M.animate()}else{if(d){$("body, html").animate({scrollTop:J},r.scrollDuration,R)}else{if(J<0){J=0}Y=(W>N)?-1:1;K=Math.abs(W-J)/(r.scrollDuration/10);O=setInterval(function(){var ac=k.getScrollTop(),ab=ac+(Y*K);if((Y>0&&ab>=J)||Y<0&&ab<=J){ab=J;clearInterval(O);if(R){R()}window.scrollTo(0,ab);return}window.scrollTo(0,ab);if(k.getScrollTop()===ac){clearInterval(O);if(R){R()}}},10)}}}}},x=function(H,K){var J=this,G=w.steps[q+K],I=t();H=k.valOrDefault(H,true);I.hide();setTimeout(function(){var N=D(),M=q,L=false;if(r.skipIfNoElement){while(!L&&q+K>=0&&q+K<w.steps.length){q+=K;N=D();L=k.getStepTarget(N);if(!L){k.invokeCallbacks("error",[w.id,q])}}if(!L){return J.endTour(true)}}else{if(q+K>=0&&q+K<w.steps.length){q+=K;N=D();if(!k.getStepTarget(N)){k.invokeCallbacks("error",[w.id,q]);return J.endTour(true,false)}}}if(H){if(K>0&&N.onNext){N.onNext()}else{if(K<0&&N.onPrev){N.onPrev()}}k.invokeCallbacks(K>0?"next":"prev",[w.id,M])}J.showStep(q)},G.delay?G.delay:0);return this},v=function(L){var J={},H,M,I,G,K;w=L;for(M in L){if(L.hasOwnProperty(M)&&M!=="id"&&M!=="steps"){J[M]=L[M]}}this.resetDefaultOptions();s.call(this,J,true);G=k.getState(r.cookieName);if(G){K=G.split(":");E=K[0];u=K[1];y=undefined;I=u.split("-");if(I.length>1){u=parseInt(I[0],10);y=parseInt(I[1],10)}else{u=parseInt(u,10)}if(K.length>2&&K[2]==="mp"){if(y&&y<w.steps[u].length-1){++y}else{if(u<w.steps.length-1){++u;if(w.steps[u].length>0){y=0}else{y=undefined}}}}}return this},F=function(G){if(G){this.configure(G)}};this.startTour=function(K,J,I){var G,H;if(!w){v.call(this,K)}if(typeof J!==j){q=J;C=I}if(document.readyState!=="complete"){b=true;return this}if(typeof q===j){if(w.id===E&&typeof u!==j){q=u;C=y;H=D();if(!H||!k.getStepTarget(H)){--q;H=D();if(!k.getStepTarget(H)){this.endTour(false,false);return this}}}else{q=0}}k.invokeCallbacks("start",[w.id,q]);G=t();G.hide(false);this.isActive=true;if(r.animate){G.initAnimate()}if(!k.getStepTarget(D())){k.invokeCallbacks("error",[w.id,q]);if(r.skipIfNoElement){this.nextStep(false)}}else{this.showStep(q,C)}return this};this.showStep=function(L,N){var I=w.steps,H=I[L],G=I.length,O=w.id+":"+L,M=t(),Q=this,P=k.getStepTarget(H),K,J;q=L;C=N;if(!r.animate){M.hide(false)}if(H.nextOnTargetClick){K=function(){Q.nextStep(false);return P.removeEventListener?P.removeEventListener("click",K):P.detachEvent("click",K)}}J=(L===G-1)||(N>=H.length-1);M.renderStep(H,L,N,J,function(){z(function(){M.show()});if(H.onShow){H.onShow()}if(H.nextOnTargetClick){k.addClickListener(P,K)}});k.invokeCallbacks("show",[w.id,q]);if(H.multipage){O+=":mp"}k.setState(r.cookieName,O,1);return this};this.prevStep=function(G){x.call(this,G,-1);return this};this.nextStep=function(G){x.call(this,G,1);return this};this.endTour=function(I,G){var H=t();I=k.valOrDefault(I,true);G=k.valOrDefault(G,true);q=0;C=undefined;u=undefined;H.hide();if(I){k.clearState(r.cookieName)}n.isActive=false;if(w&&G){k.invokeCallbacks("end",[w.id])}n.removeCallbacks(true);w=null;return this};this.getCurrTour=function(){return w};this.getCurrStepNum=function(){return q};this.addCallback=function(I,G,H){if(I&&G){i[I].push({cb:G,fromTour:H})}return this};this.removeCallback=function(K,H){var I=i[K],J,G;for(J=0,G=I.length;J<G;++J){if(H===I[J].cb){I.splice(J,1)}}return this};this.removeCallbacks=function(H){var K,I,G,J;for(J in i){if(H){K=i[J];for(I=0,G=K.length;I<G;++I){if(K[I].fromTour){K.splice(I--,1);--G}}}else{i[J]=[]}}return this};this.setCookieName=function(G){B=G;r.cookieName=G;return this};this.resetDefaultOptions=function(){r={animate:false,smoothScroll:true,scrollDuration:1000,scrollTopMargin:200,showCloseButton:true,showPrevButton:false,showNextButton:true,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:true,cookieName:B};return this};s=function(H,I){var G;if(!r){this.resetDefaultOptions()}k.extend(r,H);if(H){k.extend(l,H.i18n)}this.addCallback("next",H.onNext,I).addCallback("prev",H.onPrev,I).addCallback("start",H.onStart,I).addCallback("end",H.onEnd,I).addCallback("show",H.onShow,I).addCallback("error",H.onError,I).addCallback("close",H.onClose,I);G=t();if(r.animate){G.initAnimate()}else{G.removeAnimate()}G.showPrevButton(H.showPrevButton,typeof H.showPrevButton!==j);G.showNextButton(H.showNextButton,typeof H.showNextButton!==j);G.showCloseButton(H.showCloseButton,typeof H.showCloseButton!==j);return this};this.configure=function(G){return s.call(this,G,false)};F.call(this,p)};n=new o();c[e]=n}(window,"hopscotch"));