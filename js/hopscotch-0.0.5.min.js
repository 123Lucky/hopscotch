(function(z,D){var p,A,E,n,F=window.Sizzle||null,b,s,x,t,m=z[D],G=!1,u={animate:!1,smoothScroll:!0,scrollDuration:1E3,scrollTopMargin:200,showCloseButton:!0,showPrevButton:!1,showNextButton:!0,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:!0},B="undefined"!==typeof window.jQuery,v="undefined"!==typeof window.sessionStorage,g=window.document;m||(Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),p=function(){G&&m.startTour()},window.addEventListener?
window.addEventListener("load",p,!1):window.attachEvent&&window.attachEvent("onload",p),b={addClass:function(a,e){var b,d,h;if(0===a.className.length)a.className=e;else{b=a.className.split(/\s+/);d=0;for(h=b.length;d<h;++d)if(b[d]===e)return;b.splice(0,0,e);a.className=b.join(" ")}},removeClass:function(a,b){var c,d,h,i,f,g,j;d=b.split(/\s+/);c=a.className.split(/\s+/);i=0;for(g=d.length;i<g;++i){h=d[i];f=0;for(j=c.length;f<j&&c[f]!==h;++f);f<j&&c.splice(f,1)}a.className=c.join(" ")},getPixelValue:function(a){var b=
typeof a;return"number"===b?a:"string"===b?parseInt(a,10):0},valOrDefault:function(a,b){return"undefined"!==typeof a?a:b},supportsCssTransitions:function(){var a=g.body.style;return"undefined"!==typeof a.MozTransition||"undefined"!==typeof a.MsTransition||"undefined"!==typeof a.webkitTransition||"undefined"!==typeof a.OTransition||"undefined"!==typeof a.transition},invokeCallbackArrayHelper:function(a){var b;Array.isArray(a)&&(b=x[a[0]],"function"===typeof b&&b.apply(this,a.slice(1)))},invokeCallbackArray:function(a){var e,
c;if(Array.isArray(a))if("string"===typeof a[0])b.invokeCallbackArrayHelper(a);else{e=0;for(c=a.length;e<c;++e)b.invokeCallback(a[e])}},invokeCallback:function(a){"function"===typeof a&&a();if("string"===typeof a&&x[a])x[a]();else b.invokeCallbackArray(a)},invokeEventCallbacks:function(a,b){var c=s[a],d,h;b&&this.invokeCallback(b);d=0;for(h=c.length;d<h;++d)this.invokeCallback(c[d].cb)},getScrollTop:function(){return"undefined"!==typeof window.pageYOffset?window.pageYOffset:g.documentElement.scrollTop},
getScrollLeft:function(){return"undefined"!==typeof window.pageXOffset?window.pageXOffset:g.documentElement.scrollLeft},getWindowHeight:function(){return window.innerHeight||g.documentElement.clientHeight},getWindowWidth:function(){return window.innerWidth||g.documentElement.clientWidth},addClickListener:function(a,b){return a.addEventListener?a.addEventListener("click",b,!1):a.attachEvent("onclick",b)},removeClickListener:function(a,b){return a.removeEventListener?a.removeEventListener("click",b,
!1):a.detachEvent("click",b)},documentIsReady:function(){return"complete"===g.readyState||"interactive"===g.readyState},evtPreventDefault:function(a){a.preventDefault?a.preventDefault():event&&(event.returnValue=!1)},extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},getStepTargetHelper:function(a){return/^[#\.]/.test(a)?g.querySelector?g.querySelector(a):B?(a=jQuery(a),a.length?a[0]:null):F?(a=new F(a),a.length?a[0]:null):/^#[a-zA-Z][\w-_:.]*$/.test(a)?g.getElementById(a.substring(1)):
null:g.getElementById(a)},getStepTarget:function(a){var e;if(!a||!a.target)return null;if("string"===typeof a.target)return a.target=b.getStepTargetHelper(a.target);if(Array.isArray(a.target)){var c,d;c=0;for(d=a.target.length;c<d;c++)if("string"===typeof a.target[c]&&(e=b.getStepTargetHelper(a.target[c])))return a.target=e;return null}return a.target},setState:function(a,b,c){var d="";v?sessionStorage.setItem(a,b):(c&&(d=new Date,d.setTime(d.getTime()+864E5*c),d="; expires="+d.toGMTString()),g.cookie=
a+"="+b+d+"; path=/")},getState:function(a){var b=a+"=",c=g.cookie.split(";"),d,h;if(v)h=sessionStorage.getItem(a);else for(a=0;a<c.length;a++){for(d=c[a];" "===d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(b)){h=d.substring(b.length,d.length);break}}return h},clearState:function(a){v?sessionStorage.removeItem(a):this.setState(a,"",-1)}},s={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]},x={},n={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"},
A=function(a){this.init(a)},A.prototype={isShowing:!1,currStep:void 0,_createButton:function(a,e){var c=g.createElement("button");c.id=a;e&&(c.innerHTML=e);b.addClass(c,"hopscotch-nav-button");0<=a.indexOf("prev")?b.addClass(c,"prev"):b.addClass(c,"next");return c},setPosition:function(a){var e,c,d,h,g;d=b.getStepTarget(a);var f=this.element,l=this.arrowEl,j=b.getPixelValue(a.arrowOffset);e=b.getPixelValue(a.width)||this.opt.bubbleWidth;c=b.valOrDefault(a.padding,this.opt.bubblePadding);b.removeClass(f,
"fade-in-down fade-in-up fade-in-left fade-in-right");d=d.getBoundingClientRect();"top"===a.orientation?(e=f.offsetHeight,h=d.top-e-this.opt.arrowWidth,g=d.left):"bottom"===a.orientation?(h=d.bottom+this.opt.arrowWidth,g=d.left):"left"===a.orientation?(h=d.top,g=d.left-e-2*c-12-this.opt.arrowWidth):"right"===a.orientation&&(h=d.top,g=d.right+this.opt.arrowWidth);if(j)if("top"===a.orientation||"bottom"===a.orientation)l.style.top="",l.style.left=j+"px";else{if("left"===a.orientation||"right"===a.orientation)l.style.left=
"",l.style.top=j+"px"}else l.style.top="",l.style.left="";g+=b.getPixelValue(a.xOffset);h+=b.getPixelValue(a.yOffset);a.fixedElement||(h+=b.getScrollTop(),g+=b.getScrollLeft());f.style.position=a.fixedElement?"fixed":"absolute";this.opt.animate&&B&&!t?$(f).animate({top:h+"px",left:g+"px"}):(f.style.top=h+"px",f.style.left=g+"px")},_initNavButtons:function(){var a=g.createElement("div");this.prevBtnEl=this._createButton("hopscotch-prev",n.prevBtn);this.nextBtnEl=this._createButton("hopscotch-next",
n.nextBtn);this.doneBtnEl=this._createButton("hopscotch-done",n.doneBtn);this.ctaBtnEl=this._createButton("hopscotch-cta");b.addClass(this.doneBtnEl,"hide");a.appendChild(this.prevBtnEl);a.appendChild(this.nextBtnEl);a.appendChild(this.doneBtnEl);a.appendChild(this.ctaBtnEl);b.addClickListener(this.prevBtnEl,function(){m.prevStep(!0)});b.addClickListener(this.nextBtnEl,function(){m.nextStep(!0)});b.addClickListener(this.doneBtnEl,m.endTour);a.className="hopscotch-actions";this.buttonsEl=a;this.containerEl.appendChild(a);
return this},_getCloseFn:function(){var a=this;this.closeFn||(this.closeFn=function(e){a.opt.onClose&&b.invokeCallback(a.opt.onClose);a.opt.id&&!a.opt.isTourBubble?m.getCalloutManager().removeCallout(a.opt.id):a.destroy();b.evtPreventDefault(e)});return this.closeFn},initCloseButton:function(){var a=g.createElement("a");a.className="hopscotch-bubble-close";a.href="#";a.title=n.closeTooltip;a.innerHTML=n.closeTooltip;this.opt.isTourBubble?b.addClickListener(a,function(a){var c=m.getCurrStepNum(),d=
m.getCurrTour(),c=c===d.steps.length-1;b.invokeEventCallbacks("close");m.endTour(!0,c);a.preventDefault?a.preventDefault():event&&(event.returnValue=!1)}):b.addClickListener(a,this._getCloseFn());this.closeBtnEl=a;this.containerEl.appendChild(a);return this},_initArrow:function(){var a,b;this.arrowEl=g.createElement("div");this.arrowEl.className="hopscotch-bubble-arrow-container";b=g.createElement("div");b.className="hopscotch-bubble-arrow-border";a=g.createElement("div");a.className="hopscotch-bubble-arrow";
this.arrowEl.appendChild(b);this.arrowEl.appendChild(a);this.element.appendChild(this.arrowEl);return this},render:function(a,e,c,d){var h=this.element,g,f;a?this.currStep=a:this.currStep&&(a=this.currStep);g=b.valOrDefault(a.showNextButton,this.opt.showNextButton);f=b.valOrDefault(a.showPrevButton,this.opt.showPrevButton);this.setTitle(a.title||"");this.setContent(a.content||"");this.opt.showNumber&&this.setNum(e);this.orientation=a.orientation;this.showPrevButton(this.prevBtnEl&&f&&0<e);this.showNextButton(this.nextBtnEl&&
g&&!c);this.nextBtnEl.value=a.showSkip?n.skipBtn:n.nextBtn;c?b.removeClass(this.doneBtnEl,"hide"):b.addClass(this.doneBtnEl,"hide");this._showButton(this.ctaBtnEl,!!a.showCTAButton);a.showCTAButton?(this.ctaBtnEl.innerHTML=a.ctaLabel,a.onCTA&&(this.onCTA&&b.removeClickListener(this.ctaBtnEl,this.onCTA),b.addClickListener(this.ctaBtnEl,a.onCTA),this.onCTA=a.onCTA)):this.onCTA&&(b.removeClickListener(this.ctaBtnEl,this.onCTA),this.onCTA=null);this._setArrow(a.orientation);e=b.getPixelValue(a.width)||
this.opt.bubbleWidth;c=b.valOrDefault(a.padding,this.opt.bubblePadding);this.containerEl.style.width=e+"px";this.containerEl.style.padding=c+"px";h.style.zIndex=a.zindex||"";"top"===a.orientation?(h.style.top="-9999px",h.style.left="-9999px",b.removeClass(h,"hide"),this.setPosition(a),b.addClass(h,"hide")):this.setPosition(a);d&&d(!a.fixedElement);return this},setTitle:function(a){a?(this.titleEl.innerHTML=a,b.removeClass(this.titleEl,"hide")):b.addClass(this.titleEl,"hide");return this},setContent:function(a){a?
(this.contentEl.innerHTML=a,b.removeClass(this.contentEl,"hide")):b.addClass(this.contentEl,"hide");return this},setNum:function(a){a=n.stepNums&&a<n.stepNums.length?n.stepNums[a]:a+1;this.numberEl.innerHTML=a},_setArrow:function(a){b.removeClass(this.arrowEl,"down up right left");"top"===a?b.addClass(this.arrowEl,"down"):"bottom"===a?b.addClass(this.arrowEl,"up"):"left"===a?b.addClass(this.arrowEl,"right"):"right"===a&&b.addClass(this.arrowEl,"left")},_getArrowDirection:function(){if("top"===this.orientation)return"down";
if("bottom"===this.orientation)return"up";if("left"===this.orientation)return"right";if("right"===this.orientation)return"left"},show:function(){var a=this,e="fade-in-"+this._getArrowDirection();b.removeClass(this.element,"hide");this.opt.animate?setTimeout(function(){b.addClass(a.element,"animate")},50):(b.addClass(this.element,e),setTimeout(function(){b.removeClass(a.element,"invisible")},50),setTimeout(function(){b.removeClass(a.element,e)},1E3));this.isShowing=!0;return this},hide:function(a){var e=
this.element,a=b.valOrDefault(a,!0);e.style.top="";e.style.left="";a?(b.addClass(e,"hide"),b.removeClass(e,"invisible")):(b.removeClass(e,"hide"),this.opt.animate||b.addClass(e,"invisible"));b.removeClass(e,"animate fade-in-up fade-in-down fade-in-right fade-in-left");this.isShowing=!1;return this},_showButton:function(a,e,c){var d="hide";c&&(d="hide-all");"undefined"===typeof e&&(e=!0);e?b.removeClass(a,d):b.addClass(a,d)},showPrevButton:function(a,b){this._showButton(this.prevBtnEl,a,b)},showNextButton:function(a,
b){this._showButton(this.nextBtnEl,a,b)},showCloseButton:function(a,b){this._showButton(this.closeBtnEl,a,b)},_initAnimate:function(){var a=this;setTimeout(function(){b.addClass(a.element,"animate")},50)},_removeAnimate:function(){b.removeClass(this.element,"animate")},destroy:function(){var a=this.element;a&&a.parentNode.removeChild(a);this.closeBtnEl&&b.removeClickListener(this.closeBtnEl,this._getCloseFn());this.ctaBtnEl&&this.onCTA&&b.removeClickListener(this.ctaBtnEl,this.onCTA)},init:function(a){var e=
g.createElement("div"),c=g.createElement("div"),d=g.createElement("div"),h=this,i=!1,f,l;this.element=e;this.containerEl=c;this.titleEl=g.createElement("h3");this.contentEl=g.createElement("p");l={animate:u.animate,showPrevButton:u.showPrevButton,showNextButton:u.showNextButton,bubbleWidth:u.bubbleWidth,bubblePadding:u.bubblePadding,arrowWidth:u.arrowWidth,showNumber:!0,isTourBubble:!0};a="undefined"===typeof a?{}:a;b.extend(l,a);this.opt=l;e.className="hopscotch-bubble animated";c.className="hopscotch-bubble-container";
l.showNumber?(this.numberEl=g.createElement("span"),this.numberEl.className="hopscotch-bubble-number",c.appendChild(this.numberEl)):b.addClass(e,"no-number");d.appendChild(this.titleEl);d.appendChild(this.contentEl);d.className="hopscotch-bubble-content";c.appendChild(d);e.appendChild(c);this._initNavButtons();this.initCloseButton();this._initArrow();a=function(){!i&&h.isShowing&&(i=!0,setTimeout(function(){h.setPosition(h.currStep);i=!1},100))};window.addEventListener?window.addEventListener("resize",
a,!1):window.attachEvent&&window.attachEvent("onresize",a,!1);this.hide();b.documentIsReady()?(g.body.appendChild(e),t=b.supportsCssTransitions()):g.addEventListener?(f=function(){g.removeEventListener("DOMContentLoaded",f);window.removeEventListener("load",f);g.body.appendChild(e);t=b.supportsCssTransitions()},g.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1)):(f=function(){"complete"===g.readyState&&(g.detachEvent("onreadystatechange",f),window.detachEvent("onload",
f),g.body.appendChild(e));t=b.supportsCssTransitions()},g.attachEvent("onreadystatechange",f),window.attachEvent("onload",f))}},E=function(){var a={};this.createCallout=function(b){var c;if(b.id){if(a[b.id])throw"Callout by that id already exists. Please choose a unique id.";b.showNextButton=b.showPrevButton=!1;b.isTourBubble=!1;c=new A(b);a[b.id]=c;b.target&&c.render(b,null,null,function(){c.show()})}else throw"Must specify a callout id.";return c};this.getCallout=function(b){return a[b]};this.removeAllCallouts=
function(){for(var b in a)a.hasOwnProperty(b)&&this.removeCallout(b)};this.removeCallout=function(b){var c=a[b];a[b]=null;c&&c.destroy()}},p=function(a){var e=this,c,d,h,i,f,l,j,p,y=function(){c||(c=new A({animate:h.animate,bubblePadding:h.bubblePadding,bubbleWidth:h.bubbleWidth,showNextButton:h.showNextButton,showPrevButton:h.showPrevButton,arrowWidth:h.arrowWidth}));return c},r=function(){return 0>f||f>=i.steps.length?null:i.steps[f]},t=function(){e.nextStep(!1)},v=function(a,c){var d,h;0<=f+a&&
f+a<i.steps.length?(f+=a,h=r(),setTimeout(function(){(d=b.getStepTarget(h))?c(f):(b.invokeEventCallbacks("error"),v(a,c))},b.valOrDefault(h.delay,0))):c(-1)},z=function(a,c){var d=this,g,e,k,C;y().hide();a=b.valOrDefault(a,!0);e=g=r();k=0<c?e.multipage:0<f&&i.steps[f-1].multipage;C=function(d){if(-1===d)return this.endTour(!0);if(a&&(0<c?b.invokeEventCallbacks("next",e.onNext):b.invokeEventCallbacks("prev",e.onPrev),k))return;this.showStep(d)};if(!k&&h.skipIfNoElement)v(c,function(a){C.call(d,a)});
else if(0<=f+c&&f+c<i.steps.length){f+=c;g=r();if(!b.getStepTarget(g)&&!k)return b.invokeEventCallbacks("error"),this.endTour(!0,!1);C.call(this,f)}return this};this.getCalloutManager=function(){"undefined"===typeof d&&(d=new E);return d};this.startTour=function(a,c){var d,g=this;if(!i){i=a;var e={},k;for(k in a)a.hasOwnProperty(k)&&("id"!==k&&"steps"!==k)&&(e[k]=a[k]);this.resetDefaultOptions();p.call(this,e,!0);if(e=b.getState(h.cookieName))e=e.split(":"),l=e[0],j=e[1],j=parseInt(j,10),2<e.length&&
"mp"===e[2]&&j<i.steps.length-1&&++j}"undefined"!==typeof c&&(f=c);if(!b.documentIsReady())return G=!0,this;f=i.id===l&&"undefined"!==typeof j?j:0;e=function(a){-1!==a&&b.getStepTarget(i.steps[a])?(b.invokeEventCallbacks("start"),d=y(),d.hide(!1),g.isActive=!0,h.animate&&d._initAnimate(),b.getStepTarget(r())?g.showStep(a):(b.invokeEventCallbacks("error"),h.skipIfNoElement&&g.nextStep(!1))):g.endTour(!1,!1)};f=f||0;k=r();(k=b.getStepTarget(k))?e(f):(0<f&&(--f,k=r(),k=b.getStepTarget(k)),k||(b.invokeEventCallbacks("error"),
h.skipIfNoElement?(++f,v(1,e)):(f=-1,e(f))));return this};this.showStep=function(a){var c=i.steps[a];setTimeout(function(){var d=i.steps.length,e=i.id+":"+a,w=y(),k=b.getStepTarget(c),j;j=function(){w.show();b.invokeEventCallbacks("show",c.onShow)};f=a;h.animate||w.hide(!1);w.render(c,a,a===d-1,function(a){if(a){var d=y().element,a=b.getPixelValue(d.style.top),d=a+b.getPixelValue(d.offsetHeight),e=b.getStepTarget(r()).getBoundingClientRect(),f=e.top+b.getScrollTop(),e=e.bottom+b.getScrollTop(),a=
a<f?a:f,d=d>e?d:e,f=b.getScrollTop(),e=f+b.getWindowHeight(),q=a-h.scrollTopMargin,i,H,w;a>=f&&(a<=f+h.scrollTopMargin||d<=e)?j&&j():h.smoothScroll?"undefined"!==typeof YAHOO&&"undefined"!==typeof YAHOO.env&&"undefined"!==typeof YAHOO.env.ua&&"undefined"!==typeof YAHOO.util&&"undefined"!==typeof YAHOO.util.Scroll?(a=YAHOO.env.ua.webkit?g.body:g.documentElement,d=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:void 0,a=new YAHOO.util.Scroll(a,{scroll:{to:[0,q]}},h.scrollDuration/1E3,d),a.onComplete.subscribe(j),
a.animate()):B?$("body, html").animate({scrollTop:q},h.scrollDuration,j):(0>q&&(q=0),i=f>a?-1:1,H=Math.abs(f-q)/(h.scrollDuration/10),w=function(){var a=b.getScrollTop(),c=a+i*H;0<i&&c>=q||0>i&&c<=q?(c=q,j&&j(),window.scrollTo(0,c)):(window.scrollTo(0,c),b.getScrollTop()===a?j&&j():setTimeout(w,10))},w()):(window.scrollTo(0,q),j&&j())}else j();c.nextOnTargetClick&&b.addClickListener(k,t)});c.multipage&&(e+=":mp");b.setState(h.cookieName,e,1)},c.delay||0);return this};this.prevStep=function(a){z.call(this,
a,-1);return this};this.nextStep=function(a){var c=r(),d=b.getStepTarget(c);c.nextOnTargetClick&&b.removeClickListener(d,t);z.call(this,a,1);return this};this.endTour=function(a,c){var d=y(),a=b.valOrDefault(a,!0),c=b.valOrDefault(c,!0);f=0;j=void 0;d.hide();a&&b.clearState(h.cookieName);m.isActive=!1;i&&c&&b.invokeEventCallbacks("end");m.removeCallbacks(!0);i=null;return this};this.getCurrTour=function(){return i};this.getCurrStepNum=function(){return f};this.listen=function(a,b,c){a&&s[a].push({cb:b,
fromTour:c});return this};this.unlisten=function(a,b){var c=s[a],d,e;d=0;for(e=c.length;d<e;++d)c[d]===b&&c.splice(d,1);return this};this.removeCallbacks=function(a){var b,c,d,e;for(e in s)if(a){b=s[e];c=0;for(d=b.length;c<d;++c)b[c].fromTour&&(b.splice(c--,1),--d)}else s[e]=[];return this};this.registerHelper=function(a,b){"string"===typeof a&&"function"===typeof b&&(x[a]=b)};this.unregisterHelper=function(a){x[a]=null};this.setCookieName=function(a){h.cookieName=a;return this};this.resetDefaultOptions=
function(){h||(h={});b.extend(h,u);return this};p=function(a,c){var d;d="next prev start end show error close".split(" ");var e,f,g;h||this.resetDefaultOptions();b.extend(h,a);a&&b.extend(n,a.i18n);f=0;for(g=d.length;f<g;++f)e="on"+d[f].charAt(0).toUpperCase()+d[f].substring(1),a[e]&&this.listen(d[f],a[e],c);d=y();h.animate?d._initAnimate():d._removeAnimate();d.showCloseButton(a.showCloseButton,"undefined"!==typeof a.showCloseButton);return this};this.configure=function(a){return p.call(this,a,!1)};
a&&(a.cookieName=a.cookieName||"hopscotch.tour.state",this.configure(a))},m=new p,z[D]=m)})(window,"hopscotch");
