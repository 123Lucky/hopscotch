(function(u,A){var j,v,B,m,C=window.Sizzle||null,b,n,w,l=u[A],D=!1,q={animate:!1,smoothScroll:!0,scrollDuration:1E3,scrollTopMargin:200,showCloseButton:!0,showPrevButton:!1,showNextButton:!0,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:!0},y="undefined"!==typeof window.jQuery,r="undefined"!==typeof window.sessionStorage;j=document.head.style;var E="undefined"!==typeof j.MozTransition||"undefined"!==typeof j.MsTransition||"undefined"!==typeof j.webkitTransition||"undefined"!==typeof j.OTransition||
"undefined"!==typeof j.transition;l||(j=function(){D&&l.startTour()},window.addEventListener?window.addEventListener("load",j,!1):window.attachEvent&&window.attachEvent("onload",j),b={addClass:function(a,c){var b,e,f;if(0===a.className.length)a.className=c;else{b=a.className.split(/\s+/);e=0;for(f=b.length;e<f;++e)if(b[e]===c)return;b.splice(0,0,c);a.className=b.join(" ")}},removeClass:function(a,c){var b,e,f,h,g,i,k;e=c.split(/\s+/);b=a.className.split(/\s+/);h=0;for(i=e.length;h<i;++h){f=e[h];g=
0;for(k=b.length;g<k&&b[g]!==f;++g);g<k&&b.splice(g,1)}a.className=b.join(" ")},getPixelValue:function(a){var b=typeof a;return"number"===b?a:"string"===b?parseInt(a,10):0},valOrDefault:function(a,b){return"undefined"!==typeof a?a:b},invokeCallbackArrayHelper:function(a){var c;b.isArray(a)&&(c=w[a[0]],"function"===typeof c&&c.apply(this,a.slice(1)))},invokeCallbackArray:function(a){var c,d;if(b.isArray(a))if("string"===typeof a[0])b.invokeCallbackArrayHelper(a);else{c=0;for(d=a.length;c<d;++c)b.invokeCallback(a[c])}},
invokeCallback:function(a){"function"===typeof a?a():b.invokeCallbackArray(a)},invokeEventCallbacks:function(a){var a=n[a],b,d;b=0;for(d=a.length;b<d;++b)this.invokeCallback(a[b].cb)},getScrollTop:function(){return"undefined"!==typeof window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop},getScrollLeft:function(){return"undefined"!==typeof window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft},getWindowHeight:function(){return window.innerHeight||document.documentElement.clientHeight},
getWindowWidth:function(){return window.innerWidth||document.documentElement.clientWidth},addClickListener:function(a,b){return a.addEventListener?a.addEventListener("click",b,!1):a.attachEvent("onclick",b)},removeClickListener:function(a,b){return a.removeEventListener?a.removeEventListener("click",b,!1):a.detachEvent("click",b)},evtPreventDefault:function(a){a.preventDefault?a.preventDefault():event&&(event.returnValue=!1)},extend:function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])},getStepTarget:function(a){return!a||
!a.target?null:"string"===typeof a.target?/^[#\.]/.test(a.target)?document.querySelector?document.querySelector(a.target):y?(a=jQuery(a.target),a.length?a[0]:null):C?(a=new C(a.target),a.length?a[0]:null):"#"===a.target[0]&&-1===a.target.indexOf(" ")?document.getElementById(a.target.substring(1)):null:document.getElementById(a.target):a.target},isArray:Array.isArray||function(a){return"number"===typeof a.length&&"function"===typeof a.unshift&&"function"===typeof a.push},setState:function(a,b,d){var e=
"";r?sessionStorage.setItem(a,b):(d&&(e=new Date,e.setTime(e.getTime()+864E5*d),e="; expires="+e.toGMTString()),document.cookie=a+"="+b+e+"; path=/")},getState:function(a){var b=a+"=",d=document.cookie.split(";"),e,f;if(r)f=sessionStorage.getItem(a);else for(a=0;a<d.length;a++){for(e=d[a];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b)){f=e.substring(b.length,e.length);break}}return f},clearState:function(a){r?sessionStorage.removeItem(a):this.setState(a,"",-1)}},n={next:[],prev:[],
start:[],end:[],show:[],error:[],close:[]},w={},m={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"},v=function(a){this.init(a)},v.prototype={isShowing:!1,currStep:void 0,_createButton:function(a,c){var d=document.createElement("button");d.id=a;d.innerHTML=c;b.addClass(d,"hopscotch-nav-button");0<=a.indexOf("prev")?b.addClass(d,"prev"):b.addClass(d,"next");return d},setPosition:function(a){var c,d,e,f,h;e=b.getStepTarget(a);var g=this.element,i=this.arrowEl,
k=b.getPixelValue(a.arrowOffset);c=b.getPixelValue(a.width)||this.opt.bubbleWidth;d=b.valOrDefault(a.padding,this.opt.bubblePadding);b.removeClass(g,"fade-in-down fade-in-up fade-in-left fade-in-right");e=e.getBoundingClientRect();"top"===a.orientation?(c=g.offsetHeight,f=e.top-c-this.opt.arrowWidth,h=e.left):"bottom"===a.orientation?(f=e.bottom+this.opt.arrowWidth,h=e.left):"left"===a.orientation?(f=e.top,h=e.left-c-2*d-12-this.opt.arrowWidth):"right"===a.orientation&&(f=e.top,h=e.right+this.opt.arrowWidth);
if(k)if("top"===a.orientation||"bottom"===a.orientation)i.style.top="",i.style.left=k+"px";else{if("left"===a.orientation||"right"===a.orientation)i.style.left="",i.style.top=k+"px"}else i.style.top="",i.style.left="";h+=b.getPixelValue(a.xOffset);f+=b.getPixelValue(a.yOffset);a.fixedElement||(f+=b.getScrollTop(),h+=b.getScrollLeft());g.style.position=a.fixedElement?"fixed":"absolute";this.opt.animate&&y&&!E?$(g).animate({top:f+"px",left:h+"px"}):(g.style.top=f+"px",g.style.left=h+"px")},_initNavButtons:function(){var a=
document.createElement("div");this.prevBtnEl=this._createButton("hopscotch-prev",m.prevBtn);this.nextBtnEl=this._createButton("hopscotch-next",m.nextBtn);this.doneBtnEl=this._createButton("hopscotch-done",m.doneBtn);b.addClass(this.doneBtnEl,"hide");a.appendChild(this.prevBtnEl);a.appendChild(this.nextBtnEl);a.appendChild(this.doneBtnEl);b.addClickListener(this.prevBtnEl,function(){l.prevStep(!0)});b.addClickListener(this.nextBtnEl,function(){l.nextStep(!0)});b.addClickListener(this.doneBtnEl,l.endTour);
a.className="hopscotch-actions";this.buttonsEl=a;this.containerEl.appendChild(a);return this},_getCloseFn:function(){var a=this;this.closeFn||(this.closeFn=function(c){a.opt.onClose&&b.invokeCallback(a.opt.onClose);a.opt.id&&!a.opt.isTourBubble?l.getCalloutManager().removeCallout(a.opt.id):a.destroy();b.evtPreventDefault(c)});return this.closeFn},initCloseButton:function(){var a=document.createElement("a");a.className="hopscotch-bubble-close";a.href="#";a.title=m.closeTooltip;a.innerHTML=m.closeTooltip;
this.opt.isTourBubble?b.addClickListener(a,function(a){var d=l.getCurrStepNum(),e=l.getCurrTour(),d=d===e.steps.length-1;b.invokeEventCallbacks("close");l.endTour(!0,d);a.preventDefault?a.preventDefault():event&&(event.returnValue=!1)}):b.addClickListener(a,this._getCloseFn());this.closeBtnEl=a;this.containerEl.appendChild(a);return this},_initArrow:function(){var a,b;this.arrowEl=document.createElement("div");this.arrowEl.className="hopscotch-bubble-arrow-container";b=document.createElement("div");
b.className="hopscotch-bubble-arrow-border";a=document.createElement("div");a.className="hopscotch-bubble-arrow";this.arrowEl.appendChild(b);this.arrowEl.appendChild(a);this.element.appendChild(this.arrowEl);return this},render:function(a,c,d,e){var f=this.element,h,g;a?this.currStep=a:this.currStep&&(a=this.currStep);h=b.valOrDefault(a.showNextButton,this.opt.showNextButton);g=b.valOrDefault(a.showPrevButton,this.opt.showPrevButton);this.setTitle(a.title||"");this.setContent(a.content||"");this.opt.showNumber&&
this.setNum(c);this.orientation=a.orientation;this.opt.showNavButtons&&(this.showPrevButton(this.prevBtnEl&&g&&0<c),this.showNextButton(this.nextBtnEl&&h&&!d),this.nextBtnEl.value=a.showSkip?m.skipBtn:m.nextBtn,d?b.removeClass(this.doneBtnEl,"hide"):b.addClass(this.doneBtnEl,"hide"));this._setArrow(a.orientation);c=b.getPixelValue(a.width)||this.opt.bubbleWidth;d=b.valOrDefault(a.padding,this.opt.bubblePadding);this.containerEl.style.width=c+"px";this.containerEl.style.padding=d+"px";f.style.zIndex=
a.zindex||"";"top"===a.orientation?(f.style.top="-9999px",f.style.left="-9999px",b.removeClass(f,"hide"),this.setPosition(a),b.addClass(f,"hide")):this.setPosition(a);e&&e(!a.fixedElement);return this},setTitle:function(a){a?(this.titleEl.innerHTML=a,b.removeClass(this.titleEl,"hide")):b.addClass(this.titleEl,"hide");return this},setContent:function(a){a?(this.contentEl.innerHTML=a,b.removeClass(this.contentEl,"hide")):b.addClass(this.contentEl,"hide");return this},setNum:function(a){a=m.stepNums&&
a<m.stepNums.length?m.stepNums[a]:a+1;this.numberEl.innerHTML=a},_setArrow:function(a){b.removeClass(this.arrowEl,"down up right left");"top"===a?b.addClass(this.arrowEl,"down"):"bottom"===a?b.addClass(this.arrowEl,"up"):"left"===a?b.addClass(this.arrowEl,"right"):"right"===a&&b.addClass(this.arrowEl,"left")},_getArrowDirection:function(){if("top"===this.orientation)return"down";if("bottom"===this.orientation)return"up";if("left"===this.orientation)return"right";if("right"===this.orientation)return"left"},
show:function(){var a=this,c="fade-in-"+this._getArrowDirection();b.removeClass(this.element,"hide");this.opt.animate?setTimeout(function(){b.addClass(a.element,"animate")},50):(b.addClass(this.element,c),setTimeout(function(){b.removeClass(a.element,"invisible")},50),setTimeout(function(){b.removeClass(a.element,c)},1E3));this.isShowing=!0;return this},hide:function(a){var c=this.element,a=b.valOrDefault(a,!0);c.style.top="";c.style.left="";a?(b.addClass(c,"hide"),b.removeClass(c,"invisible")):(b.removeClass(c,
"hide"),this.opt.animate||b.addClass(c,"invisible"));b.removeClass(c,"animate fade-in-up fade-in-down fade-in-right fade-in-left");this.isShowing=!1;return this},_showButton:function(a,c,d){var e="hide";d&&(e="hide-all");"undefined"===typeof c&&(c=!0);c?b.removeClass(a,e):b.addClass(a,e)},showPrevButton:function(a,b){this._showButton(this.prevBtnEl,a,b)},showNextButton:function(a,b){this._showButton(this.nextBtnEl,a,b)},showCloseButton:function(a,b){this._showButton(this.closeBtnEl,a,b)},_initAnimate:function(){var a=
this;setTimeout(function(){b.addClass(a.element,"animate")},50)},_removeAnimate:function(){b.removeClass(this.element,"animate")},destroy:function(){var a=this.element;a&&a.parentNode.removeChild(a);this.closeBtnEl&&b.removeClickListener(this.closeBtnEl,this._getCloseFn())},init:function(a){var c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("div"),f=this,h=!1,g,i;this.element=c;this.containerEl=d;this.titleEl=document.createElement("h3");this.contentEl=document.createElement("p");
i={animate:q.animate,showPrevButton:q.showPrevButton,showNextButton:q.showNextButton,bubbleWidth:q.bubbleWidth,bubblePadding:q.bubblePadding,arrowWidth:q.arrowWidth,showNumber:!0,showNavButtons:!0,isTourBubble:!0};a="undefined"===typeof a?{}:a;b.extend(i,a);this.opt=i;c.className="hopscotch-bubble animated";d.className="hopscotch-bubble-container";i.showNumber?(this.numberEl=document.createElement("span"),this.numberEl.className="hopscotch-bubble-number",d.appendChild(this.numberEl)):b.addClass(c,
"no-number");e.appendChild(this.titleEl);e.appendChild(this.contentEl);e.className="hopscotch-bubble-content";d.appendChild(e);c.appendChild(d);i.showNavButtons&&this._initNavButtons();this.initCloseButton();this._initArrow();a=function(){!h&&f.isShowing&&(h=!0,setTimeout(function(){f.setPosition(f.currStep);h=!1},100))};window.addEventListener?window.addEventListener("resize",a,!1):window.attachEvent&&window.attachEvent("onresize",a,!1);this.hide();"complete"===document.readyState?document.body.appendChild(c):
document.addEventListener?(g=function(){document.removeEventListener("DOMContentLoaded",g);document.body.appendChild(c)},document.addEventListener("DOMContentLoaded",g)):(g=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",g),document.body.appendChild(c))},document.attachEvent("onreadystatechange",g))}},B=function(){var a={};this.createCallout=function(b){var d;if(b.id){if(a[b.id])throw"Callout by that id already exists. Please choose a unique id.";b.isTourBubble=
!1;d=new v(b);a[b.id]=d;b.target&&d.render(b,null,null,function(){d.show()})}else throw"Must specify a callout id.";return d};this.getCallout=function(b){return a[b]};this.removeAllCallouts=function(){for(var b in a)a.hasOwnProperty(b)&&this.removeCallout(b)};this.removeCallout=function(b){var d=a[b];a[b]=null;d&&d.destroy()}},j=function(a){var c=this,d,e,f,h,g,i,k,j,s=function(){d||(d=new v({animate:f.animate,bubblePadding:f.bubblePadding,bubbleWidth:f.bubbleWidth,showNextButton:f.showNextButton,
showPrevButton:f.showPrevButton,arrowWidth:f.arrowWidth}));return d},p=function(){return 0>g||g>=h.steps.length?null:h.steps[g]},r=function(){c.nextStep(!1)},z=function(a,f){var t,d;0<=g+a&&g+a<h.steps.length?(g+=a,d=p(),setTimeout(function(){(t=b.getStepTarget(d))?f(g):(b.invokeEventCallbacks("error"),z(a,f))},b.valOrDefault(d.delay,0))):f(-1)},u=function(a,d){var t=this,e,c,i,k;s().hide();a=b.valOrDefault(a,!0);c=e=p();i=e.multipage;k=function(f){if(-1===f)return this.endTour(!0);if(a&&(0<d&&c.onNext?
b.invokeCallback(c.onNext):0>d&&c.onPrev&&b.invokeCallback(c.onPrev),b.invokeEventCallbacks(0<d?"next":"prev"),0<d&&i))return;this.showStep(f)};if(!i&&f.skipIfNoElement)z(d,function(a){k.call(t,a)});else if(0<=g+d&&g+d<h.steps.length){g+=d;e=p();if(!b.getStepTarget(e)&&!i)return b.invokeEventCallbacks("error"),this.endTour(!0,!1);k.call(this,g)}return this};this.getCalloutManager=function(){"undefined"===typeof e&&(e=new B);return e};this.startTour=function(a,d){var c;if(!h){c={};var e;h=a;for(e in a)a.hasOwnProperty(e)&&
("id"!==e&&"steps"!==e)&&(c[e]=a[e]);this.resetDefaultOptions();j.call(this,c,!0);if(c=b.getState(f.cookieName))c=c.split(":"),i=c[0],k=c[1],k=parseInt(k,10),2<c.length&&"mp"===c[2]&&k<h.steps.length-1&&++k}"undefined"!==typeof d&&(g=d);if("complete"!==document.readyState)return D=!0,this;if("undefined"===typeof g)if(h.id===i&&"undefined"!==typeof k){if(g=k,c=p(),c=b.getStepTarget(c),c||(--g,c=p(),c=b.getStepTarget(c)),!c&&f.skipIfNoElement&&(z(1),c=-1!==g&&b.getStepTarget(h.steps[g])),!c)return this.endTour(!1,
!1),this}else g=0;b.invokeEventCallbacks("start");c=s();c.hide(!1);this.isActive=!0;f.animate&&c._initAnimate();b.getStepTarget(p())?this.showStep(g):(b.invokeEventCallbacks("error"),f.skipIfNoElement&&this.nextStep(!1));return this};this.showStep=function(a){var c=h.steps[a];setTimeout(function(){var d=h.steps.length,e=h.id+":"+a,i=s(),k=b.getStepTarget(c),j;j=function(){i.show();b.invokeEventCallbacks("show");c.onShow&&b.invokeCallback(c.onShow)};g=a;f.animate||i.hide(!1);i.render(c,a,a===d-1,function(a){if(a){var d=
s().element,a=b.getPixelValue(d.style.top),d=a+b.getPixelValue(d.offsetHeight),e=b.getStepTarget(p()).getBoundingClientRect(),g=e.top+b.getScrollTop(),e=e.bottom+b.getScrollTop(),a=a<g?a:g,d=d>e?d:e,g=b.getScrollTop(),e=g+b.getWindowHeight(),h=a-f.scrollTopMargin,x,t,i;a>=g&&(a<=g+f.scrollTopMargin||d<=e)?j&&j():f.smoothScroll?"undefined"!==typeof YAHOO&&"undefined"!==typeof YAHOO.env&&"undefined"!==typeof YAHOO.env.ua&&"undefined"!==typeof YAHOO.util&&"undefined"!==typeof YAHOO.util.Scroll?(a=YAHOO.env.ua.webkit?
document.body:document.documentElement,d=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:void 0,a=new YAHOO.util.Scroll(a,{scroll:{to:[0,h]}},f.scrollDuration/1E3,d),a.onComplete.subscribe(j),a.animate()):y?$("body, html").animate({scrollTop:h},f.scrollDuration,j):(0>h&&(h=0),x=g>a?-1:1,t=Math.abs(g-h)/(f.scrollDuration/10),i=function(){var a=b.getScrollTop(),c=a+x*t;0<x&&c>=h||0>x&&c<=h?(c=h,j&&j(),window.scrollTo(0,c)):(window.scrollTo(0,c),b.getScrollTop()===a?j&&j():setTimeout(i,10))},i()):(window.scrollTo(0,
h),j&&j())}else j();c.nextOnTargetClick&&b.addClickListener(k,r)});c.multipage&&(e+=":mp");b.setState(f.cookieName,e,1)},c.delay||0);return this};this.prevStep=function(a){u.call(this,a,-1);return this};this.nextStep=function(a){var c=p(),d=b.getStepTarget(c);c.nextOnTargetClick&&b.removeClickListener(d,r);u.call(this,a,1);return this};this.endTour=function(a,c){var d=s(),a=b.valOrDefault(a,!0),c=b.valOrDefault(c,!0);g=0;k=void 0;d.hide();a&&b.clearState(f.cookieName);l.isActive=!1;h&&c&&b.invokeEventCallbacks("end");
l.removeCallbacks(!0);h=null;return this};this.getCurrTour=function(){return h};this.getCurrStepNum=function(){return g};this.listen=function(a,b,c){a&&n[a].push({cb:b,fromTour:c});return this};this.unlisten=function(a,b){var c=n[a],d,e;d=0;for(e=c.length;d<e;++d)c[d]===b&&c.splice(d,1)};this.removeCallback=function(a,b){var c=n[a],d,e;d=0;for(e=c.length;d<e;++d)b===c[d].cb&&c.splice(d,1);return this};this.removeCallbacks=function(a){var b,c,d,e;for(e in n)if(a){b=n[e];c=0;for(d=b.length;c<d;++c)b[c].fromTour&&
(b.splice(c--,1),--d)}else n[e]=[];return this};this.registerHelper=function(a,b){"string"===typeof a&&"function"===typeof b&&(w[a]=b)};this.unregisterHelper=function(a){w[a]=null};this.setCookieName=function(a){f.cookieName=a;return this};this.resetDefaultOptions=function(){f||(f={});b.extend(f,q);return this};j=function(a,c){var d;d="next prev start end show error close".split(" ");var e,g,h;f||this.resetDefaultOptions();b.extend(f,a);a&&b.extend(m,a.i18n);g=0;for(h=d.length;g<h;++g)e="on"+d[g][0].toUpperCase()+
d[g].substring(1),a[e]&&this.listen(d[g],a[e],c);d=s();f.animate?d._initAnimate():d._removeAnimate();d.showCloseButton(a.showCloseButton,"undefined"!==typeof a.showCloseButton);return this};this.configure=function(a){return j.call(this,a,!1)};a&&(a.cookieName=a.cookieName||"hopscotch.tour.state",this.configure(a))},l=new j,u[A]=l)})(window,"hopscotch");
