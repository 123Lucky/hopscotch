(function(u,v){var B,w,C,k,D=window.Sizzle||null,b,p,q,i=u[v],E=!1,r={smoothScroll:!0,scrollDuration:1E3,scrollTopMargin:200,showCloseButton:!0,showPrevButton:!1,showNextButton:!0,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:!0},F="undefined"!==typeof window.jQuery,s="undefined"!==typeof window.sessionStorage,f=window.document;i||(Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),b={addClass:function(a,e){var b,c,g,j;if(a.className){c=
e.split(/\s+/);b=" "+a.className+" ";g=0;for(j=c.length;g<j;++g)0>b.indexOf(" "+c[g]+" ")&&(b+=c[g]+" ");a.className=b.replace(/^\s+|\s+$/g,"")}else a.className=e},removeClass:function(a,e){var b,c,g,j;c=e.split(/\s+/);b=" "+a.className+" ";g=0;for(j=c.length;g<j;++g)b=b.replace(" "+c[g]+" "," ");a.className=b.replace(/^\s+|\s+$/g,"")},getPixelValue:function(a){var b=typeof a;return"number"===b?a:"string"===b?parseInt(a,10):0},valOrDefault:function(a,b){return"undefined"!==typeof a?a:b},invokeCallbackArrayHelper:function(a){var b;
Array.isArray(a)&&(b=q[a[0]],"function"===typeof b&&b.apply(this,a.slice(1)))},invokeCallbackArray:function(a){var e,d;if(Array.isArray(a))if("string"===typeof a[0])b.invokeCallbackArrayHelper(a);else{e=0;for(d=a.length;e<d;++e)b.invokeCallback(a[e])}},invokeCallback:function(a){"function"===typeof a&&a();if("string"===typeof a&&q[a])q[a]();else b.invokeCallbackArray(a)},invokeEventCallbacks:function(a,b){var d=p[a],c,g;b&&this.invokeCallback(b);c=0;for(g=d.length;c<g;++c)this.invokeCallback(d[c].cb)},
getScrollTop:function(){return"undefined"!==typeof window.pageYOffset?window.pageYOffset:f.documentElement.scrollTop},getScrollLeft:function(){return"undefined"!==typeof window.pageXOffset?window.pageXOffset:f.documentElement.scrollLeft},getWindowHeight:function(){return window.innerHeight||f.documentElement.clientHeight},getWindowWidth:function(){return window.innerWidth||f.documentElement.clientWidth},addEvtListener:function(a,b,d){return a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent("on"+
b,d)},removeEvtListener:function(a,b,d){return a.removeEventListener?a.removeEventListener(b,d,!1):a.detachEvent("on"+b,d)},documentIsReady:function(){return"complete"===f.readyState||"interactive"===f.readyState},evtPreventDefault:function(a){a.preventDefault?a.preventDefault():event&&(event.returnValue=!1)},extend:function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])},getStepTargetHelper:function(a){return/^[#\.]/.test(a)?f.querySelector?f.querySelector(a):F?(a=jQuery(a),a.length?a[0]:null):
D?(a=new D(a),a.length?a[0]:null):/^#[a-zA-Z][\w-_:.]*$/.test(a)?f.getElementById(a.substring(1)):null:f.getElementById(a)},getStepTarget:function(a){var e;if(!a||!a.target)return null;if("string"===typeof a.target)return a.target=b.getStepTargetHelper(a.target);if(Array.isArray(a.target)){var d,c;d=0;for(c=a.target.length;d<c;d++)if("string"===typeof a.target[d]&&(e=b.getStepTargetHelper(a.target[d])))return a.target=e;return null}return a.target},setState:function(a,b,d){var c="";s?sessionStorage.setItem(a,
b):(d&&(c=new Date,c.setTime(c.getTime()+864E5*d),c="; expires="+c.toGMTString()),f.cookie=a+"="+b+c+"; path=/")},getState:function(a){var b=a+"=",d=f.cookie.split(";"),c,g;if(s)g=sessionStorage.getItem(a);else for(a=0;a<d.length;a++){for(c=d[a];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(b)){g=c.substring(b.length,c.length);break}}return g},clearState:function(a){s?sessionStorage.removeItem(a):this.setState(a,"",-1)}},b.addEvtListener(window,"load",function(){E&&i.startTour()}),
p={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]},q={},k={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"},w=function(a){this.init(a)},w.prototype={isShowing:!1,currStep:void 0,_createButton:function(a,e){var d=f.createElement("button"),c="hopscotch-nav-button";d.id=a;e&&(d.innerHTML=e);c=0<=a.indexOf("prev")?c+" prev":c+" next";b.addClass(d,c);return d},setPosition:function(a){var e,d,c,g,j;c=b.getStepTarget(a);var h=this.element,f=this.arrowEl,
i=b.getPixelValue(a.arrowOffset);e=b.getPixelValue(a.width)||this.opt.bubbleWidth;d=b.valOrDefault(a.padding,this.opt.bubblePadding);b.removeClass(h,"fade-in-down fade-in-up fade-in-left fade-in-right");c=c.getBoundingClientRect();"top"===a.orientation?(e=h.offsetHeight,g=c.top-e-this.opt.arrowWidth,j=c.left):"bottom"===a.orientation?(g=c.bottom+this.opt.arrowWidth,j=c.left):"left"===a.orientation?(g=c.top,j=c.left-e-2*d-12-this.opt.arrowWidth):"right"===a.orientation&&(g=c.top,j=c.right+this.opt.arrowWidth);
if(i)if("top"===a.orientation||"bottom"===a.orientation)f.style.top="",f.style.left=i+"px";else{if("left"===a.orientation||"right"===a.orientation)f.style.left="",f.style.top=i+"px"}else f.style.top="",f.style.left="";j+=b.getPixelValue(a.xOffset);g+=b.getPixelValue(a.yOffset);a.fixedElement||(g+=b.getScrollTop(),j+=b.getScrollLeft());h.style.position=a.fixedElement?"fixed":"absolute";h.style.top=g+"px";h.style.left=j+"px"},_initNavButtons:function(){var a=f.createElement("div");this.prevBtnEl=this._createButton("hopscotch-prev",
k.prevBtn);this.nextBtnEl=this._createButton("hopscotch-next",k.nextBtn);this.doneBtnEl=this._createButton("hopscotch-done",k.doneBtn);this.ctaBtnEl=this._createButton("hopscotch-cta");b.addClass(this.doneBtnEl,"hide");a.appendChild(this.prevBtnEl);a.appendChild(this.nextBtnEl);a.appendChild(this.doneBtnEl);a.appendChild(this.ctaBtnEl);b.addEvtListener(this.prevBtnEl,"click",function(){i.prevStep(!0)});b.addEvtListener(this.nextBtnEl,"click",function(){i.nextStep(!0)});b.addEvtListener(this.doneBtnEl,
"click",i.endTour);a.className="hopscotch-actions";this.buttonsEl=a;this.containerEl.appendChild(a);return this},_getCloseFn:function(){var a=this;this.closeFn||(this.closeFn=function(e){a.opt.onClose&&b.invokeCallback(a.opt.onClose);a.opt.id&&!a.opt.isTourBubble?i.getCalloutManager().removeCallout(a.opt.id):a.destroy();b.evtPreventDefault(e)});return this.closeFn},initCloseButton:function(){var a=f.createElement("a");a.className="hopscotch-bubble-close";a.href="#";a.title=k.closeTooltip;a.innerHTML=
k.closeTooltip;this.opt.isTourBubble?b.addEvtListener(a,"click",function(a){var d=i.getCurrStepNum(),c=i.getCurrTour(),d=d===c.steps.length-1;b.invokeEventCallbacks("close");i.endTour(!0,d);a.preventDefault?a.preventDefault():event&&(event.returnValue=!1)}):b.addEvtListener(a,"click",this._getCloseFn());this.closeBtnEl=a;this.containerEl.appendChild(a);return this},_initArrow:function(){var a,b;this.arrowEl=f.createElement("div");this.arrowEl.className="hopscotch-bubble-arrow-container";b=f.createElement("div");
b.className="hopscotch-bubble-arrow-border";a=f.createElement("div");a.className="hopscotch-bubble-arrow";this.arrowEl.appendChild(b);this.arrowEl.appendChild(a);this.element.appendChild(this.arrowEl);return this},render:function(a,e,d,c){var g=this.element,f,h;a?this.currStep=a:this.currStep&&(a=this.currStep);f=b.valOrDefault(a.showNextButton,this.opt.showNextButton);h=b.valOrDefault(a.showPrevButton,this.opt.showPrevButton);this.setTitle(a.title||"");this.setContent(a.content||"");this.opt.showNumber&&
this.setNum(e);this.orientation=a.orientation;this.showPrevButton(this.prevBtnEl&&h&&0<e);this.showNextButton(this.nextBtnEl&&f&&!d);this.nextBtnEl.value=a.showSkip?k.skipBtn:k.nextBtn;d?b.removeClass(this.doneBtnEl,"hide"):b.addClass(this.doneBtnEl,"hide");this._showButton(this.ctaBtnEl,!!a.showCTAButton);a.showCTAButton?(this.ctaBtnEl.innerHTML=a.ctaLabel,a.onCTA&&(this.onCTA&&b.removeEvtListener(this.ctaBtnEl,"click",this.onCTA),b.addEvtListener(this.ctaBtnEl,"click",a.onCTA),this.onCTA=a.onCTA)):
this.onCTA&&(b.removeEvtListener(this.ctaBtnEl,"click",this.onCTA),this.onCTA=null);this._setArrow(a.orientation);e=b.getPixelValue(a.width)||this.opt.bubbleWidth;d=b.valOrDefault(a.padding,this.opt.bubblePadding);this.containerEl.style.width=e+"px";this.containerEl.style.padding=d+"px";g.style.zIndex=a.zindex||"";"top"===a.orientation?(g.style.top="-9999px",g.style.left="-9999px",b.removeClass(g,"hide"),this.setPosition(a),b.addClass(g,"hide")):this.setPosition(a);c&&c(!a.fixedElement);return this},
setTitle:function(a){a?(this.titleEl.innerHTML=a,b.removeClass(this.titleEl,"hide")):b.addClass(this.titleEl,"hide");return this},setContent:function(a){a?(this.contentEl.innerHTML=a,b.removeClass(this.contentEl,"hide")):b.addClass(this.contentEl,"hide");return this},setNum:function(a){a=k.stepNums&&a<k.stepNums.length?k.stepNums[a]:a+1;this.numberEl.innerHTML=a},_setArrow:function(a){b.removeClass(this.arrowEl,"down up right left");"top"===a?b.addClass(this.arrowEl,"down"):"bottom"===a?b.addClass(this.arrowEl,
"up"):"left"===a?b.addClass(this.arrowEl,"right"):"right"===a&&b.addClass(this.arrowEl,"left")},_getArrowDirection:function(){if("top"===this.orientation)return"down";if("bottom"===this.orientation)return"up";if("left"===this.orientation)return"right";if("right"===this.orientation)return"left"},show:function(){var a=this,e="fade-in-"+this._getArrowDirection();b.removeClass(this.element,"hide");b.addClass(this.element,e);setTimeout(function(){b.removeClass(a.element,"invisible")},50);setTimeout(function(){b.removeClass(a.element,
e)},1E3);this.isShowing=!0;return this},hide:function(a){var e=this.element,a=b.valOrDefault(a,!0);e.style.top="";e.style.left="";a?(b.addClass(e,"hide"),b.removeClass(e,"invisible")):(b.removeClass(e,"hide"),b.addClass(e,"invisible"));b.removeClass(e,"animate fade-in-up fade-in-down fade-in-right fade-in-left");this.isShowing=!1;return this},_showButton:function(a,e,d){var c="hide";d&&(c="hide-all");"undefined"===typeof e&&(e=!0);e?b.removeClass(a,c):b.addClass(a,c)},showPrevButton:function(a,b){this._showButton(this.prevBtnEl,
a,b)},showNextButton:function(a,b){this._showButton(this.nextBtnEl,a,b)},showCloseButton:function(a,b){this._showButton(this.closeBtnEl,a,b)},destroy:function(){var a=this.element;a&&a.parentNode.removeChild(a);this.closeBtnEl&&b.removeEvtListener(this.closeBtnEl,"click",this._getCloseFn());this.ctaBtnEl&&this.onCTA&&b.removeEvtListener(this.ctaBtnEl,"click",this.onCTA)},init:function(a){var e=f.createElement("div"),d=f.createElement("div"),c=f.createElement("div"),g=this,j=!1,h,i;this.element=e;
this.containerEl=d;this.titleEl=f.createElement("h3");this.contentEl=f.createElement("p");i={showPrevButton:r.showPrevButton,showNextButton:r.showNextButton,bubbleWidth:r.bubbleWidth,bubblePadding:r.bubblePadding,arrowWidth:r.arrowWidth,showNumber:!0,isTourBubble:!0};a="undefined"===typeof a?{}:a;b.extend(i,a);this.opt=i;e.className="hopscotch-bubble animated";d.className="hopscotch-bubble-container";i.showNumber?(this.numberEl=f.createElement("span"),this.numberEl.className="hopscotch-bubble-number",
d.appendChild(this.numberEl)):b.addClass(e,"no-number");c.appendChild(this.titleEl);c.appendChild(this.contentEl);c.className="hopscotch-bubble-content";d.appendChild(c);e.appendChild(d);this._initNavButtons();this.initCloseButton();this._initArrow();b.addEvtListener(window,"resize",function(){!j&&g.isShowing&&(j=!0,setTimeout(function(){g.setPosition(g.currStep);j=!1},100))});this.hide();b.documentIsReady()?f.body.appendChild(e):(f.addEventListener?(h=function(){f.removeEventListener("DOMContentLoaded",
h);window.removeEventListener("load",h);f.body.appendChild(e)},f.addEventListener("DOMContentLoaded",h,!1)):(h=function(){"complete"===f.readyState&&(f.detachEvent("onreadystatechange",h),window.detachEvent("onload",h),f.body.appendChild(e))},f.attachEvent("onreadystatechange",h)),b.addEvtListener(window,"load",h))}},C=function(){var a={};this.createCallout=function(b){var d;if(b.id){if(a[b.id])throw"Callout by that id already exists. Please choose a unique id.";b.showNextButton=b.showPrevButton=
!1;b.isTourBubble=!1;d=new w(b);a[b.id]=d;b.target&&d.render(b,null,null,function(){d.show()})}else throw"Must specify a callout id.";return d};this.getCallout=function(b){return a[b]};this.removeAllCallouts=function(){for(var b in a)a.hasOwnProperty(b)&&this.removeCallout(b)};this.removeCallout=function(b){var d=a[b];a[b]=null;d&&d.destroy()}},B=function(a){var e=this,d,c,g,j,h,s,m,y,t=function(){d||(d=new w({bubblePadding:g.bubblePadding,bubbleWidth:g.bubbleWidth,showNextButton:g.showNextButton,
showPrevButton:g.showPrevButton,arrowWidth:g.arrowWidth}));return d},n=function(){return 0>h||h>=j.steps.length?null:j.steps[h]},u=function(){e.nextStep(!1)},A=function(a,c){var d,g;0<=h+a&&h+a<j.steps.length?(h+=a,g=n(),setTimeout(function(){(d=b.getStepTarget(g))?c(h):(b.invokeEventCallbacks("error"),A(a,c))},b.valOrDefault(g.delay,0))):c(-1)},v=function(a,c){var d=this,e,f,x,i;t().hide();a=b.valOrDefault(a,!0);f=e=n();x=0<c?f.multipage:0<h&&j.steps[h-1].multipage;i=function(d){if(-1===d)return this.endTour(!0);
if(a&&(0<c?b.invokeEventCallbacks("next",f.onNext):b.invokeEventCallbacks("prev",f.onPrev),x))return;this.showStep(d)};if(!x&&g.skipIfNoElement)A(c,function(a){i.call(d,a)});else if(0<=h+c&&h+c<j.steps.length){h+=c;e=n();if(!b.getStepTarget(e)&&!x)return b.invokeEventCallbacks("error"),this.endTour(!0,!1);i.call(this,h)}return this};this.getCalloutManager=function(){"undefined"===typeof c&&(c=new C);return c};this.startTour=function(a,c){var d,e=this;if(!j){j=a;var f={},i;for(i in a)a.hasOwnProperty(i)&&
("id"!==i&&"steps"!==i)&&(f[i]=a[i]);this.resetDefaultOptions();y.call(this,f,!0);if(f=b.getState(g.cookieName))f=f.split(":"),s=f[0],m=f[1],m=parseInt(m,10),2<f.length&&"mp"===f[2]&&m<j.steps.length-1&&++m}if(!b.documentIsReady())return E=!0,this;h="undefined"!==typeof c?c:j.id===s&&"undefined"!==typeof m?m:0;a:if(f=function(a){-1!==a&&b.getStepTarget(j.steps[a])?(b.invokeEventCallbacks("start"),d=t(),d.hide(!1),e.isActive=!0,b.getStepTarget(n())?e.showStep(a):(b.invokeEventCallbacks("error"),g.skipIfNoElement&&
e.nextStep(!1))):e.endTour(!1,!1)},h=h||0,i=n(),i=b.getStepTarget(i))f(h);else{if(0<h&&(--h,i=n(),i=b.getStepTarget(i))){f(h);break a}i||(b.invokeEventCallbacks("error"),g.skipIfNoElement?(++h,A(1,f)):(h=-1,f(h)))}return this};this.showStep=function(a){var c=j.steps[a];setTimeout(function(){var d=j.steps.length,e=j.id+":"+a,i=t(),k=b.getStepTarget(c),l;l=function(){i.show();b.invokeEventCallbacks("show",c.onShow)};h=a;i.hide(!1);i.render(c,a,a===d-1,function(a){if(a){var d=t().element,a=b.getPixelValue(d.style.top),
d=a+b.getPixelValue(d.offsetHeight),e=b.getStepTarget(n()).getBoundingClientRect(),h=e.top+b.getScrollTop(),e=e.bottom+b.getScrollTop(),a=a<h?a:h,d=d>e?d:e,h=b.getScrollTop(),e=h+b.getWindowHeight(),i=a-g.scrollTopMargin,j,G,z;a>=h&&(a<=h+g.scrollTopMargin||d<=e)?l&&l():g.smoothScroll?"undefined"!==typeof YAHOO&&"undefined"!==typeof YAHOO.env&&"undefined"!==typeof YAHOO.env.ua&&"undefined"!==typeof YAHOO.util&&"undefined"!==typeof YAHOO.util.Scroll?(a=YAHOO.env.ua.webkit?f.body:f.documentElement,
d=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:void 0,a=new YAHOO.util.Scroll(a,{scroll:{to:[0,i]}},g.scrollDuration/1E3,d),a.onComplete.subscribe(l),a.animate()):F?$("body, html").animate({scrollTop:i},g.scrollDuration,l):(0>i&&(i=0),j=h>a?-1:1,G=Math.abs(h-i)/(g.scrollDuration/10),z=function(){var a=b.getScrollTop(),c=a+j*G;0<j&&c>=i||0>j&&c<=i?(c=i,l&&l(),window.scrollTo(0,c)):(window.scrollTo(0,c),b.getScrollTop()===a?l&&l():setTimeout(z,10))},z()):(window.scrollTo(0,i),l&&l())}else l();c.nextOnTargetClick&&
b.addEvtListener(k,"click",u)});c.multipage&&(e+=":mp");b.setState(g.cookieName,e,1)},c.delay||0);return this};this.prevStep=function(a){v.call(this,a,-1);return this};this.nextStep=function(a){var c=n(),d=b.getStepTarget(c);c.nextOnTargetClick&&b.removeEvtListener(d,"click",u);v.call(this,a,1);return this};this.endTour=function(a,c){var d=t(),a=b.valOrDefault(a,!0),c=b.valOrDefault(c,!0);h=0;m=void 0;d.hide();a&&b.clearState(g.cookieName);i.isActive=!1;j&&c&&b.invokeEventCallbacks("end");i.removeCallbacks(!0);
j=null;return this};this.getCurrTour=function(){return j};this.getCurrStepNum=function(){return h};this.listen=function(a,b,c){a&&p[a].push({cb:b,fromTour:c});return this};this.unlisten=function(a,b){var c=p[a],d,e;d=0;for(e=c.length;d<e;++d)c[d]===b&&c.splice(d,1);return this};this.removeCallbacks=function(a){var b,c,d,e;for(e in p)if(a){b=p[e];c=0;for(d=b.length;c<d;++c)b[c].fromTour&&(b.splice(c--,1),--d)}else p[e]=[];return this};this.registerHelper=function(a,b){"string"===typeof a&&"function"===
typeof b&&(q[a]=b)};this.unregisterHelper=function(a){q[a]=null};this.setCookieName=function(a){g.cookieName=a;return this};this.resetDefaultOptions=function(){g||(g={});b.extend(g,r);return this};y=function(a,c){var d="next prev start end show error close".split(" "),e,f,h;g||this.resetDefaultOptions();b.extend(g,a);a&&b.extend(k,a.i18n);f=0;for(h=d.length;f<h;++f)e="on"+d[f].charAt(0).toUpperCase()+d[f].substring(1),a[e]&&this.listen(d[f],a[e],c);t().showCloseButton(a.showCloseButton,"undefined"!==
typeof a.showCloseButton);return this};this.configure=function(a){return y.call(this,a,!1)};a&&(a.cookieName=a.cookieName||"hopscotch.tour.state",this.configure(a))},i=new B,u[v]=i)})(window,"hopscotch");
