(function(s,y){var k,u,i,c,p,l=s[y],z=!1,v="undefined"!==typeof window.jQuery,q="undefined"!==typeof window.sessionStorage;k=document.body.style;var A="undefined"!==typeof k.MozTransition||"undefined"!==typeof k.MsTransition||"undefined"!==typeof k.webkitTransition||"undefined"!==typeof k.OTransition||"undefined"!==typeof k.transition;l||(k=function(){z&&l.startTour()},window.addEventListener?window.addEventListener("load",k,!1):window.attachEvent&&window.attachEvent("onload",k),c={addClass:function(a,
c){var b,d,h;if(0===a.className.length)a.className=c;else{b=a.className.split(" ");d=0;for(h=b.length;d<h;++d)if(b[d]===c)return;b.splice(0,0,c);a.className=b.join(" ")}},removeClass:function(a,c){var b,d,h,g,f,i,j;d=c.split(" ");b=a.className.split(" ");g=0;for(i=d.length;g<i;++g){h=d[g];f=0;for(j=b.length;f<j&&b[f]!==h;++f);f<j&&b.splice(f,1)}a.className=b.join(" ")},getPixelValue:function(a){var c=typeof a;return"number"===c?a:"string"===c?parseInt(a,10):0},valOrDefault:function(a,c){return"undefined"!==
typeof a?a:c},invokeCallbacks:function(a,c){for(var b=p[a],d=0,h=b.length;d<h;++d)b[d].cb.apply(this,c)},getScrollTop:function(){return"undefined"!==typeof window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop},getScrollLeft:function(){return"undefined"!==typeof window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft},getWindowHeight:function(){return window.innerHeight?window.innerHeight:document.documentElement.clientHeight},getWindowWidth:function(){return window.innerWidth?
window.innerWidth:document.documentElement.clientWidth},addClickListener:function(a,c){return a.addEventListener?a.addEventListener("click",c,!1):a.attachEvent("onclick",c)},evtPreventDefault:function(a){a.preventDefault?a.preventDefault():event&&(event.returnValue=!1)},extend:function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])},getStepTarget:function(a){return!a||!a.target?null:"string"===typeof a.target?/[#\.].*/.test(a.target)?document.querySelector?document.querySelector(a.target):v?
(a=jQuery(a.target),a.length?a[0]:null):window.Sizzle?(a=Sizzle(a.target),a.length?a[0]:null):"#"===a.target[0]&&-1===a.target.indexOf(" ")?document.getElementById(a.target.substring(1)):null:document.getElementById(a.target):a.target},setState:function(a,c,b){var d="";q?sessionStorage.setItem(a,c):(b&&(d=new Date,d.setTime(d.getTime()+864E5*b),d="; expires="+d.toGMTString()),document.cookie=a+"="+c+d+"; path=/")},getState:function(a){var c=a+"=",b=document.cookie.split(";"),d;if(q)return sessionStorage.getItem(a);
for(a=0;a<b.length;a++){for(d=b[a];" "===d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(c))return d.substring(c.length,d.length)}return null},clearState:function(a){q?sessionStorage.removeItem(a):this.setState(a,"",-1)}},p={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]},i={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"},u=function(a){this.init(a)},u.prototype={isShowing:!1,currStep:void 0,createButton:function(a,e){var b=document.createElement("input");
b.id=a;b.type="button";b.value=e;c.addClass(b,"hopscotch-nav-button");0<=a.indexOf("prev")?c.addClass(b,"prev"):c.addClass(b,"next");return b},setPosition:function(a){var e,b,d,h,g;d=c.getStepTarget(a);var f=this.element,i=this.arrowEl,j=c.getPixelValue(a.arrowOffset);e=c.getPixelValue(a.width)||this.opt.bubbleWidth;b=c.valOrDefault(a.padding,this.opt.bubblePadding);c.removeClass(f,"fade-in-down fade-in-up fade-in-left fade-in-right");d=d.getBoundingClientRect();"top"===a.orientation?(e=f.offsetHeight,
h=d.top-e-this.opt.arrowWidth,g=d.left):"bottom"===a.orientation?(h=d.bottom+this.opt.arrowWidth,g=d.left):"left"===a.orientation?(h=d.top,g=d.left-e-2*b-12-this.opt.arrowWidth):"right"===a.orientation&&(h=d.top,g=d.right+this.opt.arrowWidth);if(j)if("top"===a.orientation||"bottom"===a.orientation)i.style.top="",i.style.left=j+"px";else{if("left"===a.orientation||"right"===a.orientation)i.style.left="",i.style.top=j+"px"}else i.style.top="",i.style.left="";g+=c.getPixelValue(a.xOffset);h+=c.getPixelValue(a.yOffset);
a.fixedElement||(h+=c.getScrollTop(),g+=c.getScrollLeft());f.style.position=a.fixedElement?"fixed":"absolute";this.opt.animate&&v&&!A?$(f).animate({top:h+"px",left:g+"px"}):(f.style.top=h+"px",f.style.left=g+"px")},initNavButtons:function(){var a=document.createElement("div");this.prevBtnEl=this.createButton("hopscotch-prev",i.prevBtn);this.nextBtnEl=this.createButton("hopscotch-next",i.nextBtn);this.doneBtnEl=this.createButton("hopscotch-done",i.doneBtn);c.addClass(this.doneBtnEl,"hide");a.appendChild(this.prevBtnEl);
a.appendChild(this.nextBtnEl);a.appendChild(this.doneBtnEl);c.addClickListener(this.prevBtnEl,function(){l.prevStep(!0)});c.addClickListener(this.nextBtnEl,function(){l.nextStep(!0)});c.addClickListener(this.doneBtnEl,l.endTour);a.id="hopscotch-actions";this.buttonsEl=a;this.containerEl.appendChild(a);return this},initCloseButton:function(){var a=document.createElement("a");a.id="hopscotch-bubble-close";a.href="#";a.title=i.closeTooltip;a.innerHTML=i.closeTooltip;c.addClickListener(a,function(a){var b=
l.getCurrStepNum(),d=l.getCurrTour(),h=b===d.steps.length-1;c.invokeCallbacks("close",[d.id,b]);l.endTour(!0,h);a.preventDefault?a.preventDefault():event&&(event.returnValue=!1)});this.closeBtnEl=a;this.containerEl.appendChild(a);return this},initArrow:function(){var a,c;this.arrowEl=document.createElement("div");this.arrowEl.id="hopscotch-bubble-arrow-container";c=document.createElement("div");c.className="hopscotch-bubble-arrow-border";a=document.createElement("div");a.className="hopscotch-bubble-arrow";
this.arrowEl.appendChild(c);this.arrowEl.appendChild(a);this.element.appendChild(this.arrowEl);return this},renderStep:function(a,e,b,d){var h=this,g=c.valOrDefault(a.showNextButton,this.opt.showNextButton),f=c.valOrDefault(a.showPrevButton,this.opt.showPrevButton);currStep=a;this.setTitle(a.title?a.title:"");this.setContent(a.content?a.content:"");this.setNum(e);this.orientation=a.orientation;this.showPrevButton(this.prevBtnEl&&f&&0<e);this.showNextButton(this.nextBtnEl&&g&&!b);this.nextBtnEl.value=
a.showSkip?i.skipBtn:i.nextBtn;b?c.removeClass(this.doneBtnEl,"hide"):c.addClass(this.doneBtnEl,"hide");this.setArrow(a.orientation);e=c.getPixelValue(a.width)||this.opt.bubbleWidth;b=c.valOrDefault(a.padding,this.opt.bubblePadding);this.containerEl.style.width=e+"px";this.containerEl.style.padding=b+"px";this.element.style.zIndex=a.zindex?a.zindex:"";"top"===a.orientation?setTimeout(function(){h.setPosition(a);d&&(a.fixedElement?h.show():d())},5):(this.setPosition(a),d&&(a.fixedElement?h.show():
d()));return this},setTitle:function(a){a?(this.titleEl.innerHTML=a,c.removeClass(this.titleEl,"hide")):c.addClass(this.titleEl,"hide");return this},setContent:function(a){a?(this.contentEl.innerHTML=a,c.removeClass(this.contentEl,"hide")):c.addClass(this.contentEl,"hide");return this},setNum:function(a){a=i.stepNums&&a<i.stepNums.length?i.stepNums[a]:a+1;this.numberEl.innerHTML=a},setArrow:function(a){"top"===a?this.arrowEl.className="down":"bottom"===a?this.arrowEl.className="up":"left"===a?this.arrowEl.className=
"right":"right"===a&&(this.arrowEl.className="left")},getArrowDirection:function(){if("top"===this.orientation)return"down";if("bottom"===this.orientation)return"up";if("left"===this.orientation)return"right";if("right"===this.orientation)return"left"},show:function(){var a=this,e="fade-in-"+this.getArrowDirection();c.removeClass(this.element,"hide");this.opt.animate?setTimeout(function(){c.addClass(a.element,"animate")},50):(c.addClass(this.element,e),setTimeout(function(){c.removeClass(a.element,
"invisible")},50),setTimeout(function(){c.removeClass(a.element,e)},1E3));isShowing=!0;return this},hide:function(a){var e=this.element,a=c.valOrDefault(a,!0);e.style.top="";e.style.left="";a?(c.addClass(e,"hide"),c.removeClass(e,"invisible")):(c.removeClass(e,"hide"),this.opt.animate||c.addClass(e,"invisible"));c.removeClass(e,"animate fade-in-up fade-in-down fade-in-right fade-in-left");isShowing=!1;return this},showButton:function(a,e,b){var d="hide";b&&(d="hide-all");"undefined"===typeof e&&(e=
!0);e?c.removeClass(a,d):c.addClass(a,d)},showPrevButton:function(a,c){this.showButton(this.prevBtnEl,a,c)},showNextButton:function(a,c){this.showButton(this.nextBtnEl,a,c)},showCloseButton:function(a,c){this.showButton(this.closeBtnEl,a,c)},initAnimate:function(){var a=this;setTimeout(function(){c.addClass(a.element,"animate")},50)},removeAnimate:function(){c.removeClass(this.element,"animate")},init:function(a){var e=document.createElement("div"),b=document.createElement("div"),d=document.createElement("div"),
h=this,g=!1;this.element=e;this.containerEl=b;this.titleEl=document.createElement("h3");this.numberEl=document.createElement("span");this.contentEl=document.createElement("p");e.id="hopscotch-bubble";c.addClass(e,"animated");b.id="hopscotch-bubble-container";this.numberEl.id="hopscotch-bubble-number";b.appendChild(this.numberEl);d.appendChild(this.titleEl);d.appendChild(this.contentEl);d.id="hopscotch-bubble-content";b.appendChild(d);e.appendChild(b);this.initNavButtons();this.initCloseButton();this.initArrow();
b=function(){!g&&h.isShowing&&(g=!0,setTimeout(function(){h.setPosition(currStep);g=!1},200))};window.addEventListener?window.addEventListener("resize",b,!1):window.attachEvent&&window.attachEvent("onresize",b,!1);this.hide();document.body.appendChild(e);this.opt=a}},k=function(a){var e="hopscotch.tour.state",b=this,d,h,g,f,k,j,q,r=function(){d||(d=new u(h));return d},n=function(){return 0>f||f>=g.steps.length?null:g.steps[f]},w=function(){b.nextStep(!1)},x=function(a,d){var b,h;0<=f+a&&f+a<g.steps.length?
(f+=a,h=n(),setTimeout(function(){(b=c.getStepTarget(h))?d(f):(c.invokeCallbacks("error",[g.id,f]),x(a,d))},c.valOrDefault(h.delay,0))):d(-1)},s=function(a,d){var b=this,e,i,j;r().hide();a=c.valOrDefault(a,!0);e=n();i=f;j=function(b){if(-1===b)return this.endTour(!0);if(a){if(0<d&&e.onNext)e.onNext();else if(0>d&&e.onPrev)e.onPrev();c.invokeCallbacks(0<d?"next":"prev",[g.id,i])}this.showStep(b)};if(h.skipIfNoElement)x(d,function(a){j.call(b,a)});else if(0<=f+d&&f+d<g.steps.length){f+=d;e=n();if(!c.getStepTarget(e))return c.invokeCallbacks("error",
[g.id,f]),this.endTour(!0,!1);this.changeStepCb(f)}return this};this.startTour=function(a,d){var b;if(!g){b={};var e;g=a;for(e in a)a.hasOwnProperty(e)&&("id"!==e&&"steps"!==e)&&(b[e]=a[e]);this.resetDefaultOptions();q.call(this,b,!0);if(b=c.getState(h.cookieName))b=b.split(":"),k=b[0],j=b[1],j=parseInt(j,10),2<b.length&&"mp"===b[2]&&j<g.steps.length-1&&++j}"undefined"!==typeof d&&(f=d);if("complete"!==document.readyState)return z=!0,this;if("undefined"===typeof f)if(g.id===k&&"undefined"!==typeof j){if(f=
j,b=n(),b=c.getStepTarget(b),b||(--f,b=n(),b=c.getStepTarget(b)),!b&&h.skipIfNoElement&&(x(1),b=-1!==f&&c.getStepTarget(g.steps[f])),!b)return this.endTour(!1,!1),this}else f=0;c.invokeCallbacks("start",[g.id,f]);b=r();b.hide(!1);this.isActive=!0;h.animate&&b.initAnimate();c.getStepTarget(n())?this.showStep(f):(c.invokeCallbacks("error",[g.id,f]),h.skipIfNoElement&&this.nextStep(!1));return this};this.showStep=function(a){var b=g.steps[a];setTimeout(function(){var d=g.steps.length,e=g.id+":"+a,i=
r(),j=c.getStepTarget(b);f=a;h.animate||i.hide(!1);i.renderStep(b,a,a===d-1,function(){var a=function(){i.show()},d=r().element,e=c.getPixelValue(d.style.top),d=e+c.getPixelValue(d.offsetHeight),f=c.getStepTarget(n()).getBoundingClientRect(),g=f.top+c.getScrollTop(),f=f.bottom+c.getScrollTop(),e=e<g?e:g,d=d>f?d:f,g=c.getScrollTop(),f=g+c.getWindowHeight(),m=e-h.scrollTopMargin,t,k,l;e>=g&&(e<=g+h.scrollTopMargin||d<=f)?a&&a():h.smoothScroll?"undefined"!==typeof YAHOO&&"undefined"!==typeof YAHOO.env&&
"undefined"!==typeof YAHOO.env.ua&&"undefined"!==typeof YAHOO.util&&"undefined"!==typeof YAHOO.util.Scroll?(e=YAHOO.env.ua.webkit?document.body:document.documentElement,d=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:void 0,e=new YAHOO.util.Scroll(e,{scroll:{to:[0,m]}},h.scrollDuration/1E3,d),e.onComplete.subscribe(a),e.animate()):v?$("body, html").animate({scrollTop:m},h.scrollDuration,a):(0>m&&(m=0),t=g>e?-1:1,k=Math.abs(g-m)/(h.scrollDuration/10),l=setInterval(function(){var b=c.getScrollTop(),d=
b+t*k;0<t&&d>=m||0>t&&d<=m?(d=m,clearInterval(l),a&&a(),window.scrollTo(0,d)):(window.scrollTo(0,d),c.getScrollTop()===b&&(clearInterval(l),a&&a()))},10)):(window.scrollTo(0,m),a&&a());if(b.onShow)b.onShow();b.nextOnTargetClick&&c.addClickListener(j,w)});c.invokeCallbacks("show",[g.id,f]);b.multipage&&(e+=":mp");c.setState(h.cookieName,e,1)},b.delay?b.delay:0);return this};this.prevStep=function(a){s.call(this,a,-1);return this};this.nextStep=function(a){var b=n(),d=c.getStepTarget(b);b.nextOnTargetClick&&
(d.removeEventListener?d.removeEventListener("click",w,!1):d.detachEvent("click",w));s.call(this,a,1);return this};this.endTour=function(a,b){var d=r(),a=c.valOrDefault(a,!0),b=c.valOrDefault(b,!0);f=0;j=void 0;d.hide();a&&c.clearState(h.cookieName);l.isActive=!1;g&&b&&c.invokeCallbacks("end",[g.id]);l.removeCallbacks(!0);g=null;return this};this.getCurrTour=function(){return g};this.getCurrStepNum=function(){return f};this.listen=function(a,c,b){a&&c&&p[a].push({cb:c,fromTour:b});return this};this.removeCallback=
function(a,c){var b=p[a],d,e;d=0;for(e=b.length;d<e;++d)c===b[d].cb&&b.splice(d,1);return this};this.removeCallbacks=function(a){var c,b,d,e;for(e in p)if(a){c=p[e];b=0;for(d=c.length;b<d;++b)c[b].fromTour&&(c.splice(b--,1),--d)}else p[e]=[];return this};this.setCookieName=function(a){e=a;h.cookieName=a;return this};this.resetDefaultOptions=function(){h={animate:!1,smoothScroll:!0,scrollDuration:1E3,scrollTopMargin:200,showCloseButton:!0,showPrevButton:!1,showNextButton:!0,bubbleWidth:280,bubblePadding:15,
arrowWidth:20,skipIfNoElement:!0,cookieName:e};return this};q=function(a,b){var d;h||this.resetDefaultOptions();c.extend(h,a);a&&c.extend(i,a.i18n);this.listen("next",a.onNext,b).listen("prev",a.onPrev,b).listen("start",a.onStart,b).listen("end",a.onEnd,b).listen("show",a.onShow,b).listen("error",a.onError,b).listen("close",a.onClose,b);d=r();h.animate?d.initAnimate():d.removeAnimate();d.showCloseButton(a.showCloseButton,"undefined"!==typeof a.showCloseButton);return this};this.configure=function(a){return q.call(this,
a,!1)};a&&this.configure(a)},l=new k,s[y]=l)})(window,"hopscotch");
