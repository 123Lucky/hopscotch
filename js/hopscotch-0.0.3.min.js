(function(w,z){var k,A,q,a,u,r=w[z],B=!1,x="undefined"!==typeof window.jQuery,v="undefined"!==typeof window.sessionStorage;k=document.body.style;var C="undefined"!==typeof k.MozTransition||"undefined"!==typeof k.MsTransition||"undefined"!==typeof k.webkitTransition||"undefined"!==typeof k.OTransition||"undefined"!==typeof k.transition;r||(k=function(){B&&r.startTour()},window.addEventListener?window.addEventListener("load",k,!1):window.attachEvent&&window.attachEvent("onload",k),a={addClass:function(a,
e){var g,b,i;if(0===a.className.length)a.className=e;else{g=a.className.split(" ");b=0;for(i=g.length;b<i;++b)if(g[b]===e)return;g.splice(0,0,e);a.className=g.join(" ")}},removeClass:function(a,e){var g,b,i,h,d,n,m;b=e.split(" ");g=a.className.split(" ");h=0;for(n=b.length;h<n;++h){i=b[h];d=0;for(m=g.length;d<m&&g[d]!==i;++d);d<m&&g.splice(d,1)}a.className=g.join(" ")},getPixelValue:function(a){var e=typeof a;return"number"===e?a:"string"===e?parseInt(a,10):0},valOrDefault:function(a,e){return"undefined"!==
typeof a?a:e},invokeCallbacks:function(a,e){for(var g=u[a],b=0,i=g.length;b<i;++b)g[b].cb.apply(this,e)},getScrollTop:function(){return"undefined"!==typeof window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop},getScrollLeft:function(){return"undefined"!==typeof window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft},getWindowHeight:function(){return window.innerHeight?window.innerHeight:document.documentElement.clientHeight},getWindowWidth:function(){return window.innerWidth?
window.innerWidth:document.documentElement.clientWidth},addClickListener:function(a,e){return a.addEventListener?a.addEventListener("click",e,!1):a.attachEvent("onclick",e)},evtPreventDefault:function(a){a.preventDefault?a.preventDefault():event&&(event.returnValue=!1)},extend:function(a,e){for(var g in e)e.hasOwnProperty(g)&&(a[g]=e[g])},getStepTarget:function(a){return!a||!a.target?null:"string"===typeof a.target?/[#\.].*/.test(a.target)?document.querySelector?document.querySelector(a.target):x?
(a=jQuery(a.target),a.length?a[0]:null):window.Sizzle?(a=Sizzle(a.target),a.length?a[0]:null):"#"===a.target[0]&&-1===a.target.indexOf(" ")?document.getElementById(a.target.substring(1)):null:document.getElementById(a.target):a.target},setState:function(a,e,g){var b="";v?sessionStorage.setItem(a,e):(g&&(b=new Date,b.setTime(b.getTime()+864E5*g),b="; expires="+b.toGMTString()),document.cookie=a+"="+e+b+"; path=/")},getState:function(a){var e=a+"=",g=document.cookie.split(";"),b;if(v)return sessionStorage.getItem(a);
for(a=0;a<g.length;a++){for(b=g[a];" "===b.charAt(0);)b=b.substring(1,b.length);if(0===b.indexOf(e))return b.substring(e.length,b.length)}return null},clearState:function(a){v?sessionStorage.removeItem(a):this.setState(a,"",-1)}},u={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]},q={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"},A=function(l){var e=!1,g,b=function(c,d){var b=document.createElement("input");b.id=c;b.type="button";b.value=
d;a.addClass(b,"hopscotch-nav-button");0<=c.indexOf("prev")?a.addClass(b,"prev"):a.addClass(b,"next");return b},i=function(c,d,b){var e="hide";b&&(e="hide-all");"undefined"===typeof d&&(d=!0);d?a.removeClass(c,e):a.addClass(c,e)},h=function(c){var d,b,e,j,p;e=a.getStepTarget(c);var f=this.element,t=this.arrowEl,i=a.getPixelValue(c.arrowOffset);d=a.getPixelValue(c.width)||l.bubbleWidth;b=a.valOrDefault(c.padding,l.bubblePadding);a.removeClass(f,"fade-in-down fade-in-up fade-in-left fade-in-right");
e=e.getBoundingClientRect();"top"===c.orientation?(d=f.offsetHeight,j=e.top-d-l.arrowWidth,p=e.left):"bottom"===c.orientation?(j=e.bottom+l.arrowWidth,p=e.left):"left"===c.orientation?(j=e.top,p=e.left-d-2*b-12-l.arrowWidth):"right"===c.orientation&&(j=e.top,p=e.right+l.arrowWidth);if(i)if("top"===c.orientation||"bottom"===c.orientation)t.style.top="",t.style.left=i+"px";else{if("left"===c.orientation||"right"===c.orientation)t.style.left="",t.style.top=i+"px"}else t.style.top="",t.style.left="";
p+=a.getPixelValue(c.xOffset);j+=a.getPixelValue(c.yOffset);c.fixedElement||(j+=a.getScrollTop(),p+=a.getScrollLeft());f.style.position=c.fixedElement?"fixed":"absolute";l.animate&&x&&!C?$(f).animate({top:j+"px",left:p+"px"}):(f.style.top=j+"px",f.style.left=p+"px")};this.initNavButtons=function(){var c=document.createElement("div");this.prevBtnEl=b("hopscotch-prev",q.prevBtn);this.nextBtnEl=b("hopscotch-next",q.nextBtn);this.doneBtnEl=b("hopscotch-done",q.doneBtn);a.addClass(this.doneBtnEl,"hide");
c.appendChild(this.prevBtnEl);c.appendChild(this.nextBtnEl);c.appendChild(this.doneBtnEl);a.addClickListener(this.prevBtnEl,function(){r.prevStep(!0)});a.addClickListener(this.nextBtnEl,function(){r.nextStep(!0)});a.addClickListener(this.doneBtnEl,r.endTour);c.id="hopscotch-actions";this.buttonsEl=c;this.containerEl.appendChild(c);return this};this.initCloseButton=function(){var c=document.createElement("a");c.id="hopscotch-bubble-close";c.href="#";c.title=q.closeTooltip;c.innerHTML=q.closeTooltip;
a.addClickListener(c,function(c){var d=r.getCurrStepNum(),b=r.getCurrTour(),j=d===b.steps.length-1;a.invokeCallbacks("close",[b.id,d]);r.endTour(!0,j);c.preventDefault?c.preventDefault():event&&(event.returnValue=!1)});this.closeBtnEl=c;this.containerEl.appendChild(c);return this};this.initArrow=function(){var a,d;this.arrowEl=document.createElement("div");this.arrowEl.id="hopscotch-bubble-arrow-container";d=document.createElement("div");d.className="hopscotch-bubble-arrow-border";a=document.createElement("div");
a.className="hopscotch-bubble-arrow";this.arrowEl.appendChild(d);this.arrowEl.appendChild(a);this.element.appendChild(this.arrowEl);return this};this.renderStep=function(c,d,b,e){var j=this,p=a.valOrDefault(c.showNextButton,l.showNextButton),f=a.valOrDefault(c.showPrevButton,l.showPrevButton);g=c;this.setTitle(c.title?c.title:"");this.setContent(c.content?c.content:"");this.setNum(d);this.orientation=c.orientation;this.showPrevButton(this.prevBtnEl&&f&&0<d);this.showNextButton(this.nextBtnEl&&p&&
!b);this.nextBtnEl.value=c.showSkip?q.skipBtn:q.nextBtn;b?a.removeClass(this.doneBtnEl,"hide"):a.addClass(this.doneBtnEl,"hide");this.setArrow(c.orientation);d=a.getPixelValue(c.width)||l.bubbleWidth;b=a.valOrDefault(c.padding,l.bubblePadding);this.containerEl.style.width=d+"px";this.containerEl.style.padding=b+"px";this.element.style.zIndex=c.zindex?c.zindex:"";"top"===c.orientation?setTimeout(function(){h.call(j,c);e&&(c.fixedElement?j.show():e())},5):(h.call(this,c),e&&(c.fixedElement?j.show():
e()));return this};this.setTitle=function(c){c?(this.titleEl.innerHTML=c,a.removeClass(this.titleEl,"hide")):a.addClass(this.titleEl,"hide");return this};this.setContent=function(c){c?(this.contentEl.innerHTML=c,a.removeClass(this.contentEl,"hide")):a.addClass(this.contentEl,"hide");return this};this.setNum=function(a){a=q.stepNums&&a<q.stepNums.length?q.stepNums[a]:a+1;this.numberEl.innerHTML=a};this.setArrow=function(a){"top"===a?this.arrowEl.className="down":"bottom"===a?this.arrowEl.className=
"up":"left"===a?this.arrowEl.className="right":"right"===a&&(this.arrowEl.className="left")};this.getArrowDirection=function(){if("top"===this.orientation)return"down";if("bottom"===this.orientation)return"up";if("left"===this.orientation)return"right";if("right"===this.orientation)return"left"};this.show=function(){var c=this,d="fade-in-"+this.getArrowDirection();a.removeClass(this.element,"hide");l.animate?setTimeout(function(){a.addClass(c.element,"animate")},50):(a.addClass(this.element,d),setTimeout(function(){a.removeClass(c.element,
"invisible")},50),setTimeout(function(){a.removeClass(c.element,d)},1E3));e=!0;return this};this.hide=function(c){var d=this.element,c=a.valOrDefault(c,!0);d.style.top="";d.style.left="";c?(a.addClass(d,"hide"),a.removeClass(d,"invisible")):(a.removeClass(d,"hide"),l.animate||a.addClass(d,"invisible"));a.removeClass(d,"animate fade-in-up fade-in-down fade-in-right fade-in-left");e=!1;return this};this.showPrevButton=function(a,d){i(this.prevBtnEl,a,d)};this.showNextButton=function(a,d){i(this.nextBtnEl,
a,d)};this.showCloseButton=function(a,d){i(this.closeBtnEl,a,d)};this.initAnimate=function(){var c=this;setTimeout(function(){a.addClass(c.element,"animate")},50)};this.removeAnimate=function(){a.removeClass(this.element,"animate")};var d=document.createElement("div"),n=document.createElement("div"),m=document.createElement("div"),k=this,s=!1;this.element=d;this.containerEl=n;this.titleEl=document.createElement("h3");this.numberEl=document.createElement("span");this.contentEl=document.createElement("p");
d.id="hopscotch-bubble";a.addClass(d,"animated");n.id="hopscotch-bubble-container";this.numberEl.id="hopscotch-bubble-number";n.appendChild(this.numberEl);m.appendChild(this.titleEl);m.appendChild(this.contentEl);m.id="hopscotch-bubble-content";n.appendChild(m);d.appendChild(n);this.initNavButtons();this.initCloseButton();this.initArrow();n=function(){!s&&e&&(s=!0,setTimeout(function(){h.call(k,g,!1);s=!1},200))};window.addEventListener?window.addEventListener("resize",n,!1):window.attachEvent&&window.attachEvent("onresize",
n,!1);this.hide();document.body.appendChild(d)},k=function(l){var e="hopscotch.tour.state",g=this,b,i,h,d,n,m,k,s=function(){b||(b=new A(i));return b},c=function(){return 0>d||d>=h.steps.length?null:h.steps[d]},v=function(){g.nextStep(!1)},y=function(j,p){var f,b;0<=d+j&&d+j<h.steps.length?(d+=j,b=c(),setTimeout(function(){(f=a.getStepTarget(b))?p(d):(a.invokeCallbacks("error",[h.id,d]),y(j,p))},a.valOrDefault(b.delay,0))):p(-1)},w=function(j,b){var f=this,e,g,k;s().hide();j=a.valOrDefault(j,!0);
e=c();g=d;k=function(c){if(-1===c)return this.endTour(!0);if(j){if(0<b&&e.onNext)e.onNext();else if(0>b&&e.onPrev)e.onPrev();a.invokeCallbacks(0<b?"next":"prev",[h.id,g])}this.showStep(c)};if(i.skipIfNoElement)y(b,function(a){k.call(f,a)});else if(0<=d+b&&d+b<h.steps.length){d+=b;e=c();if(!a.getStepTarget(e))return a.invokeCallbacks("error",[h.id,d]),this.endTour(!0,!1);this.changeStepCb(d)}return this};this.startTour=function(b,e){var f;if(!h){f={};var g;h=b;for(g in b)b.hasOwnProperty(g)&&("id"!==
g&&"steps"!==g)&&(f[g]=b[g]);this.resetDefaultOptions();k.call(this,f,!0);if(f=a.getState(i.cookieName))f=f.split(":"),n=f[0],m=f[1],m=parseInt(m,10),2<f.length&&"mp"===f[2]&&m<h.steps.length-1&&++m}"undefined"!==typeof e&&(d=e);if("complete"!==document.readyState)return B=!0,this;if("undefined"===typeof d)if(h.id===n&&"undefined"!==typeof m){if(d=m,f=c(),f=a.getStepTarget(f),f||(--d,f=c(),f=a.getStepTarget(f)),!f&&i.skipIfNoElement&&(y(1),f=-1!==d&&a.getStepTarget(h.steps[d])),!f)return this.endTour(!1,
!1),this}else d=0;a.invokeCallbacks("start",[h.id,d]);f=s();f.hide(!1);this.isActive=!0;i.animate&&f.initAnimate();a.getStepTarget(c())?this.showStep(d):(a.invokeCallbacks("error",[h.id,d]),i.skipIfNoElement&&this.nextStep(!1));return this};this.showStep=function(b){var e=h.steps[b];setTimeout(function(){var f=h.steps.length,g=h.id+":"+b,k=s(),m=a.getStepTarget(e);d=b;i.animate||k.hide(!1);k.renderStep(e,b,b===f-1,function(){var d=function(){k.show()},b=s().element,f=a.getPixelValue(b.style.top),
b=f+a.getPixelValue(b.offsetHeight),j=a.getStepTarget(c()).getBoundingClientRect(),g=j.top+a.getScrollTop(),j=j.bottom+a.getScrollTop(),f=f<g?f:g,b=b>j?b:j,g=a.getScrollTop(),j=g+a.getWindowHeight(),h=f-i.scrollTopMargin,l,t,n;f>=g&&(f<=g+i.scrollTopMargin||b<=j)?d&&d():i.smoothScroll?"undefined"!==typeof YAHOO&&"undefined"!==typeof YAHOO.env&&"undefined"!==typeof YAHOO.env.ua&&"undefined"!==typeof YAHOO.util&&"undefined"!==typeof YAHOO.util.Scroll?(f=YAHOO.env.ua.webkit?document.body:document.documentElement,
b=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:void 0,f=new YAHOO.util.Scroll(f,{scroll:{to:[0,h]}},i.scrollDuration/1E3,b),f.onComplete.subscribe(d),f.animate()):x?$("body, html").animate({scrollTop:h},i.scrollDuration,d):(0>h&&(h=0),l=g>f?-1:1,t=Math.abs(g-h)/(i.scrollDuration/10),n=setInterval(function(){var b=a.getScrollTop(),c=b+l*t;0<l&&c>=h||0>l&&c<=h?(c=h,clearInterval(n),d&&d(),window.scrollTo(0,c)):(window.scrollTo(0,c),a.getScrollTop()===b&&(clearInterval(n),d&&d()))},10)):(window.scrollTo(0,
h),d&&d());if(e.onShow)e.onShow();e.nextOnTargetClick&&a.addClickListener(m,v)});a.invokeCallbacks("show",[h.id,d]);e.multipage&&(g+=":mp");a.setState(i.cookieName,g,1)},e.delay?e.delay:0);return this};this.prevStep=function(a){w.call(this,a,-1);return this};this.nextStep=function(d){var b=c(),f=a.getStepTarget(b);b.nextOnTargetClick&&(f.removeEventListener?f.removeEventListener("click",v,!1):f.detachEvent("click",v));w.call(this,d,1);return this};this.endTour=function(b,c){var f=s(),b=a.valOrDefault(b,
!0),c=a.valOrDefault(c,!0);d=0;m=void 0;f.hide();b&&a.clearState(i.cookieName);r.isActive=!1;h&&c&&a.invokeCallbacks("end",[h.id]);r.removeCallbacks(!0);h=null;return this};this.getCurrTour=function(){return h};this.getCurrStepNum=function(){return d};this.listen=function(a,b,c){a&&b&&u[a].push({cb:b,fromTour:c});return this};this.removeCallback=function(a,b){var c=u[a],d,e;d=0;for(e=c.length;d<e;++d)b===c[d].cb&&c.splice(d,1);return this};this.removeCallbacks=function(a){var b,c,d,e;for(e in u)if(a){b=
u[e];c=0;for(d=b.length;c<d;++c)b[c].fromTour&&(b.splice(c--,1),--d)}else u[e]=[];return this};this.setCookieName=function(a){e=a;i.cookieName=a;return this};this.resetDefaultOptions=function(){i={animate:!1,smoothScroll:!0,scrollDuration:1E3,scrollTopMargin:200,showCloseButton:!0,showPrevButton:!1,showNextButton:!0,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:!0,cookieName:e};return this};k=function(b,c){var d;i||this.resetDefaultOptions();a.extend(i,b);b&&a.extend(q,b.i18n);this.listen("next",
b.onNext,c).listen("prev",b.onPrev,c).listen("start",b.onStart,c).listen("end",b.onEnd,c).listen("show",b.onShow,c).listen("error",b.onError,c).listen("close",b.onClose,c);d=s();i.animate?d.initAnimate():d.removeAnimate();d.showCloseButton(b.showCloseButton,"undefined"!==typeof b.showCloseButton);return this};this.configure=function(a){return k.call(this,a,!1)};l&&this.configure(l)},r=new k,w[z]=r)})(window,"hopscotch");
