(function(){var m,f,l,k,i,a,j="undefined",h=false,b=false,c=(typeof window.jQuery!==j),e=(typeof window.localStorage!==j),g=document.body.style,d=(typeof g.MozTransition!==j||typeof g.MsTransition!==j||typeof g.webkitTransition!==j||typeof g.OTransition!==j||typeof g.transition!==j);if(window.hopscotch){return}a=function(){h=true;if(b){window.hopscotch.startTour()}};if(window.addEventListener){window.addEventListener("load",a)}else{if(window.attachEvent){window.attachEvent("onload",a)}}k={addClass:function(p,r){var o,q,n;if(c){$(p).addClass(r)}else{if(p.className.length===0){p.className=r}else{o=p.className.split(" ");for(q=0,n=o.length;q<n;++q){if(o[q]===r){return}}o.splice(0,0,r);p.className=o.join(" ")}}},removeClass:function(n,s){var r,v,t,q,o,u,p;if(c){$(n).removeClass(s)}else{v=s.split(" ");r=n.className.split(" ");for(q=0,u=v.length;q<u;++q){t=v[q];for(o=0,p=r.length;o<p;++o){if(r[o]===t){break}}if(o<p){r.splice(o,1)}}n.className=r.join(" ")}},getPixelValue:function(o){var n=typeof o;if(n==="number"){return o}if(n==="string"){return parseInt(o,10)}return 0},valOrDefault:function(o,n){return typeof o!==j?o:n},invokeCallbacks:function(r,o){var q=i[r],p=0,n=q.length;for(;p<n;++p){q[p].cb.apply(this,o)}},getScrollTop:function(){if(typeof window.pageYOffset!==j){return window.pageYOffset}else{return document.documentElement.scrollTop}},getScrollLeft:function(){if(typeof window.pageXOffset!==j){return window.pageXOffset}else{return document.documentElement.scrollLeft}},getWindowHeight:function(){return window.innerHeight?window.innerHeight:document.documentElement.clientHeight},getWindowWidth:function(){return window.innerWidth?window.innerWidth:document.documentElement.clientWidth},addClickListener:function(o,n){return o.addEventListener?o.addEventListener("click",n):o.attachEvent("onclick",n)},evtPreventDefault:function(n){if(n.preventDefault){n.preventDefault()}else{if(event){event.returnValue=false}}},extend:function(o,n){var p;for(p in n){if(n.hasOwnProperty(p)){o[p]=n[p]}}},getStepTarget:function(n){if(typeof n.target==="string"){return document.getElementById(n.target)}return n.target},setState:function(p,q,r){var n="",o;if(e){localStorage.setItem(p,q)}else{if(r){o=new Date();o.setTime(o.getTime()+(r*24*60*60*1000));n="; expires="+o.toGMTString()}document.cookie=p+"="+q+n+"; path=/"}},getState:function(o){var q=o+"=",n=document.cookie.split(";"),p,r;if(e){return localStorage.getItem(o)}else{for(p=0;p<n.length;p++){r=n[p];while(r.charAt(0)===" "){r=r.substring(1,r.length)}if(r.indexOf(q)===0){return r.substring(q.length,r.length)}}return null}},clearState:function(n){if(e){localStorage.removeItem(n)}else{this.setState(n,"",-1)}}};i={next:[],prev:[],start:[],end:[],error:[],close:[]};l={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"};f=function(s){var o=false,n,r=function(v,u){var t=document.createElement("input");t.setAttribute("id",v);t.setAttribute("type","button");t.setAttribute("value",u);k.addClass(t,"hopscotch-nav-button");if(v.indexOf("prev")>=0){k.addClass(t,"prev")}else{k.addClass(t,"next")}return t},p=function(u,t,w){var v="hide";if(w){v="hide-all"}if(typeof t===j){t=true}if(t){k.removeClass(u,v)}else{k.addClass(u,v)}},q=function(A,w,H){var D,t,B,v,y,z,C,x,G=k.getStepTarget(w),u=A.element,F=A.arrowEl,E=k.getPixelValue(w.arrowOffset);H=k.valOrDefault(H,true);D=k.getPixelValue(w.width)||s.bubbleWidth;B=k.valOrDefault(w.padding,s.bubblePadding);bubbleBorder=k.valOrDefault(w.padding,s.bubbleBorder);k.removeClass(u,"bounce-down bounce-up bounce-left bounce-right");v=G.getBoundingClientRect();if(w.orientation==="top"){t=u.offsetHeight;C=(v.top-t)-s.arrowWidth;x=v.left;z="bounce-down"}else{if(w.orientation==="bottom"){C=v.bottom+s.arrowWidth;x=v.left;z="bounce-up"}else{if(w.orientation==="left"){C=v.top;x=v.left-D-2*B-2*bubbleBorder-s.arrowWidth;z="bounce-right"}else{if(w.orientation==="right"){C=v.top;x=v.right+s.arrowWidth;z="bounce-left"}}}}if(!E){F.style.top="";F.style.left=""}else{if(w.orientation==="top"||w.orientation==="bottom"){F.style.left=E+"px"}else{if(w.orientation==="left"||w.orientation==="right"){F.style.top=E+"px"}}}x+=k.getPixelValue(w.xOffset);C+=k.getPixelValue(w.yOffset);C+=k.getScrollTop();x+=k.getScrollLeft();if(s.animate){if(!d&&c&&s.animate){$(u).animate({top:C+"px",left:x+"px"})}else{u.style.top=C+"px";u.style.left=x+"px"}}else{u.style.top=C+"px";u.style.left=x+"px";if(H){y=s.smoothScroll?s.scrollDuration:0;setTimeout(function(){k.addClass(u,z)},y);setTimeout(function(){k.removeClass(u,z)},y+2000)}}};this.init=function(){var w=document.createElement("div"),x=document.createElement("div"),v=document.createElement("div"),u=this,y=false,t;this.element=w;this.containerEl=x;this.titleEl=document.createElement("h3");this.numberEl=document.createElement("span");this.contentEl=document.createElement("p");w.setAttribute("id","hopscotch-bubble");k.addClass(w,"animated");x.setAttribute("id","hopscotch-bubble-container");this.numberEl.setAttribute("id","hopscotch-bubble-number");x.appendChild(this.numberEl);v.appendChild(this.titleEl);v.appendChild(this.contentEl);v.setAttribute("id","hopscotch-bubble-content");x.appendChild(v);w.appendChild(x);this.initNavButtons();if(s&&s.showCloseButton){this.initCloseButton()}this.initArrow();window.onresize=function(){if(y||!o){return}y=true;t=setTimeout(function(){q(u,n,false);y=false},200)};document.body.appendChild(w);return this};this.initNavButtons=function(){var t=document.createElement("div");this.prevBtnEl=r("hopscotch-prev",l.prevBtn);this.nextBtnEl=r("hopscotch-next",l.nextBtn);this.doneBtnEl=r("hopscotch-done",l.doneBtn);k.addClass(this.doneBtnEl,"hide");t.appendChild(this.prevBtnEl);t.appendChild(this.nextBtnEl);t.appendChild(this.doneBtnEl);k.addClickListener(this.prevBtnEl,function(u){window.hopscotch.prevStep()});k.addClickListener(this.nextBtnEl,function(u){window.hopscotch.nextStep()});k.addClickListener(this.doneBtnEl,window.hopscotch.endTour);t.setAttribute("id","hopscotch-actions");this.buttonsEl=t;this.containerEl.appendChild(t);return this};this.initCloseButton=function(){var t=document.createElement("a");t.setAttribute("id","hopscotch-bubble-close");t.setAttribute("href","#");t.setAttribute("title",l.closeTooltip);t.innerHTML="x";k.addClickListener(t,function(v){var u=hopscotch.getCurrStepNum(),w=hopscotch.getCurrTour(),x=(u===w.steps.length-1);k.invokeCallbacks("close",[w.id,u]);window.hopscotch.endTour(true,x);if(v.preventDefault){v.preventDefault()}else{if(event){event.returnValue=false}}});this.closeBtnEl=t;this.containerEl.appendChild(t);return this};this.initArrow=function(){var t,u;this.arrowEl=document.createElement("div");this.arrowEl.setAttribute("id","hopscotch-bubble-arrow-container");u=document.createElement("div");u.className="hopscotch-bubble-arrow-border";t=document.createElement("div");t.className="hopscotch-bubble-arrow";this.arrowEl.appendChild(u);this.arrowEl.appendChild(t);this.element.appendChild(this.arrowEl);return this};this.renderStep=function(v,A,w,x,B){var C=this,u=k.valOrDefault(v.showNextButton,s.showNextButton),t=k.valOrDefault(v.showPrevButton,s.showPrevButton),z,y;n=v;this.setTitle(v.title?v.title:"");this.setContent(v.content?v.content:"");this.setNum(A);this.showPrevButton(this.prevBtnEl&&t&&(A>0||w>0));this.showNextButton(this.nextBtnEl&&u&&!x);this.nextBtnEl.setAttribute("value",v.showSkip?l.skipBtn:l.nextBtn);if(v.showSkip){}if(x){k.removeClass(this.doneBtnEl,"hide")}else{k.addClass(this.doneBtnEl,"hide")}this.setArrow(v.orientation);z=k.getPixelValue(v.width)||s.bubbleWidth;y=k.valOrDefault(v.padding,s.bubblePadding);this.containerEl.style.width=z+"px";this.containerEl.style.padding=y+"px";if(v.orientation==="top"){setTimeout(function(){q(C,v);if(B){B()}},5)}else{q(this,v);if(B){B()}}return this};this.setTitle=function(t){if(t){this.titleEl.innerHTML=t;k.removeClass(this.titleEl,"hide")}else{k.addClass(this.titleEl,"hide")}return this};this.setContent=function(t){if(t){this.contentEl.innerHTML=t;k.removeClass(this.contentEl,"hide")}else{k.addClass(this.contentEl,"hide")}return this};this.setNum=function(t){if(l.stepNums&&t<l.stepNums.length){t=l.stepNums[t]}else{t=t+1}this.numberEl.innerHTML=t};this.setArrow=function(t){if(t==="top"){this.arrowEl.className="down"}else{if(t==="bottom"){this.arrowEl.className="up"}else{if(t==="left"){this.arrowEl.className="right"}else{if(t==="right"){this.arrowEl.className="left"}}}}};this.show=function(){var t=this;if(s.animate){setTimeout(function(){k.addClass(t.element,"animate")},50)}k.removeClass(this.element,"hide");o=true;return this};this.hide=function(){k.addClass(this.element,"hide");k.removeClass(this.element,"animate");o=false;return this};this.showPrevButton=function(t,u){p(this.prevBtnEl,t,u)};this.showNextButton=function(t,u){p(this.nextBtnEl,t,u)};this.showCloseButton=function(t,u){p(this.closeBtnEl,t,u)};this.initAnimate=function(){var t=this;setTimeout(function(){k.addClass(t.element,"animate")},50)};this.removeAnimate=function(){k.removeClass(this.element,"animate")};this.init()};m=function(o){var y,q,u,p,z,C,t,v,r,s=function(){if(!y){y=new f(q)}return y},B=function(){var D=u.steps[p];return(D.length>0)?D[z]:D},A=function(){var D=u.steps[p].length;if(z<D-1){++z;return true}else{if(p<u.steps.length-1){++p;z=n()?0:undefined;return true}}return false},x=function(){var D;if(z>0){--z;return true}else{if(p>0){D=u.steps[--p].length;if(D){z=D-1}else{z=undefined}return true}}return false},n=function(){return u.steps[p].length>0},w=function(){var T=s().element,P=k.getPixelValue(T.style.top),O=P+k.getPixelValue(T.offsetHeight),M=k.getStepTarget(B()),U=M.getBoundingClientRect(),R=U.top+k.getScrollTop(),N=U.bottom+k.getScrollTop(),K=(P<R)?P:R,D=(O>N)?O:N,Q=k.getScrollTop(),F=Q+k.getWindowHeight(),G=K-q.scrollTopMargin,E,J,I,S,H,L;if(c){$("body, html").animate({scrollTop:G},q.scrollDuration);return}else{if(typeof YAHOO!==j&&typeof YAHOO.env!==j&&typeof YAHOO.env.ua!==j&&typeof YAHOO.util!==j&&typeof YAHOO.util.Scroll!==j){E=YAHOO.env.ua.webkit?document.body:document.documentElement;I=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:undefined;J=new YAHOO.util.Scroll(E,{scroll:{to:[0,G]}},q.scrollDuration/1000,I);J.animate();return}}if(G<0){G=0}if(K>=Q&&K<=Q+q.scrollTopMargin){return}if(K<Q||D>F){if(q.smoothScroll){S=(Q>K)?-1:1;H=Math.abs(Q-G)/(q.scrollDuration/10);L=setInterval(function(){var W=k.getScrollTop(),V=W+(S*H);if((S>0&&V>=G)||S<0&&V<=G){V=G;clearInterval(L)}window.scrollTo(0,V);if(k.getScrollTop()===W){clearInterval(L)}},10)}else{window.scrollTo(0,G)}}};this.init=function(){if(o){this.configure(o)}return this};this.loadTour=function(I){var G={},E,J,F,D,H;u=I;for(J in I){if(I.hasOwnProperty(J)&&J!=="id"&&J!=="steps"){G[J]=I[J]}}q={};r.call(this,G,true);D=k.getState(q.cookieName);if(D){H=D.split(":");C=H[0];t=H[1];v=undefined;F=t.split("-");if(F.length>1){t=parseInt(F[0],10);v=parseInt(F[1],10)}else{t=parseInt(t,10)}if(H.length>2&&H[2]==="mp"){if(v&&v<u.steps[t].length-1){++v}else{if(t<u.steps.length-1){++t;if(u.steps[t].length>0){v=0}else{v=undefined}}}}}E=s();E.showPrevButton(q.showPrevButton,true);E.showNextButton(q.showNextButton,true);return this};this.startTour=function(G,F){var D,E;if(!u){throw"Need to load a tour before you start it!"}if(document.readyState!=="complete"){b=true;return}if(typeof G!==j){p=G;z=F}else{if(u.id===C&&typeof t!==j){p=t;z=v;E=B();if(!k.getStepTarget(E)){x();E=B();if(!k.getStepTarget(E)){this.endTour(false);return}}}else{p=0}}if(!z&&n()){z=0}if(p===0&&!z){k.invokeCallbacks("start",[u.id])}this.showStep(p,z);D=s().show();if(q.animate){D.initAnimate()}this.isActive=true;return this};this.showStep=function(H,F){var K=u.steps,I=K[H],G=K.length,E=u.id+":"+H,D=s(),J;p=H;z=F;if(typeof F!==j&&n()){I=I[F];E+="-"+F}J=(H===G-1)||(F>=I.length-1);D.renderStep(I,H,F,J,w);if(I.multiPage){E+=":mp"}k.setState(q.cookieName,E,1);return this};this.prevStep=function(){var E=B(),D=false;k.invokeCallbacks("prev",[u.id,p]);if(E.onPrev){E.onPrev()}if(q.skipIfNoElement){while(!D&&x()){E=B();D=k.getStepTarget(E)}if(!D){this.endTour()}}else{if(x()){E=B();if(!k.getStepTarget(E)){k.invokeCallbacks("error",[u.id,p]);return}}}this.showStep(p,z);return this};this.nextStep=function(){var E=B(),D=false;k.invokeCallbacks("next",[u.id,p]);if(E.onNext){E.onNext()}if(q.skipIfNoElement){while(!D&&A()){E=B();D=k.getStepTarget(E)}if(!D){this.endTour()}}else{if(A()){E=B();if(!k.getStepTarget(E)){k.invokeCallbacks("error",[u.id,p]);this.endTour();return}}}this.showStep(p,z);return this};this.endTour=function(F,E){var D=s();F=k.valOrDefault(F,true);E=k.valOrDefault(E,true);p=0;z=undefined;t=undefined;D.hide();if(F){k.clearState(q.cookieName)}this.isActive=false;if(E){k.invokeCallbacks("end",[u.id])}hopscotch.removeCallbacks(true);return this};this.getCurrTour=function(){return u};this.getCurrStepNum=function(){return p};this.getCurrSubstepNum=function(){return z};this.addCallback=function(F,D,E){if(D){i[F].push({cb:D,fromTour:E})}};this.removeCallbacks=function(E){var H,F,D,G;for(G in i){if(E){H=i[G];for(F=0,D=H.length;F<D;++F){if(H[F].fromTour){H.splice(F--,1);--D}}}else{i[G]=[]}}};r=function(E,F){var D;if(!q){q={}}k.extend(q,E);q.animate=k.valOrDefault(q.animate,false);q.smoothScroll=k.valOrDefault(q.smoothScroll,true);q.scrollDuration=k.valOrDefault(q.scrollDuration,1000);q.scrollTopMargin=k.valOrDefault(q.scrollTopMargin,200);q.showCloseButton=k.valOrDefault(q.showCloseButton,true);q.showPrevButton=k.valOrDefault(q.showPrevButton,false);q.showNextButton=k.valOrDefault(q.showNextButton,true);q.bubbleWidth=k.valOrDefault(q.bubbleWidth,280);q.bubblePadding=k.valOrDefault(q.bubblePadding,15);q.bubbleBorder=k.valOrDefault(q.bubbleBorder,6);q.arrowWidth=k.valOrDefault(q.arrowWidth,20);q.skipIfNoElement=k.valOrDefault(q.skipIfNoElement,false);q.cookieName=k.valOrDefault(q.cookieName,"hopscotch.tour.state");if(E){k.extend(l,E.i18n)}this.addCallback("next",E.onNext,F);this.addCallback("prev",E.onPrev,F);this.addCallback("start",E.onStart,F);this.addCallback("end",E.onEnd,F);this.addCallback("error",E.onError,F);this.addCallback("close",E.onClose,F);D=s();if(q.animate){D.initAnimate()}else{D.removeAnimate()}D.showPrevButton(q.showPrevButton,true);D.showNextButton(q.showNextButton,true);D.showCloseButton(q.showCloseButton,true);return this};this.configure=function(D){r.call(this,D,false)};this.init(o)};window.hopscotch=new m()}());