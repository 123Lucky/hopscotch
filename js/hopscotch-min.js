(function(){var l,f,k,j,a,i="undefined",h=false,b=false,c=(typeof window.jQuery!==i),e=(typeof window.localStorage!==i),g=document.body.style,d=(typeof g.MozTransition!==i||typeof g.MsTransition!==i||typeof g.webkitTransition!==i||typeof g.OTransition!==i||typeof g.transition!==i);if(window.hopscotch){return}a=function(){h=true;if(b){window.hopscotch.startTour()}};if(window.addEventListener){window.addEventListener("load",a)}else{if(window.attachEvent){window.attachEvent("onload",a)}}j={addClass:function(o,q){var n,p,m;if(c){$(o).addClass(q)}else{if(o.className.length===0){o.className=q}else{n=o.className.split(" ");for(p=0,m=n.length;p<m;++p){if(n[p]===q){return}}n.splice(0,0,q);o.className=n.join(" ")}}},removeClass:function(m,r){var q,u,s,p,n,t,o;if(c){$(m).removeClass(r)}else{u=r.split(" ");q=m.className.split(" ");for(p=0,t=u.length;p<t;++p){s=u[p];for(n=0,o=q.length;n<o;++n){if(q[n]===s){break}}if(n<o){q.splice(n,1)}}m.className=q.join(" ")}},getPixelValue:function(n){var m=typeof n;if(m==="number"){return n}if(m==="string"){return parseInt(n,10)}return 0},valOrDefault:function(n,m){return typeof n!==i?n:m},getScrollTop:function(){if(typeof window.pageYOffset!==i){return window.pageYOffset}else{return document.documentElement.scrollTop}},getScrollLeft:function(){if(typeof window.pageXOffset!==i){return window.pageXOffset}else{return document.documentElement.scrollLeft}},getWindowHeight:function(){return window.innerHeight?window.innerHeight:document.documentElement.clientHeight},getWindowWidth:function(){return window.innerWidth?window.innerWidth:document.documentElement.clientWidth},addClickListener:function(n,m){return n.addEventListener?n.addEventListener("click",m):n.attachEvent("onclick",m)},evtPreventDefault:function(m){if(m.preventDefault){m.preventDefault()}else{if(event){event.returnValue=false}}},extend:function(n,m){var o;for(o in m){if(m.hasOwnProperty(o)){n[o]=m[o]}}},setState:function(p,q,r){var m="",n,o;if(e){localStorage.setItem(p,q)}else{if(r){o=new Date();o.setTime(o.getTime()+(r*24*60*60*1000));m="; expires="+o.toGMTString()}document.cookie=p+"="+q+m+"; path=/"}},getState:function(n){var p=n+"=",m=document.cookie.split(";"),o,q;if(e){return localStorage.getItem(n)}else{for(var o=0;o<m.length;o++){q=m[o];while(q.charAt(0)===" "){q=q.substring(1,q.length)}if(q.indexOf(p)===0){return q.substring(p.length,q.length)}}return null}},clearState:function(m){if(e){localStorage.removeItem(m)}else{this.setState(m,"",-1)}}};k={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",closeTooltip:"Close"};f=function(t){var r,s,n,m=false,q=function(w,v){var u=document.createElement("input");u.setAttribute("id",w);u.setAttribute("type","button");u.setAttribute("value",v);j.addClass(u,"hopscotch-nav-button");return u},o=function(v,u,x){var w="hide";if(x){w="hide-all"}if(typeof u===i){u=true}if(u){j.removeClass(v,w)}else{j.addClass(v,w)}},p=function(B,x,I){var E,u,C,w,z,A,D,y,H=document.getElementById(x.targetId),v=B.element,G=B.arrowEl,F=j.getPixelValue(x.arrowOffset);I=j.valOrDefault(I,true);E=j.getPixelValue(x.width)||t.bubbleWidth;C=j.valOrDefault(x.padding,t.bubblePadding);bubbleBorder=j.valOrDefault(x.padding,t.bubbleBorder);j.removeClass(v,"bounce-down bounce-up bounce-left bounce-right");w=H.getBoundingClientRect();if(x.orientation==="top"){u=v.offsetHeight;D=(w.top-u)-t.arrowWidth;y=w.left;A="bounce-down"}else{if(x.orientation==="bottom"){D=w.bottom+t.arrowWidth;y=w.left;A="bounce-up"}else{if(x.orientation==="left"){D=w.top;y=w.left-E-2*C-2*bubbleBorder-t.arrowWidth;A="bounce-right"}else{if(x.orientation==="right"){D=w.top;y=w.right+t.arrowWidth;A="bounce-left"}}}}if(!F){G.style.top="";G.style.left=""}else{if(x.orientation==="top"||x.orientation==="bottom"){G.style.left=F+"px"}else{if(x.orientation==="left"||x.orientation==="right"){G.style.top=F+"px"}}}y+=j.getPixelValue(x.xOffset);D+=j.getPixelValue(x.yOffset);D+=j.getScrollTop();y+=j.getScrollLeft();if(t.animate){if(!d&&c&&t.animate){$(v).animate({top:D+"px",left:y+"px"})}else{v.style.top=D+"px";v.style.left=y+"px"}}else{v.style.top=D+"px";v.style.left=y+"px";if(I){z=t.smoothScroll?t.scrollDuration:0;setTimeout(function(){j.addClass(v,A)},z);setTimeout(function(){j.removeClass(v,A)},z+2000)}}};this.init=function(){var x=document.createElement("div"),y=document.createElement("div"),w=this,v=false,u;this.element=x;this.containerEl=y;this.titleEl=document.createElement("h3");this.numberEl=document.createElement("span");this.contentEl=document.createElement("p");x.setAttribute("id","hopscotch-bubble");j.addClass(x,"animated");y.setAttribute("id","hopscotch-bubble-container");this.numberEl.setAttribute("id","hopscotch-bubble-number");y.appendChild(this.numberEl);y.appendChild(this.titleEl);y.appendChild(this.contentEl);x.appendChild(y);this.initNavButtons();if(t&&t.showCloseButton){this.initCloseButton()}this.initArrow();window.onresize=function(){if(v||!m){return}v=true;u=setTimeout(function(){p(w,n,false);v=false},200)};document.body.appendChild(x);return this};this.initNavButtons=function(){var u=document.createElement("div");this.prevBtnEl=q("hopscotch-prev",k.prevBtn);this.nextBtnEl=q("hopscotch-next",k.nextBtn);this.doneBtnEl=q("hopscotch-done",k.doneBtn);j.addClass(this.doneBtnEl,"hide");u.appendChild(this.prevBtnEl);u.appendChild(this.nextBtnEl);u.appendChild(this.doneBtnEl);j.addClickListener(this.prevBtnEl,function(v){if(r){r()}window.hopscotch.prevStep()});j.addClickListener(this.nextBtnEl,function(v){if(s){s()}window.hopscotch.nextStep()});j.addClickListener(this.doneBtnEl,window.hopscotch.endTour);u.setAttribute("id","hopscotch-actions");this.buttonsEl=u;this.containerEl.appendChild(u);return this};this.initCloseButton=function(){var u=document.createElement("a");u.setAttribute("id","hopscotch-bubble-close");u.setAttribute("href","#");u.setAttribute("title",k.closeTooltip);u.innerHTML="x";j.addClickListener(u,function(v){window.hopscotch.endTour();j.evtPreventDefault(v)});this.closeBtnEl=u;this.containerEl.appendChild(u);return this};this.initArrow=function(){var u;this.arrowEl=document.createElement("div");this.arrowEl.setAttribute("id","hopscotch-bubble-arrow-container");u=document.createElement("div");u.className="hopscotch-bubble-arrow-border";arrowEl=document.createElement("div");arrowEl.className="hopscotch-bubble-arrow";this.arrowEl.appendChild(u);this.arrowEl.appendChild(arrowEl);this.element.appendChild(this.arrowEl)};this.renderStep=function(w,A,x,B){var C=this,v=j.valOrDefault(w.showNextButton,t.showNextButton),u=j.valOrDefault(w.showPrevButton,t.showPrevButton),z,y;n=w;this.setTitle(w.title?w.title:"");this.setContent(w.content?w.content:"");this.setNum(A);this.showPrevButton(this.prevBtnEl&&u&&A>0);this.showNextButton(this.nextBtnEl&&v&&!x);if(x){j.removeClass(this.doneBtnEl,"hide")}else{j.addClass(this.doneBtnEl,"hide")}this.setArrow(w.orientation);z=j.getPixelValue(w.width)||t.bubbleWidth;y=j.valOrDefault(w.padding,t.bubblePadding);this.containerEl.style.width=z+"px";this.containerEl.style.padding=y+"px";if(w.orientation==="top"){setTimeout(function(){p(C,w);if(B){B()}},5)}else{p(this,w);if(B){B()}}r=w.onPrev;s=w.onNext;return this};this.setTitle=function(u){if(u){this.titleEl.innerHTML=u;j.removeClass(this.titleEl,"hide")}else{j.addClass(this.titleEl,"hide")}return this};this.setContent=function(u){if(u){this.contentEl.innerHTML=u;j.removeClass(this.contentEl,"hide")}else{j.addClass(this.contentEl,"hide")}return this};this.setNum=function(u){if(k.stepNums&&u<k.stepNums.length){u=k.stepNums[u]}else{u=u+1}this.numberEl.innerHTML=u};this.setArrow=function(u){if(u==="top"){this.arrowEl.className="down"}else{if(u==="bottom"){this.arrowEl.className="up"}else{if(u==="left"){this.arrowEl.className="right"}else{if(u==="right"){this.arrowEl.className="left"}}}}};this.show=function(){var u=this;if(t.animate){setTimeout(function(){j.addClass(u.element,"animate")},50)}j.removeClass(this.element,"hide");m=true;return this};this.hide=function(){j.addClass(this.element,"hide");j.removeClass(this.element,"animate");m=false;return this};this.showPrevButton=function(u,v){o(this.prevBtnEl,u,v)};this.showNextButton=function(u,v){o(this.nextBtnEl,u,v)};this.showCloseButton=function(u,v){o(this.closeBtnEl,u,v)};this.initAnimate=function(){var u=this;setTimeout(function(){j.addClass(u.element,"animate")},50)};this.removeAnimate=function(){j.removeClass(this.element,"animate")};this.init()};l=function(m){var t,o,r,n,v,q,p=function(){if(!t){t=new f(o)}return t},u=function(){return r.steps[n]},s=function(){var M=p().element,I=j.getPixelValue(M.style.top),H=I+j.getPixelValue(M.offsetHeight),F=document.getElementById(u().targetId),N=F.getBoundingClientRect(),K=N.top+j.getScrollTop(),G=N.bottom+j.getScrollTop(),D=(I<K)?I:K,w=(H>G)?H:G,J=j.getScrollTop(),y=J+j.getWindowHeight(),z=D-o.scrollTopMargin,x,C,B,L,A,E;if(c){$("body, html").animate({scrollTop:z},o.scrollDuration);return}else{if(typeof YAHOO!==i&&typeof YAHOO.env!==i&&typeof YAHOO.env.ua!==i&&typeof YAHOO.util!==i&&typeof YAHOO.util.Scroll!==i){x=YAHOO.env.ua.webkit?document.body:document.documentElement;B=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:undefined;C=new YAHOO.util.Scroll(x,{scroll:{to:[0,z]}},o.scrollDuration/1000,B);C.animate();return}}if(z<0){z=0}if(D>=J&&D<=J+o.scrollTopMargin){return}if(D<J||w>y){if(o.smoothScroll){L=(J>D)?-1:1;A=Math.abs(J-z)/(o.scrollDuration/10);E=setInterval(function(){var P=j.getScrollTop(),O=P+(L*A);if((L>0&&O>=z)||L<0&&O<=z){O=z;clearInterval(E)}window.scrollTo(0,O);if(j.getScrollTop()===P){clearInterval(E)}},10)}else{window.scrollTo(0,z)}}};this.init=function(){var w,x;if(m){this.configure(m)}return this};this.loadTour=function(y){var x={},w,z;r=y;for(z in y){if(y.hasOwnProperty(z)&&z!=="id"&&z!=="steps"){x[z]=y[z]}}this.configure(x);tourState=j.getState(o.cookieName);if(tourState){tourPair=tourState.split(":");v=tourPair[0];q=parseInt(tourPair[1],10);if(tourPair.length>2&&tourPair[2]==="mp"){++q}}w=p();w.showPrevButton(o.showPrevButton,true);w.showNextButton(o.showNextButton,true);return this};this.startTour=function(){var w;if(!r){throw"Need to load a tour before you start it!"}if(document.readyState!=="complete"){b=true;return}if(r.id===v&&typeof q!==i){n=q;if(!document.getElementById(r.steps[n].targetId)){if(n<=0||!document.getElementById(r.steps[--n].targetId)){this.endTour(false);return}}}else{n=0}this.showStep(n);w=p().show();if(o.animate){w.initAnimate()}this.isActive=true;return this};this.showStep=function(z){var A=r.steps[z],y=r.steps.length,x=r.id+":"+z,w=p();if(!r){throw"No tour currently selected!"}n=z;w.renderStep(A,z,(z===y-1),s);if(A.multiPage){x+=":mp"}j.setState(o.cookieName,x,1);return this};this.prevStep=function(){if(n>0){this.showStep(--n)}return this};this.nextStep=function(){if(o.onNext){o.onNext(u(),n)}if(n<r.steps.length-1){this.showStep(++n)}return this};this.endTour=function(x){var w=p();x=j.valOrDefault(x,true);w.hide();n=q=0;if(x){j.clearState(o.cookieName)}this.isActive=false;return this};this.configure=function(w){if(!o){o={}}j.extend(o,w);o.animate=j.valOrDefault(o.animate,false);o.smoothScroll=j.valOrDefault(o.smoothScroll,true);o.scrollDuration=j.valOrDefault(o.scrollDuration,1000);o.scrollTopMargin=j.valOrDefault(o.scrollTopMargin,50);o.showCloseButton=j.valOrDefault(o.showCloseButton,true);o.showPrevButton=j.valOrDefault(o.showPrevButton,false);o.showNextButton=j.valOrDefault(o.showNextButton,true);o.bubbleWidth=j.valOrDefault(o.bubbleWidth,280);o.bubblePadding=j.valOrDefault(o.bubblePadding,10);o.bubbleBorder=j.valOrDefault(o.bubbleBorder,6);o.arrowWidth=j.valOrDefault(o.arrowWidth,20);o.onNext=j.valOrDefault(o.onNext,null);o.cookieName=j.valOrDefault(o.cookieName,"hopscotch.tour.state");if(w){j.extend(k,w.i18n)}if(o.animate){p().initAnimate()}else{p().removeAnimate()}p().showPrevButton(o.showPrevButton,true);p().showNextButton(o.showNextButton,true);p().showCloseButton(o.showCloseButton,true);return this};this.init(m);this.clearCookie=function(){j.clearState(o.cookieName)}};window.hopscotch=new l()}());