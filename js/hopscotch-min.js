(function(){var k,d,i,h,f,a,g="undefined",b=false,j=(typeof window.sessionStorage!==g),e=document.body.style,c=(typeof e.MozTransition!==g||typeof e.MsTransition!==g||typeof e.webkitTransition!==g||typeof e.OTransition!==g||typeof e.transition!==g);if(window.hopscotch){return}a=function(){docLoaded=true;if(b){window.hopscotch.startTour()}};if(window.addEventListener){window.addEventListener("load",a)}else{if(window.attachEvent){window.attachEvent("onload",a)}}h={addClass:function(n,p){var m,o,l;if(n.className.length===0){n.className=p}else{m=n.className.split(" ");for(o=0,l=m.length;o<l;++o){if(m[o]===p){return}}m.splice(0,0,p);n.className=m.join(" ")}},removeClass:function(l,q){var p,t,r,o,m,s,n;t=q.split(" ");p=l.className.split(" ");for(o=0,s=t.length;o<s;++o){r=t[o];for(m=0,n=p.length;m<n;++m){if(p[m]===r){break}}if(m<n){p.splice(m,1)}}l.className=p.join(" ")},getPixelValue:function(m){var l=typeof m;if(l==="number"){return m}if(l==="string"){return parseInt(m,10)}return 0},valOrDefault:function(m,l){return typeof m!==g?m:l},invokeCallbacks:function(p,m){var o=f[p],n=0,l=o.length;for(;n<l;++n){o[n].cb.apply(this,m)}},getScrollTop:function(){if(typeof window.pageYOffset!==g){return window.pageYOffset}else{return document.documentElement.scrollTop}},getScrollLeft:function(){if(typeof window.pageXOffset!==g){return window.pageXOffset}else{return document.documentElement.scrollLeft}},getWindowHeight:function(){return window.innerHeight?window.innerHeight:document.documentElement.clientHeight},getWindowWidth:function(){return window.innerWidth?window.innerWidth:document.documentElement.clientWidth},addClickListener:function(m,l){return m.addEventListener?m.addEventListener("click",l):m.attachEvent("onclick",l)},evtPreventDefault:function(l){if(l.preventDefault){l.preventDefault()}else{if(event){event.returnValue=false}}},extend:function(m,l){var n;for(n in l){if(l.hasOwnProperty(n)){m[n]=l[n]}}},getStepTarget:function(l){if(typeof l.target==="string"){return document.getElementById(l.target)}return l.target},setState:function(n,o,p){var l="",m;if(j){sessionStorage.setItem(n,o)}else{if(p){m=new Date();m.setTime(m.getTime()+(p*24*60*60*1000));l="; expires="+m.toGMTString()}document.cookie=n+"="+o+l+"; path=/"}},getState:function(m){var o=m+"=",l=document.cookie.split(";"),n,p;if(j){return localStorage.getItem(m)}else{for(n=0;n<l.length;n++){p=l[n];while(p.charAt(0)===" "){p=p.substring(1,p.length)}if(p.indexOf(o)===0){return p.substring(o.length,p.length)}}return null}},clearState:function(l){if(j){sessionStorage.removeItem(l)}else{this.setState(l,"",-1)}}};f={next:[],prev:[],start:[],end:[],error:[],close:[]};i={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"};d=function(q){var m=false,l,p=function(t,s){var r=document.createElement("input");r.setAttribute("id",t);r.setAttribute("type","button");r.setAttribute("value",s);h.addClass(r,"hopscotch-nav-button");if(t.indexOf("prev")>=0){h.addClass(r,"prev")}else{h.addClass(r,"next")}return r},n=function(s,r,u){var t="hide";if(u){t="hide-all"}if(typeof r===g){r=true}if(r){h.removeClass(s,t)}else{h.addClass(s,t)}},o=function(y,u,F){var B,r,z,t,w,x,A,v,E=h.getStepTarget(u),s=y.element,D=y.arrowEl,C=h.getPixelValue(u.arrowOffset);F=h.valOrDefault(F,true);B=h.getPixelValue(u.width)||q.bubbleWidth;z=h.valOrDefault(u.padding,q.bubblePadding);bubbleBorder=h.valOrDefault(u.padding,q.bubbleBorder);h.removeClass(s,"bounce-down bounce-up bounce-left bounce-right");t=E.getBoundingClientRect();if(u.orientation==="top"){r=s.offsetHeight;A=(t.top-r)-q.arrowWidth;v=t.left;x="bounce-down"}else{if(u.orientation==="bottom"){A=t.bottom+q.arrowWidth;v=t.left;x="bounce-up"}else{if(u.orientation==="left"){A=t.top;v=t.left-B-2*z-2*bubbleBorder-q.arrowWidth;x="bounce-right"}else{if(u.orientation==="right"){A=t.top;v=t.right+q.arrowWidth;x="bounce-left"}}}}if(!C){D.style.top="";D.style.left=""}else{if(u.orientation==="top"||u.orientation==="bottom"){D.style.left=C+"px"}else{if(u.orientation==="left"||u.orientation==="right"){D.style.top=C+"px"}}}v+=h.getPixelValue(u.xOffset);A+=h.getPixelValue(u.yOffset);A+=h.getScrollTop();v+=h.getScrollLeft();if(q.animate){s.style.top=A+"px";s.style.left=v+"px"}else{s.style.top=A+"px";s.style.left=v+"px";if(F){w=q.smoothScroll?q.scrollDuration:0;setTimeout(function(){h.addClass(s,x)},w);setTimeout(function(){h.removeClass(s,x)},w+2000)}}};this.init=function(){var u=document.createElement("div"),v=document.createElement("div"),t=document.createElement("div"),s=this,w=false,r;this.element=u;this.containerEl=v;this.titleEl=document.createElement("h3");this.numberEl=document.createElement("span");this.contentEl=document.createElement("p");u.setAttribute("id","hopscotch-bubble");h.addClass(u,"animated");v.setAttribute("id","hopscotch-bubble-container");this.numberEl.setAttribute("id","hopscotch-bubble-number");v.appendChild(this.numberEl);t.appendChild(this.titleEl);t.appendChild(this.contentEl);t.setAttribute("id","hopscotch-bubble-content");v.appendChild(t);u.appendChild(v);this.initNavButtons();if(q&&q.showCloseButton){this.initCloseButton()}this.initArrow();window.onresize=function(){if(w||!m){return}w=true;r=setTimeout(function(){o(s,l,false);w=false},200)};this.hide();document.body.appendChild(u);return this};this.initNavButtons=function(){var r=document.createElement("div");this.prevBtnEl=p("hopscotch-prev",i.prevBtn);this.nextBtnEl=p("hopscotch-next",i.nextBtn);this.doneBtnEl=p("hopscotch-done",i.doneBtn);h.addClass(this.doneBtnEl,"hide");r.appendChild(this.prevBtnEl);r.appendChild(this.nextBtnEl);r.appendChild(this.doneBtnEl);h.addClickListener(this.prevBtnEl,function(s){window.hopscotch.prevStep()});h.addClickListener(this.nextBtnEl,function(s){window.hopscotch.nextStep()});h.addClickListener(this.doneBtnEl,window.hopscotch.endTour);r.setAttribute("id","hopscotch-actions");this.buttonsEl=r;this.containerEl.appendChild(r);return this};this.initCloseButton=function(){var r=document.createElement("a");r.setAttribute("id","hopscotch-bubble-close");r.setAttribute("href","#");r.setAttribute("title",i.closeTooltip);r.innerHTML="x";h.addClickListener(r,function(t){var s=hopscotch.getCurrStepNum(),u=hopscotch.getCurrTour(),v=(s===u.steps.length-1);h.invokeCallbacks("close",[u.id,s]);window.hopscotch.endTour(true,v);if(t.preventDefault){t.preventDefault()}else{if(event){event.returnValue=false}}});this.closeBtnEl=r;this.containerEl.appendChild(r);return this};this.initArrow=function(){var r,s;this.arrowEl=document.createElement("div");this.arrowEl.setAttribute("id","hopscotch-bubble-arrow-container");s=document.createElement("div");s.className="hopscotch-bubble-arrow-border";r=document.createElement("div");r.className="hopscotch-bubble-arrow";this.arrowEl.appendChild(s);this.arrowEl.appendChild(r);this.element.appendChild(this.arrowEl);return this};this.renderStep=function(t,y,u,v,z){var A=this,s=h.valOrDefault(t.showNextButton,q.showNextButton),r=h.valOrDefault(t.showPrevButton,q.showPrevButton),x,w;l=t;this.setTitle(t.title?t.title:"");this.setContent(t.content?t.content:"");this.setNum(y);this.showPrevButton(this.prevBtnEl&&r&&(y>0||u>0));this.showNextButton(this.nextBtnEl&&s&&!v);this.nextBtnEl.setAttribute("value",t.showSkip?i.skipBtn:i.nextBtn);if(t.showSkip){}if(v){h.removeClass(this.doneBtnEl,"hide")}else{h.addClass(this.doneBtnEl,"hide")}this.setArrow(t.orientation);x=h.getPixelValue(t.width)||q.bubbleWidth;w=h.valOrDefault(t.padding,q.bubblePadding);this.containerEl.style.width=x+"px";this.containerEl.style.padding=w+"px";if(t.orientation==="top"){setTimeout(function(){o(A,t);if(z){z()}},5)}else{o(this,t);if(z){z()}}return this};this.setTitle=function(r){if(r){this.titleEl.innerHTML=r;h.removeClass(this.titleEl,"hide")}else{h.addClass(this.titleEl,"hide")}return this};this.setContent=function(r){if(r){this.contentEl.innerHTML=r;h.removeClass(this.contentEl,"hide")}else{h.addClass(this.contentEl,"hide")}return this};this.setNum=function(r){if(i.stepNums&&r<i.stepNums.length){r=i.stepNums[r]}else{r=r+1}this.numberEl.innerHTML=r};this.setArrow=function(r){if(r==="top"){this.arrowEl.className="down"}else{if(r==="bottom"){this.arrowEl.className="up"}else{if(r==="left"){this.arrowEl.className="right"}else{if(r==="right"){this.arrowEl.className="left"}}}}};this.show=function(){var r=this;if(q.animate){setTimeout(function(){h.addClass(r.element,"animate")},50)}h.removeClass(this.element,"hide");m=true;return this};this.hide=function(){h.addClass(this.element,"hide");h.removeClass(this.element,"animate");m=false;return this};this.showPrevButton=function(r,s){n(this.prevBtnEl,r,s)};this.showNextButton=function(r,s){n(this.nextBtnEl,r,s)};this.showCloseButton=function(r,s){n(this.closeBtnEl,r,s)};this.initAnimate=function(){var r=this;setTimeout(function(){h.addClass(r.element,"animate")},50)};this.removeAnimate=function(){h.removeClass(this.element,"animate")};this.init()};k=function(m){var w,o,s,n,x,A,r,t,p,q=function(){if(!w){w=new d(o)}return w},z=function(){var B=s.steps[n];return(B.length>0)?B[x]:B},y=function(){var B=s.steps[n].length;if(x<B-1){++x;return true}else{if(n<s.steps.length-1){++n;x=l()?0:undefined;return true}}return false},v=function(){var B;if(x>0){--x;return true}else{if(n>0){B=s.steps[--n].length;if(B){x=B-1}else{x=undefined}return true}}return false},l=function(){return s.steps[n].length>0},u=function(){var R=q().element,N=h.getPixelValue(R.style.top),M=N+h.getPixelValue(R.offsetHeight),K=h.getStepTarget(z()),S=K.getBoundingClientRect(),P=S.top+h.getScrollTop(),L=S.bottom+h.getScrollTop(),I=(N<P)?N:P,B=(M>L)?M:L,O=h.getScrollTop(),D=O+h.getWindowHeight(),E=I-o.scrollTopMargin,C,H,G,Q,F,J;if(typeof YAHOO!==g&&typeof YAHOO.env!==g&&typeof YAHOO.env.ua!==g&&typeof YAHOO.util!==g&&typeof YAHOO.util.Scroll!==g){C=YAHOO.env.ua.webkit?document.body:document.documentElement;G=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:undefined;H=new YAHOO.util.Scroll(C,{scroll:{to:[0,E]}},o.scrollDuration/1000,G);H.animate();return}if(E<0){E=0}if(I>=O&&I<=O+o.scrollTopMargin){return}if(I<O||B>D){if(o.smoothScroll){Q=(O>I)?-1:1;F=Math.abs(O-E)/(o.scrollDuration/10);J=setInterval(function(){var U=h.getScrollTop(),T=U+(Q*F);if((Q>0&&T>=E)||Q<0&&T<=E){T=E;clearInterval(J)}window.scrollTo(0,T);if(h.getScrollTop()===U){clearInterval(J)}},10)}else{window.scrollTo(0,E)}}};this.init=function(){if(m){this.configure(m)}return this};this.loadTour=function(G){var E={},C,H,D,B,F;s=G;for(H in G){if(G.hasOwnProperty(H)&&H!=="id"&&H!=="steps"){E[H]=G[H]}}o={};p.call(this,E,true);B=h.getState(o.cookieName);if(B){F=B.split(":");A=F[0];r=F[1];t=undefined;D=r.split("-");if(D.length>1){r=parseInt(D[0],10);t=parseInt(D[1],10)}else{r=parseInt(r,10)}if(F.length>2&&F[2]==="mp"){if(t&&t<s.steps[r].length-1){++t}else{if(r<s.steps.length-1){++r;if(s.steps[r].length>0){t=0}else{t=undefined}}}}}C=q();C.showPrevButton(o.showPrevButton,true);C.showNextButton(o.showNextButton,true);return this};this.startTour=function(E,D){var B,C;if(!s){throw"Need to load a tour before you start it!"}if(document.readyState!=="complete"){b=true;return}if(typeof E!==g){n=E;x=D}else{if(s.id===A&&typeof r!==g){n=r;x=t;C=z();if(!h.getStepTarget(C)){v();C=z();if(!h.getStepTarget(C)){this.endTour(false);return}}}else{n=0}}if(!x&&l()){x=0}if(n===0&&!x){h.invokeCallbacks("start",[s.id])}this.showStep(n,x);B=q().show();if(o.animate){B.initAnimate()}this.isActive=true;return this};this.showStep=function(F,D){var I=s.steps,G=I[F],E=I.length,C=s.id+":"+F,B=q(),H;n=F;x=D;if(typeof D!==g&&l()){G=G[D];C+="-"+D}H=(F===E-1)||(D>=G.length-1);B.renderStep(G,F,D,H,u);if(G.multiPage){C+=":mp"}h.setState(o.cookieName,C,1);return this};this.prevStep=function(){var C=z(),B=false;h.invokeCallbacks("prev",[s.id,n]);if(C.onPrev){C.onPrev()}if(o.skipIfNoElement){while(!B&&v()){C=z();B=h.getStepTarget(C)}if(!B){this.endTour()}}else{if(v()){C=z();if(!h.getStepTarget(C)){h.invokeCallbacks("error",[s.id,n]);return}}}this.showStep(n,x);return this};this.nextStep=function(){var C=z(),B=false;h.invokeCallbacks("next",[s.id,n]);if(C.onNext){C.onNext()}if(o.skipIfNoElement){while(!B&&y()){C=z();B=h.getStepTarget(C)}if(!B){this.endTour()}}else{if(y()){C=z();if(!h.getStepTarget(C)){h.invokeCallbacks("error",[s.id,n]);this.endTour();return}}}this.showStep(n,x);return this};this.endTour=function(D,C){var B=q();D=h.valOrDefault(D,true);C=h.valOrDefault(C,true);n=0;x=undefined;r=undefined;B.hide();if(D){h.clearState(o.cookieName)}this.isActive=false;if(C){h.invokeCallbacks("end",[s.id])}hopscotch.removeCallbacks(true);return this};this.getCurrTour=function(){return s};this.getCurrStepNum=function(){return n};this.getCurrSubstepNum=function(){return x};this.addCallback=function(D,B,C){if(B){f[D].push({cb:B,fromTour:C})}return this};this.removeCallbacks=function(C){var F,D,B,E;for(E in f){if(C){F=f[E];for(D=0,B=F.length;D<B;++D){if(F[D].fromTour){F.splice(D--,1);--B}}}else{f[E]=[]}}return this};p=function(C,D){var B;if(!o){o={}}h.extend(o,C);o.animate=h.valOrDefault(o.animate,false);o.smoothScroll=h.valOrDefault(o.smoothScroll,true);o.scrollDuration=h.valOrDefault(o.scrollDuration,1000);o.scrollTopMargin=h.valOrDefault(o.scrollTopMargin,200);o.showCloseButton=h.valOrDefault(o.showCloseButton,true);o.showPrevButton=h.valOrDefault(o.showPrevButton,false);o.showNextButton=h.valOrDefault(o.showNextButton,true);o.bubbleWidth=h.valOrDefault(o.bubbleWidth,280);o.bubblePadding=h.valOrDefault(o.bubblePadding,15);o.bubbleBorder=h.valOrDefault(o.bubbleBorder,6);o.arrowWidth=h.valOrDefault(o.arrowWidth,20);o.skipIfNoElement=h.valOrDefault(o.skipIfNoElement,false);o.cookieName=h.valOrDefault(o.cookieName,"hopscotch.tour.state");if(C){h.extend(i,C.i18n)}this.addCallback("next",C.onNext,D);this.addCallback("prev",C.onPrev,D);this.addCallback("start",C.onStart,D);this.addCallback("end",C.onEnd,D);this.addCallback("error",C.onError,D);this.addCallback("close",C.onClose,D);B=q();if(o.animate){B.initAnimate()}else{B.removeAnimate()}B.showPrevButton(o.showPrevButton,true);B.showNextButton(o.showNextButton,true);B.showCloseButton(o.showCloseButton,true);return this};this.configure=function(B){return p.call(this,B,false)};this.init(m)};window.hopscotch=new k()}());