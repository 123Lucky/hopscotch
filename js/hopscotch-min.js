(function(){var l,f,k,j,a,i="undefined",h=false,b=false,c=(typeof window.jQuery!==i),e=(typeof window.localStorage!==i),g=document.body.style,d=(typeof g.MozTransition!==i||typeof g.MsTransition!==i||typeof g.webkitTransition!==i||typeof g.OTransition!==i||typeof g.transition!==i);if(window.hopscotch){return}a=function(){h=true;if(b){window.hopscotch.startTour()}};if(window.addEventListener){window.addEventListener("load",a)}else{if(window.attachEvent){window.attachEvent("onload",a)}}j={addClass:function(o,q){var n,p,m;if(c){$(o).addClass(q)}else{if(o.className.length===0){o.className=q}else{n=o.className.split(" ");for(p=0,m=n.length;p<m;++p){if(n[p]===q){return}}n.splice(0,0,q);o.className=n.join(" ")}}},removeClass:function(m,r){var q,u,s,p,n,t,o;if(c){$(m).removeClass(r)}else{u=r.split(" ");q=m.className.split(" ");for(p=0,t=u.length;p<t;++p){s=u[p];for(n=0,o=q.length;n<o;++n){if(q[n]===s){break}}if(n<o){q.splice(n,1)}}m.className=q.join(" ")}},getPixelValue:function(n){var m=typeof n;if(m==="number"){return n}if(m==="string"){return parseInt(n,10)}return 0},valOrDefault:function(n,m){return typeof n!==i?n:m},getScrollTop:function(){if(typeof window.pageYOffset!==i){return window.pageYOffset}else{return document.documentElement.scrollTop}},getScrollLeft:function(){if(typeof window.pageXOffset!==i){return window.pageXOffset}else{return document.documentElement.scrollLeft}},getWindowHeight:function(){return window.innerHeight?window.innerHeight:document.documentElement.clientHeight},getWindowWidth:function(){return window.innerWidth?window.innerWidth:document.documentElement.clientWidth},addClickListener:function(n,m){return n.addEventListener?n.addEventListener("click",m):n.attachEvent("onclick",m)},evtPreventDefault:function(m){if(m.preventDefault){m.preventDefault()}else{if(event){event.returnValue=false}}},extend:function(n,m){var o;for(o in m){if(m.hasOwnProperty(o)){n[o]=m[o]}}},setState:function(p,q,r){var m="",n,o;if(e){localStorage.setItem(p,q)}else{if(r){o=new Date();o.setTime(o.getTime()+(r*24*60*60*1000));m="; expires="+o.toGMTString()}document.cookie=p+"="+q+m+"; path=/"}},getState:function(n){var p=n+"=",m=document.cookie.split(";"),o,q;if(e){return localStorage.getItem(n)}else{for(var o=0;o<m.length;o++){q=m[o];while(q.charAt(0)===" "){q=q.substring(1,q.length)}if(q.indexOf(p)===0){return q.substring(p.length,q.length)}}return null}},clearState:function(m){if(e){localStorage.removeItem(m)}else{this.setState(m,"",-1)}}};k={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",closeTooltip:"Close"};f=function(r){var n=false,m,q=function(u,t){var s=document.createElement("input");s.setAttribute("id",u);s.setAttribute("type","button");s.setAttribute("value",t);j.addClass(s,"hopscotch-nav-button");if(u.indexOf("prev")>=0){j.addClass(s,"prev")}else{j.addClass(s,"next")}return s},o=function(t,s,v){var u="hide";if(v){u="hide-all"}if(typeof s===i){s=true}if(s){j.removeClass(t,u)}else{j.addClass(t,u)}},p=function(z,v,G){var C,s,A,u,x,y,B,w,F=document.getElementById(v.targetId),t=z.element,E=z.arrowEl,D=j.getPixelValue(v.arrowOffset);G=j.valOrDefault(G,true);C=j.getPixelValue(v.width)||r.bubbleWidth;A=j.valOrDefault(v.padding,r.bubblePadding);bubbleBorder=j.valOrDefault(v.padding,r.bubbleBorder);j.removeClass(t,"bounce-down bounce-up bounce-left bounce-right");u=F.getBoundingClientRect();if(v.orientation==="top"){s=t.offsetHeight;B=(u.top-s)-r.arrowWidth;w=u.left;y="bounce-down"}else{if(v.orientation==="bottom"){B=u.bottom+r.arrowWidth;w=u.left;y="bounce-up"}else{if(v.orientation==="left"){B=u.top;w=u.left-C-2*A-2*bubbleBorder-r.arrowWidth;y="bounce-right"}else{if(v.orientation==="right"){B=u.top;w=u.right+r.arrowWidth;y="bounce-left"}}}}if(!D){E.style.top="";E.style.left=""}else{if(v.orientation==="top"||v.orientation==="bottom"){E.style.left=D+"px"}else{if(v.orientation==="left"||v.orientation==="right"){E.style.top=D+"px"}}}w+=j.getPixelValue(v.xOffset);B+=j.getPixelValue(v.yOffset);B+=j.getScrollTop();w+=j.getScrollLeft();if(r.animate){if(!d&&c&&r.animate){$(t).animate({top:B+"px",left:w+"px"})}else{t.style.top=B+"px";t.style.left=w+"px"}}else{t.style.top=B+"px";t.style.left=w+"px";if(G){x=r.smoothScroll?r.scrollDuration:0;setTimeout(function(){j.addClass(t,y)},x);setTimeout(function(){j.removeClass(t,y)},x+2000)}}};this.init=function(){var u=document.createElement("div"),v=document.createElement("div"),t=this,w=false,s;this.element=u;this.containerEl=v;this.titleEl=document.createElement("h3");this.numberEl=document.createElement("span");this.contentEl=document.createElement("p");u.setAttribute("id","hopscotch-bubble");j.addClass(u,"animated");v.setAttribute("id","hopscotch-bubble-container");this.numberEl.setAttribute("id","hopscotch-bubble-number");v.appendChild(this.numberEl);v.appendChild(this.titleEl);v.appendChild(this.contentEl);u.appendChild(v);this.initNavButtons();if(r&&r.showCloseButton){this.initCloseButton()}this.initArrow();window.onresize=function(){if(w||!n){return}w=true;s=setTimeout(function(){p(t,m,false);w=false},200)};document.body.appendChild(u);return this};this.initNavButtons=function(){var s=document.createElement("div");this.prevBtnEl=q("hopscotch-prev",k.prevBtn);this.nextBtnEl=q("hopscotch-next",k.nextBtn);this.doneBtnEl=q("hopscotch-done",k.doneBtn);j.addClass(this.doneBtnEl,"hide");s.appendChild(this.prevBtnEl);s.appendChild(this.nextBtnEl);s.appendChild(this.doneBtnEl);j.addClickListener(this.prevBtnEl,function(t){window.hopscotch.prevStep()});j.addClickListener(this.nextBtnEl,function(t){window.hopscotch.nextStep()});j.addClickListener(this.doneBtnEl,window.hopscotch.endTour);s.setAttribute("id","hopscotch-actions");this.buttonsEl=s;this.containerEl.appendChild(s);return this};this.initCloseButton=function(){var s=document.createElement("a");s.setAttribute("id","hopscotch-bubble-close");s.setAttribute("href","#");s.setAttribute("title",k.closeTooltip);s.innerHTML="x";j.addClickListener(s,function(t){window.hopscotch.endTour();j.evtPreventDefault(t)});this.closeBtnEl=s;this.containerEl.appendChild(s);return this};this.initArrow=function(){var s;this.arrowEl=document.createElement("div");this.arrowEl.setAttribute("id","hopscotch-bubble-arrow-container");s=document.createElement("div");s.className="hopscotch-bubble-arrow-border";arrowEl=document.createElement("div");arrowEl.className="hopscotch-bubble-arrow";this.arrowEl.appendChild(s);this.arrowEl.appendChild(arrowEl);this.element.appendChild(this.arrowEl)};this.renderStep=function(u,z,v,w,A){var B=this,t=j.valOrDefault(u.showNextButton,r.showNextButton),s=j.valOrDefault(u.showPrevButton,r.showPrevButton),y,x;m=u;this.setTitle(u.title?u.title:"");this.setContent(u.content?u.content:"");this.setNum(z);this.showPrevButton(this.prevBtnEl&&s&&(z>0||v>0));this.showNextButton(this.nextBtnEl&&t&&!w);if(w){j.removeClass(this.doneBtnEl,"hide")}else{j.addClass(this.doneBtnEl,"hide")}this.setArrow(u.orientation);y=j.getPixelValue(u.width)||r.bubbleWidth;x=j.valOrDefault(u.padding,r.bubblePadding);this.containerEl.style.width=y+"px";this.containerEl.style.padding=x+"px";if(u.orientation==="top"){setTimeout(function(){p(B,u);if(A){A()}},5)}else{p(this,u);if(A){A()}}return this};this.setTitle=function(s){if(s){this.titleEl.innerHTML=s;j.removeClass(this.titleEl,"hide")}else{j.addClass(this.titleEl,"hide")}return this};this.setContent=function(s){if(s){this.contentEl.innerHTML=s;j.removeClass(this.contentEl,"hide")}else{j.addClass(this.contentEl,"hide")}return this};this.setNum=function(s){if(k.stepNums&&s<k.stepNums.length){s=k.stepNums[s]}else{s=s+1}this.numberEl.innerHTML=s};this.setArrow=function(s){if(s==="top"){this.arrowEl.className="down"}else{if(s==="bottom"){this.arrowEl.className="up"}else{if(s==="left"){this.arrowEl.className="right"}else{if(s==="right"){this.arrowEl.className="left"}}}}};this.show=function(){var s=this;if(r.animate){setTimeout(function(){j.addClass(s.element,"animate")},50)}j.removeClass(this.element,"hide");n=true;return this};this.hide=function(){j.addClass(this.element,"hide");j.removeClass(this.element,"animate");n=false;return this};this.showPrevButton=function(s,t){o(this.prevBtnEl,s,t)};this.showNextButton=function(s,t){o(this.nextBtnEl,s,t)};this.showCloseButton=function(s,t){o(this.closeBtnEl,s,t)};this.initAnimate=function(){var s=this;setTimeout(function(){j.addClass(s.element,"animate")},50)};this.removeAnimate=function(){j.removeClass(this.element,"animate")};this.init()};l=function(n){var w,p,s,o,x,A,r,t,q=function(){if(!w){w=new f(p)}return w},z=function(){var B=s.steps[o];return(B.length>0)?B[x]:B},y=function(){var B=s.steps[o].length;if(x<B-1){++x;return true}else{if(o<s.steps.length-1){++o;x=m()?0:undefined;return true}}return false},v=function(){var B;if(x>0){--x;return true}else{if(o>0){B=s.steps[--o].length;if(B){x=B-1}else{x=undefined}return true}}return false},m=function(){return s.steps[o].length>0},u=function(){var R=q().element,N=j.getPixelValue(R.style.top),M=N+j.getPixelValue(R.offsetHeight),K=document.getElementById(z().targetId),S=K.getBoundingClientRect(),P=S.top+j.getScrollTop(),L=S.bottom+j.getScrollTop(),I=(N<P)?N:P,B=(M>L)?M:L,O=j.getScrollTop(),D=O+j.getWindowHeight(),E=I-p.scrollTopMargin,C,H,G,Q,F,J;if(c){$("body, html").animate({scrollTop:E},p.scrollDuration);return}else{if(typeof YAHOO!==i&&typeof YAHOO.env!==i&&typeof YAHOO.env.ua!==i&&typeof YAHOO.util!==i&&typeof YAHOO.util.Scroll!==i){C=YAHOO.env.ua.webkit?document.body:document.documentElement;G=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:undefined;H=new YAHOO.util.Scroll(C,{scroll:{to:[0,E]}},p.scrollDuration/1000,G);H.animate();return}}if(E<0){E=0}if(I>=O&&I<=O+p.scrollTopMargin){return}if(I<O||B>D){if(p.smoothScroll){Q=(O>I)?-1:1;F=Math.abs(O-E)/(p.scrollDuration/10);J=setInterval(function(){var U=j.getScrollTop(),T=U+(Q*F);if((Q>0&&T>=E)||Q<0&&T<=E){T=E;clearInterval(J)}window.scrollTo(0,T);if(j.getScrollTop()===U){clearInterval(J)}},10)}else{window.scrollTo(0,E)}}};this.init=function(){var B,C;if(n){this.configure(n)}return this};this.loadTour=function(E){var D={},B,F,C;s=E;for(F in E){if(E.hasOwnProperty(F)&&F!=="id"&&F!=="steps"){D[F]=E[F]}}this.configure(D);tourState=j.getState(p.cookieName);if(tourState){tourPair=tourState.split(":");A=tourPair[0];r=tourPair[1];t=undefined;C=r.split("-");if(C.length>1){r=parseInt(C[0],10);t=parseInt(C[1],10)}else{r=parseInt(r,10)}if(tourPair.length>2&&tourPair[2]==="mp"){if(t&&t<s.steps[r].length-1){++t}else{if(r<s.steps.length-1){++r;if(s.steps[r].length>0){t=0}else{t=undefined}}}}}B=q();B.showPrevButton(p.showPrevButton,true);B.showNextButton(p.showNextButton,true);return this};this.startTour=function(E,D){var B,C;if(!s){throw"Need to load a tour before you start it!"}if(document.readyState!=="complete"){b=true;return}if(typeof E!==i){o=E;x=D}else{if(s.id===A&&typeof r!==i){o=r;x=t;C=z();if(!document.getElementById(C.targetId)){v();C=z();if(!document.getElementById(C.targetId)){this.endTour(false);return}}}else{o=0}}if(!x&&m()){x=0}this.showStep(o,x);B=q().show();if(p.animate){B.initAnimate()}this.isActive=true;return this};this.showStep=function(F,D){var I=s.steps,G=I[F],E=I.length,C=s.id+":"+F,B=q(),H;o=F;x=D;if(typeof D!==i){G=G[D];C+="-"+D}H=(F===E-1)||(D>=G.length-1);B.renderStep(G,F,D,H,u);if(G.multiPage){C+=":mp"}j.setState(p.cookieName,C,1);return this};this.prevStep=function(){var B=z();if(B.onPrev){B.onPrev()}if(v()){this.showStep(o,x)}return this};this.nextStep=function(){var B=z();if(p.onNext){p.onNext(B,o)}if(B.onNext){B.onNext()}if(y()){this.showStep(o,x)}return this};this.endTour=function(C){var B=q();C=j.valOrDefault(C,true);o=0;x=0;r=undefined;B.hide();if(C){j.clearState(p.cookieName)}this.isActive=false;return this};this.configure=function(B){if(!p){p={}}j.extend(p,B);p.animate=j.valOrDefault(p.animate,false);p.smoothScroll=j.valOrDefault(p.smoothScroll,true);p.scrollDuration=j.valOrDefault(p.scrollDuration,1000);p.scrollTopMargin=j.valOrDefault(p.scrollTopMargin,50);p.showCloseButton=j.valOrDefault(p.showCloseButton,true);p.showPrevButton=j.valOrDefault(p.showPrevButton,false);p.showNextButton=j.valOrDefault(p.showNextButton,true);p.bubbleWidth=j.valOrDefault(p.bubbleWidth,280);p.bubblePadding=j.valOrDefault(p.bubblePadding,15);p.bubbleBorder=j.valOrDefault(p.bubbleBorder,6);p.arrowWidth=j.valOrDefault(p.arrowWidth,20);p.onNext=j.valOrDefault(p.onNext,null);p.cookieName=j.valOrDefault(p.cookieName,"hopscotch.tour.state");if(B){j.extend(k,B.i18n)}if(p.animate){q().initAnimate()}else{q().removeAnimate()}q().showPrevButton(p.showPrevButton,true);q().showNextButton(p.showNextButton,true);q().showCloseButton(p.showCloseButton,true);return this};this.init(n)};window.hopscotch=new l()}());