(function(){var m,f,l,k,i,a,j="undefined",h=false,b=false,c=(typeof window.jQuery!==j),e=(typeof window.localStorage!==j),g=document.body.style,d=(typeof g.MozTransition!==j||typeof g.MsTransition!==j||typeof g.webkitTransition!==j||typeof g.OTransition!==j||typeof g.transition!==j);if(window.hopscotch){return}a=function(){h=true;if(b){window.hopscotch.startTour()}};if(window.addEventListener){window.addEventListener("load",a)}else{if(window.attachEvent){window.attachEvent("onload",a)}}k={addClass:function(p,r){var o,q,n;if(c){$(p).addClass(r)}else{if(p.className.length===0){p.className=r}else{o=p.className.split(" ");for(q=0,n=o.length;q<n;++q){if(o[q]===r){return}}o.splice(0,0,r);p.className=o.join(" ")}}},removeClass:function(n,s){var r,v,t,q,o,u,p;if(c){$(n).removeClass(s)}else{v=s.split(" ");r=n.className.split(" ");for(q=0,u=v.length;q<u;++q){t=v[q];for(o=0,p=r.length;o<p;++o){if(r[o]===t){break}}if(o<p){r.splice(o,1)}}n.className=r.join(" ")}},getPixelValue:function(o){var n=typeof o;if(n==="number"){return o}if(n==="string"){return parseInt(o,10)}return 0},valOrDefault:function(o,n){return typeof o!==j?o:n},getScrollTop:function(){if(typeof window.pageYOffset!==j){return window.pageYOffset}else{return document.documentElement.scrollTop}},getScrollLeft:function(){if(typeof window.pageXOffset!==j){return window.pageXOffset}else{return document.documentElement.scrollLeft}},getWindowHeight:function(){return window.innerHeight?window.innerHeight:document.documentElement.clientHeight},getWindowWidth:function(){return window.innerWidth?window.innerWidth:document.documentElement.clientWidth},addClickListener:function(o,n){return o.addEventListener?o.addEventListener("click",n):o.attachEvent("onclick",n)},evtPreventDefault:function(n){if(n.preventDefault){n.preventDefault()}else{if(event){event.returnValue=false}}},extend:function(o,n){var p;for(p in n){if(n.hasOwnProperty(p)){o[p]=n[p]}}},setState:function(q,r,s){var n="",o,p;if(e){localStorage.setItem(q,r)}else{if(s){p=new Date();p.setTime(p.getTime()+(s*24*60*60*1000));n="; expires="+p.toGMTString()}document.cookie=q+"="+r+n+"; path=/"}},getState:function(o){var q=o+"=",n=document.cookie.split(";"),p,r;if(e){return localStorage.getItem(o)}else{for(var p=0;p<n.length;p++){r=n[p];while(r.charAt(0)===" "){r=r.substring(1,r.length)}if(r.indexOf(q)===0){return r.substring(q.length,r.length)}}return null}},clearState:function(n){if(e){localStorage.removeItem(n)}else{this.setState(n,"",-1)}}};i={next:[],prev:[],start:[],end:[]};l={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",closeTooltip:"Close"};f=function(s){var o=false,n,r=function(v,u){var t=document.createElement("input");t.setAttribute("id",v);t.setAttribute("type","button");t.setAttribute("value",u);k.addClass(t,"hopscotch-nav-button");if(v.indexOf("prev")>=0){k.addClass(t,"prev")}else{k.addClass(t,"next")}return t},p=function(u,t,w){var v="hide";if(w){v="hide-all"}if(typeof t===j){t=true}if(t){k.removeClass(u,v)}else{k.addClass(u,v)}},q=function(A,w,H){var D,t,B,v,y,z,C,x,G=document.getElementById(w.targetId),u=A.element,F=A.arrowEl,E=k.getPixelValue(w.arrowOffset);H=k.valOrDefault(H,true);D=k.getPixelValue(w.width)||s.bubbleWidth;B=k.valOrDefault(w.padding,s.bubblePadding);bubbleBorder=k.valOrDefault(w.padding,s.bubbleBorder);k.removeClass(u,"bounce-down bounce-up bounce-left bounce-right");v=G.getBoundingClientRect();if(w.orientation==="top"){t=u.offsetHeight;C=(v.top-t)-s.arrowWidth;x=v.left;z="bounce-down"}else{if(w.orientation==="bottom"){C=v.bottom+s.arrowWidth;x=v.left;z="bounce-up"}else{if(w.orientation==="left"){C=v.top;x=v.left-D-2*B-2*bubbleBorder-s.arrowWidth;z="bounce-right"}else{if(w.orientation==="right"){C=v.top;x=v.right+s.arrowWidth;z="bounce-left"}}}}if(!E){F.style.top="";F.style.left=""}else{if(w.orientation==="top"||w.orientation==="bottom"){F.style.left=E+"px"}else{if(w.orientation==="left"||w.orientation==="right"){F.style.top=E+"px"}}}x+=k.getPixelValue(w.xOffset);C+=k.getPixelValue(w.yOffset);C+=k.getScrollTop();x+=k.getScrollLeft();if(s.animate){if(!d&&c&&s.animate){$(u).animate({top:C+"px",left:x+"px"})}else{u.style.top=C+"px";u.style.left=x+"px"}}else{u.style.top=C+"px";u.style.left=x+"px";if(H){y=s.smoothScroll?s.scrollDuration:0;setTimeout(function(){k.addClass(u,z)},y);setTimeout(function(){k.removeClass(u,z)},y+2000)}}};this.init=function(){var v=document.createElement("div"),w=document.createElement("div"),u=this,x=false,t;this.element=v;this.containerEl=w;this.titleEl=document.createElement("h3");this.numberEl=document.createElement("span");this.contentEl=document.createElement("p");v.setAttribute("id","hopscotch-bubble");k.addClass(v,"animated");w.setAttribute("id","hopscotch-bubble-container");this.numberEl.setAttribute("id","hopscotch-bubble-number");w.appendChild(this.numberEl);w.appendChild(this.titleEl);w.appendChild(this.contentEl);v.appendChild(w);this.initNavButtons();if(s&&s.showCloseButton){this.initCloseButton()}this.initArrow();window.onresize=function(){if(x||!o){return}x=true;t=setTimeout(function(){q(u,n,false);x=false},200)};document.body.appendChild(v);return this};this.initNavButtons=function(){var t=document.createElement("div");this.prevBtnEl=r("hopscotch-prev",l.prevBtn);this.nextBtnEl=r("hopscotch-next",l.nextBtn);this.doneBtnEl=r("hopscotch-done",l.doneBtn);k.addClass(this.doneBtnEl,"hide");t.appendChild(this.prevBtnEl);t.appendChild(this.nextBtnEl);t.appendChild(this.doneBtnEl);k.addClickListener(this.prevBtnEl,function(u){window.hopscotch.prevStep()});k.addClickListener(this.nextBtnEl,function(u){window.hopscotch.nextStep()});k.addClickListener(this.doneBtnEl,window.hopscotch.endTour);t.setAttribute("id","hopscotch-actions");this.buttonsEl=t;this.containerEl.appendChild(t);return this};this.initCloseButton=function(){var t=document.createElement("a");t.setAttribute("id","hopscotch-bubble-close");t.setAttribute("href","#");t.setAttribute("title",l.closeTooltip);t.innerHTML="x";k.addClickListener(t,function(u){window.hopscotch.endTour();k.evtPreventDefault(u)});this.closeBtnEl=t;this.containerEl.appendChild(t);return this};this.initArrow=function(){var t;this.arrowEl=document.createElement("div");this.arrowEl.setAttribute("id","hopscotch-bubble-arrow-container");t=document.createElement("div");t.className="hopscotch-bubble-arrow-border";arrowEl=document.createElement("div");arrowEl.className="hopscotch-bubble-arrow";this.arrowEl.appendChild(t);this.arrowEl.appendChild(arrowEl);this.element.appendChild(this.arrowEl)};this.renderStep=function(v,A,w,x,B){var C=this,u=k.valOrDefault(v.showNextButton,s.showNextButton),t=k.valOrDefault(v.showPrevButton,s.showPrevButton),z,y;n=v;this.setTitle(v.title?v.title:"");this.setContent(v.content?v.content:"");this.setNum(A);this.showPrevButton(this.prevBtnEl&&t&&(A>0||w>0));this.showNextButton(this.nextBtnEl&&u&&!x);if(x){k.removeClass(this.doneBtnEl,"hide")}else{k.addClass(this.doneBtnEl,"hide")}this.setArrow(v.orientation);z=k.getPixelValue(v.width)||s.bubbleWidth;y=k.valOrDefault(v.padding,s.bubblePadding);this.containerEl.style.width=z+"px";this.containerEl.style.padding=y+"px";if(v.orientation==="top"){setTimeout(function(){q(C,v);if(B){B()}},5)}else{q(this,v);if(B){B()}}return this};this.setTitle=function(t){if(t){this.titleEl.innerHTML=t;k.removeClass(this.titleEl,"hide")}else{k.addClass(this.titleEl,"hide")}return this};this.setContent=function(t){if(t){this.contentEl.innerHTML=t;k.removeClass(this.contentEl,"hide")}else{k.addClass(this.contentEl,"hide")}return this};this.setNum=function(t){if(l.stepNums&&t<l.stepNums.length){t=l.stepNums[t]}else{t=t+1}this.numberEl.innerHTML=t};this.setArrow=function(t){if(t==="top"){this.arrowEl.className="down"}else{if(t==="bottom"){this.arrowEl.className="up"}else{if(t==="left"){this.arrowEl.className="right"}else{if(t==="right"){this.arrowEl.className="left"}}}}};this.show=function(){var t=this;if(s.animate){setTimeout(function(){k.addClass(t.element,"animate")},50)}k.removeClass(this.element,"hide");o=true;return this};this.hide=function(){k.addClass(this.element,"hide");k.removeClass(this.element,"animate");o=false;return this};this.showPrevButton=function(t,u){p(this.prevBtnEl,t,u)};this.showNextButton=function(t,u){p(this.nextBtnEl,t,u)};this.showCloseButton=function(t,u){p(this.closeBtnEl,t,u)};this.initAnimate=function(){var t=this;setTimeout(function(){k.addClass(t.element,"animate")},50)};this.removeAnimate=function(){k.removeClass(this.element,"animate")};this.init()};m=function(o){var z,q,u,p,A,D,t,v,r,s=function(){if(!z){z=new f(q)}return z},C=function(){var E=u.steps[p];return(E.length>0)?E[A]:E},B=function(){var E=u.steps[p].length;if(A<E-1){++A;return true}else{if(p<u.steps.length-1){++p;A=n()?0:undefined;return true}}return false},x=function(){var E;if(A>0){--A;return true}else{if(p>0){E=u.steps[--p].length;if(E){A=E-1}else{A=undefined}return true}}return false},n=function(){return u.steps[p].length>0},y=function(H,E){var G=i[H],F=0;len=G.length;for(;F<len;++F){G[F].cb.apply(this,E)}},w=function(){var U=s().element,Q=k.getPixelValue(U.style.top),P=Q+k.getPixelValue(U.offsetHeight),N=document.getElementById(C().targetId),V=N.getBoundingClientRect(),S=V.top+k.getScrollTop(),O=V.bottom+k.getScrollTop(),L=(Q<S)?Q:S,E=(P>O)?P:O,R=k.getScrollTop(),G=R+k.getWindowHeight(),H=L-q.scrollTopMargin,F,K,J,T,I,M;if(c){$("body, html").animate({scrollTop:H},q.scrollDuration);return}else{if(typeof YAHOO!==j&&typeof YAHOO.env!==j&&typeof YAHOO.env.ua!==j&&typeof YAHOO.util!==j&&typeof YAHOO.util.Scroll!==j){F=YAHOO.env.ua.webkit?document.body:document.documentElement;J=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:undefined;K=new YAHOO.util.Scroll(F,{scroll:{to:[0,H]}},q.scrollDuration/1000,J);K.animate();return}}if(H<0){H=0}if(L>=R&&L<=R+q.scrollTopMargin){return}if(L<R||E>G){if(q.smoothScroll){T=(R>L)?-1:1;I=Math.abs(R-H)/(q.scrollDuration/10);M=setInterval(function(){var X=k.getScrollTop(),W=X+(T*I);if((T>0&&W>=H)||T<0&&W<=H){W=H;clearInterval(M)}window.scrollTo(0,W);if(k.getScrollTop()===X){clearInterval(M)}},10)}else{window.scrollTo(0,H)}}};this.init=function(){var E,F;if(o){this.configure(o)}return this};this.loadTour=function(H){var G={},E,I,F;u=H;for(I in H){if(H.hasOwnProperty(I)&&I!=="id"&&I!=="steps"){G[I]=H[I]}}q={};r.call(this,G,true);tourState=k.getState(q.cookieName);if(tourState){tourPair=tourState.split(":");D=tourPair[0];t=tourPair[1];v=undefined;F=t.split("-");if(F.length>1){t=parseInt(F[0],10);v=parseInt(F[1],10)}else{t=parseInt(t,10)}if(tourPair.length>2&&tourPair[2]==="mp"){if(v&&v<u.steps[t].length-1){++v}else{if(t<u.steps.length-1){++t;if(u.steps[t].length>0){v=0}else{v=undefined}}}}}E=s();E.showPrevButton(q.showPrevButton,true);E.showNextButton(q.showNextButton,true);return this};this.startTour=function(J,I){var F,H,G,E;if(!u){throw"Need to load a tour before you start it!"}if(document.readyState!=="complete"){b=true;return}if(typeof J!==j){p=J;A=I}else{if(u.id===D&&typeof t!==j){p=t;A=v;H=C();if(!document.getElementById(H.targetId)){x();H=C();if(!document.getElementById(H.targetId)){this.endTour(false);return}}}else{p=0}}if(!A&&n()){A=0}if(p===0&&!A){y("start",[u.id])}this.showStep(p,A);F=s().show();if(q.animate){F.initAnimate()}this.isActive=true;return this};this.showStep=function(I,G){var L=u.steps,J=L[I],H=L.length,F=u.id+":"+I,E=s(),K;p=I;A=G;if(typeof G!==j&&n()){J=J[G];F+="-"+G}K=(I===H-1)||(G>=J.length-1);E.renderStep(J,I,G,K,w);if(J.multiPage){F+=":mp"}k.setState(q.cookieName,F,1);return this};this.prevStep=function(){var E=C();y("prev",[u.id,p]);if(E.onPrev){E.onPrev()}if(x()){this.showStep(p,A)}return this};this.nextStep=function(){var E=C();y("next",[u.id,p]);if(E.onNext){E.onNext()}if(B()){this.showStep(p,A)}return this};this.endTour=function(F){var E=s();F=k.valOrDefault(F,true);p=0;A=undefined;t=undefined;E.hide();if(F){k.clearState(q.cookieName)}this.isActive=false;y("end",[u.id]);hopscotch.removeCallbacks(true);return this};this.getCurrStepNum=function(){return p};this.getCurrSubstepNum=function(){return A};this.addCallback=function(G,E,F){if(E){i[G].push({cb:E,fromTour:F})}};this.removeCallbacks=function(F){var I,G,E,H;for(H in i){if(F){I=i[H];for(G=0,E=I.length;G<E;++G){if(I[G].fromTour){I.splice(G--,1);--E}}}else{i[H]=[]}}};r=function(F,G){var E;if(!q){q={}}k.extend(q,F);q.animate=k.valOrDefault(q.animate,false);q.smoothScroll=k.valOrDefault(q.smoothScroll,true);q.scrollDuration=k.valOrDefault(q.scrollDuration,1000);q.scrollTopMargin=k.valOrDefault(q.scrollTopMargin,200);q.showCloseButton=k.valOrDefault(q.showCloseButton,true);q.showPrevButton=k.valOrDefault(q.showPrevButton,false);q.showNextButton=k.valOrDefault(q.showNextButton,true);q.bubbleWidth=k.valOrDefault(q.bubbleWidth,280);q.bubblePadding=k.valOrDefault(q.bubblePadding,15);q.bubbleBorder=k.valOrDefault(q.bubbleBorder,6);q.arrowWidth=k.valOrDefault(q.arrowWidth,20);q.onNext=k.valOrDefault(q.onNext,null);q.onPrev=k.valOrDefault(q.onPrev,null);q.onStart=k.valOrDefault(q.onStart,null);q.onEnd=k.valOrDefault(q.onEnd,null);q.cookieName=k.valOrDefault(q.cookieName,"hopscotch.tour.state");if(F){k.extend(l,F.i18n)}this.addCallback("next",q.onNext,G);this.addCallback("prev",q.onPrev,G);this.addCallback("start",q.onStart,G);this.addCallback("end",q.onEnd,G);E=s();if(q.animate){E.initAnimate()}else{E.removeAnimate()}E.showPrevButton(q.showPrevButton,true);E.showNextButton(q.showNextButton,true);E.showCloseButton(q.showCloseButton,true);return this};this.configure=function(E){r.call(this,E,false)};this.init(o)};window.hopscotch=new m()}());