(function(b,c){var m,e,j,i,g,h="undefined",l=b[c],a=false,k=(typeof window.sessionStorage!==h),f=document.body.style,d=(typeof f.MozTransition!==h||typeof f.MsTransition!==h||typeof f.webkitTransition!==h||typeof f.OTransition!==h||typeof f.transition!==h);if(l){return}$(window).load(function(){if(a){l.startTour()}});i={getPixelValue:function(o){var n=typeof o;if(n==="number"){return o}if(n==="string"){return parseInt(o,10)}return 0},valOrDefault:function(o,n){return typeof o!==h?o:n},invokeCallbacks:function(r,o){var q=g[r],p=0,n=q.length;for(;p<n;++p){q[p].cb.apply(this,o)}},getScrollTop:function(){if(typeof window.pageYOffset!==h){return window.pageYOffset}else{return document.documentElement.scrollTop}},getScrollLeft:function(){if(typeof window.pageXOffset!==h){return window.pageXOffset}else{return document.documentElement.scrollLeft}},extend:function(o,n){var p;for(p in n){if(n.hasOwnProperty(p)){o[p]=n[p]}}},getStepTarget:function(n){if(typeof n.target==="string"){return $("#"+n.target)}return $(n.target)},setState:function(p,q,r){var n="",o;if(k){sessionStorage.setItem(p,q)}else{if(r){o=new Date();o.setTime(o.getTime()+(r*24*60*60*1000));n="; expires="+o.toGMTString()}document.cookie=p+"="+q+n+"; path=/"}},getState:function(o){var q=o+"=",n=document.cookie.split(";"),p,r;if(k){return sessionStorage.getItem(o)}else{for(p=0;p<n.length;p++){r=n[p];while(r.charAt(0)===" "){r=r.substring(1,r.length)}if(r.indexOf(q)===0){return r.substring(q.length,r.length)}}return null}},clearState:function(n){if(k){sessionStorage.removeItem(n)}else{this.setState(n,"",-1)}}};g={next:[],prev:[],start:[],end:[],error:[],close:[]};j={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"};e=function(s){var o=false,n,r=function(v,u){var t=$("<input>");t.attr({id:v,type:"button",value:u});t.addClass("hopscotch-nav-button");if(v.indexOf("prev")>=0){t.addClass("prev")}else{t.addClass("next")}return t},p=function(u,t,w){var v=w?"hide-all":"hide";if(typeof t===h){t=true}if(t){u.removeClass(v)}else{u.addClass(v)}},q=function(B,v,I){var E,t,C,u,z,A,D,w,y=6,G=i.getStepTarget(v)[0],H=B.$element,x=B.$arrowEl,F=i.getPixelValue(v.arrowOffset);I=i.valOrDefault(I,true);E=i.getPixelValue(v.width)||s.bubbleWidth;C=i.valOrDefault(v.padding,s.bubblePadding);H.removeClass("bounce-down bounce-up bounce-left bounce-right");u=G.getBoundingClientRect();if(v.orientation==="top"){t=H.height();D=(u.top-t)-s.arrowWidth;w=u.left;A="bounce-down"}else{if(v.orientation==="bottom"){D=u.bottom+s.arrowWidth;w=u.left;A="bounce-up"}else{if(v.orientation==="left"){D=u.top;w=u.left-E-2*C-2*y-s.arrowWidth;A="bounce-right"}else{if(v.orientation==="right"){D=u.top;w=u.right+s.arrowWidth;A="bounce-left"}}}}if(!F){x.css({top:"",left:""})}else{if(v.orientation==="top"||v.orientation==="bottom"){x.css("left",F+"px")}else{if(v.orientation==="left"||v.orientation==="right"){x.css("top",F+"px")}}}w+=i.getPixelValue(v.xOffset);D+=i.getPixelValue(v.yOffset);D+=i.getScrollTop();w+=i.getScrollLeft();if(s.animate){if(!d&&s.animate){H.animate({top:D+"px",left:w+"px"})}else{H.css("top",D+"px");H.css("left",w+"px")}}else{H.css("top",D+"px");H.css("left",w+"px");if(I){z=s.smoothScroll?s.scrollDuration:0;setTimeout(function(){H.addClass(A)},z);setTimeout(function(){H.removeClass(A)},z+2000)}}};this.init=function(){var w=$("<div>"),u=$("<div>"),x=$("<div>"),v=this,y=false,t;this.$element=w;this.$containerEl=u;this.$titleEl=$("<h3>");this.$numberEl=$("<span>");this.$contentEl=$("<p>");this.$numberEl.attr("id","hopscotch-bubble-number");x.append(this.$titleEl,this.$contentEl).attr("id","hopscotch-bubble-content");u.attr("id","hopscotch-bubble-container").append(this.$numberEl,x);w.attr("id","hopscotch-bubble").addClass("animated").append(u);this.initNavButtons();this.initCloseButton();this.initArrow();$(window).on("resize",function(){if(y||!o){return}y=true;t=setTimeout(function(){q(v,n,false);y=false},200)});this.hide();$("body").append(w);return this};this.initNavButtons=function(){var t=$("<div>");this.$prevBtnEl=r("hopscotch-prev",j.prevBtn);this.$nextBtnEl=r("hopscotch-next",j.nextBtn);this.$doneBtnEl=r("hopscotch-done",j.doneBtn);this.$doneBtnEl.addClass("hide");this.$prevBtnEl.click(function(u){l.prevStep()});this.$nextBtnEl.click(function(u){l.nextStep()});this.$doneBtnEl.click(l.endTour);t.attr("id","hopscotch-actions").append(this.$prevBtnEl,this.$nextBtnEl,this.$doneBtnEl);this.buttonsEl=t;this.$containerEl.append(t);return this};this.initCloseButton=function(){var t=$("<a>");t.text(j.closeTooltip).attr({id:"hopscotch-bubble-close",href:"#",title:j.closeTooltip}).click(function(v){var u=l.getCurrStepNum(),w=l.getCurrTour(),x=(u===w.steps.length-1);i.invokeCallbacks("close",[w.id,u]);l.endTour(true,x);if(v.preventDefault){v.preventDefault()}else{if(event){event.returnValue=false}}});this.closeBtnEl=t;this.$containerEl.append(t);return this};this.initArrow=function(){var u,t;this.$arrowEl=$("<div>").attr("id","hopscotch-bubble-arrow-container");t=$("<div>").addClass("hopscotch-bubble-arrow-border");u=$("<div>").addClass("hopscotch-bubble-arrow");this.$arrowEl.append(t,u);this.$element.append(this.$arrowEl);return this};this.renderStep=function(v,A,w,x,B){var C=this,u=i.valOrDefault(v.showNextButton,s.showNextButton),t=i.valOrDefault(v.showPrevButton,s.showPrevButton),z,y;n=v;this.setTitle(v.title?v.title:"");this.setContent(v.content?v.content:"");this.setNum(A);this.showPrevButton(this.$prevBtnEl&&t&&(A>0||w>0));this.showNextButton(this.$nextBtnEl&&u&&!x);this.$nextBtnEl.val(v.showSkip?j.skipBtn:j.nextBtn);if(x){this.$doneBtnEl.removeClass("hide")}else{this.$doneBtnEl.addClass("hide")}this.setArrow(v.orientation);z=i.getPixelValue(v.width)||s.bubbleWidth;y=i.valOrDefault(v.padding,s.bubblePadding);this.$containerEl.css({width:z+"px",padding:y+"px"});if(v.orientation==="top"){setTimeout(function(){q(C,v);if(B){B()}},5)}else{q(this,v);if(B){B()}}return this};this.setTitle=function(t){if(t){this.$titleEl.html(t).removeClass("hide")}else{this.$titleEl.addClass("hide")}return this};this.setContent=function(t){if(t){this.$contentEl.html(t).removeClass("hide")}else{this.$contentEl.addClass("hide")}return this};this.setNum=function(t){if(j.stepNums&&t<j.stepNums.length){t=j.stepNums[t]}else{t=t+1}this.$numberEl.html(t)};this.setArrow=function(t){if(t==="top"){this.$arrowEl.removeClass().addClass("down")}else{if(t==="bottom"){this.$arrowEl.removeClass().addClass("up")}else{if(t==="left"){this.$arrowEl.removeClass().addClass("right")}else{if(t==="right"){this.$arrowEl.removeClass().addClass("left")}}}}};this.show=function(){var t=this;if(s.animate){setTimeout(function(){t.$element.addClass("animate")},50)}this.$element.removeClass("hide");o=true;return this};this.hide=function(){this.$element.addClass("hide").removeClass("animate");o=false;return this};this.showPrevButton=function(t,u){p(this.$prevBtnEl,t,u)};this.showNextButton=function(t,u){p(this.$nextBtnEl,t,u)};this.showCloseButton=function(t,u){p(this.closeBtnEl,t,u)};this.initAnimate=function(){var t=this;setTimeout(function(){t.$element.addClass("animate")},50)};this.removeAnimate=function(){this.$element.removeClass("animate")};this.init()};m=function(o){var y,q,u,p,z,C,t,v,r,s=function(){if(!y){y=new e(q)}return y},B=function(){var D=u.steps[p];return(D.length>0)?D[z]:D},n=function(){return u.steps[p].length>0},A=function(){var D=u.steps[p].length;if(z<D-1){++z;return true}else{if(p<u.steps.length-1){++p;z=n()?0:undefined;return true}}return false},x=function(){var D;if(z>0){--z;return true}else{if(p>0){D=u.steps[--p].length;if(D){z=D-1}else{z=undefined}return true}}return false},w=function(){var H=s().$element,D=i.getPixelValue(H.css("top")),I=i.getStepTarget(B())[0],G=I.getBoundingClientRect(),J=G.top+i.getScrollTop(),F=(D<J)?D:J,E=F-q.scrollTopMargin;$("body, html").animate({scrollTop:E},q.scrollDuration)};this.init=function(){if(o){this.configure(o)}return this};this.loadTour=function(I){var G={},E,J,D,H,F;u=I;for(J in I){if(I.hasOwnProperty(J)&&J!=="id"&&J!=="steps"){G[J]=I[J]}}this.resetDefaultOptions();r.call(this,G,true);D=i.getState(q.cookieName);if(D){H=D.split(":");C=H[0];t=H[1];v=undefined;F=t.split("-");if(F.length>1){t=parseInt(F[0],10);v=parseInt(F[1],10)}else{t=parseInt(t,10)}if(H.length>2&&H[2]==="mp"){if(v&&v<u.steps[t].length-1){++v}else{if(t<u.steps.length-1){++t;if(u.steps[t].length>0){v=0}else{v=undefined}}}}}E=s();E.showPrevButton(q.showPrevButton,true);E.showNextButton(q.showNextButton,true);return this};this.startTour=function(G,F){var D,E;if(!u){throw"Need to load a tour before you start it!"}if(document.readyState!=="complete"){a=true;return}if(typeof G!==h){p=G;z=F}else{if(u.id===C&&typeof t!==h){p=t;z=v;E=B();if(!i.getStepTarget(E)){x();E=B();if(!i.getStepTarget(E)){this.endTour(false);return}}}else{p=0}}if(!z&&n()){z=0}if(p===0&&!z){i.invokeCallbacks("start",[u.id])}this.isActive=true;if(q.animate){D.initAnimate()}if(!i.getStepTarget(B())){i.invokeCallbacks("error",[u.id,p]);if(q.skipIfNoElement){this.nextStep()}}else{this.showStep(p,z)}return this};this.showStep=function(H,F){var K=u.steps,I=K[H],G=K.length,E=u.id+":"+H,D=s(),J;p=H;z=F;if(typeof F!==h&&n()){I=I[F];E+="-"+F}J=(H===G-1)||(F>=I.length-1);D.renderStep(I,H,F,J,w);if(I.multipage){E+=":mp"}i.setState(q.cookieName,E,1);s().show();return this};this.prevStep=function(){var E=B(),D=false;i.invokeCallbacks("prev",[u.id,p]);if(E.onPrev){E.onPrev()}if(q.skipIfNoElement){while(!D&&x()){E=B();D=i.getStepTarget(E);if(!D){i.invokeCallbacks("error",[u.id,p])}}if(!D){return this.endTour(true,false)}}else{if(x()){E=B();if(!i.getStepTarget(E)){i.invokeCallbacks("error",[u.id,p]);return this.endTour(true,false)}}}this.showStep(p,z);return this};this.nextStep=function(){var E=B(),D=false;i.invokeCallbacks("next",[u.id,p]);if(E.onNext){E.onNext()}if(q.skipIfNoElement){while(!D&&A()){E=B();D=i.getStepTarget(E);if(!D){i.invokeCallbacks("error",[u.id,p])}}if(!D){return this.endTour(true,false)}}else{if(A()){E=B();if(!i.getStepTarget(E)){i.invokeCallbacks("error",[u.id,p]);return this.endTour(true,false)}}}this.showStep(p,z);return this};this.endTour=function(F,E){var D=s();F=i.valOrDefault(F,true);E=i.valOrDefault(E,true);p=0;z=undefined;t=undefined;D.hide();if(F){i.clearState(q.cookieName)}l.isActive=false;if(E){i.invokeCallbacks("end",[u.id])}l.removeCallbacks(true);return this};this.getCurrTour=function(){return u};this.getCurrStepNum=function(){return p};this.getCurrSubstepNum=function(){return z};this.hasTakenTour=function(D){if(k){i.getState(q.cookieName+"_history")}return false};this.setHasTakenTour=function(E){var D;if(k&&!this.hasTakenTour(E)){D=i.getState(q.cookieName+"_history");if(D){D+=";"+E}else{D=E}}};this.clearHasTakenTour=function(J){var I,H,E,D,F=q.cookieName+"_history",G=false;if(k){I=i.getState(F);if(I){H=I.split(";");for(E=0,D=H.length;E<D;++E){if(H[E]===J){H.splice(E,1);G=true;break}}if(G){i.setState(F,H.join(";"))}}}};this.addCallback=function(F,D,E){if(D){g[F].push({cb:D,fromTour:E})}return this};this.removeCallbacks=function(E){var H,F,D,G;for(G in g){if(E){H=g[G];for(F=0,D=H.length;F<D;++F){if(H[F].fromTour){H.splice(F--,1);--D}}}else{g[G]=[]}}return this};this.resetDefaultOptions=function(){q={animate:false,smoothScroll:true,scrollDuration:1000,scrollTopMargin:200,showCloseButton:true,showPrevButton:false,showNextButton:true,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:true,cookieName:"hopscotch.tour.state"}};r=function(E,F){var D;if(!q){this.resetDefaultOptions()}i.extend(q,E);if(E){i.extend(j,E.i18n)}this.addCallback("next",E.onNext,F);this.addCallback("prev",E.onPrev,F);this.addCallback("start",E.onStart,F);this.addCallback("end",E.onEnd,F);this.addCallback("error",E.onError,F);this.addCallback("close",E.onClose,F);D=s();if(q.animate){D.initAnimate()}else{D.removeAnimate()}D.showPrevButton(q.showPrevButton,true);D.showNextButton(q.showNextButton,true);D.showCloseButton(q.showCloseButton,true);return this};this.configure=function(D){return r.call(this,D,false)};this.init(o)};l=new m();b[c]=l}(window,"hopscotch"));