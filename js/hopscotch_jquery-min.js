(function(b,c){var m,e,j,i,g,h="undefined",l=b[c],a=false,k=(typeof window.sessionStorage!==h),f=document.body.style,d=(typeof f.MozTransition!==h||typeof f.MsTransition!==h||typeof f.webkitTransition!==h||typeof f.OTransition!==h||typeof f.transition!==h);if(l){return}$(window).load(function(){if(a){l.startTour()}});i={getPixelValue:function(o){var n=typeof o;if(n==="number"){return o}if(n==="string"){return parseInt(o,10)}return 0},valOrDefault:function(o,n){return typeof o!==h?o:n},invokeCallbacks:function(r,o){var q=g[r],p=0,n=q.length;for(;p<n;++p){q[p].cb.apply(this,o)}},getScrollTop:function(){if(typeof window.pageYOffset!==h){return window.pageYOffset}else{return document.documentElement.scrollTop}},getScrollLeft:function(){if(typeof window.pageXOffset!==h){return window.pageXOffset}else{return document.documentElement.scrollLeft}},extend:function(o,n){var p;for(p in n){if(n.hasOwnProperty(p)){o[p]=n[p]}}},getStepTarget:function(n){if(typeof n.target==="string"){return $("#"+n.target)}return $(n.target)},setState:function(p,q,r){var n="",o;if(k){sessionStorage.setItem(p,q)}else{if(r){o=new Date();o.setTime(o.getTime()+(r*24*60*60*1000));n="; expires="+o.toGMTString()}document.cookie=p+"="+q+n+"; path=/"}},getState:function(o){var q=o+"=",n=document.cookie.split(";"),p,r;if(k){return sessionStorage.getItem(o)}else{for(p=0;p<n.length;p++){r=n[p];while(r.charAt(0)===" "){r=r.substring(1,r.length)}if(r.indexOf(q)===0){return r.substring(q.length,r.length)}}return null}},clearState:function(n){if(k){sessionStorage.removeItem(n)}else{this.setState(n,"",-1)}}};g={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]};j={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"};e=function(s){var o=false,n,r=function(w,v){var u=$("<input>");u.attr({id:w,type:"button",value:v});u.addClass("hopscotch-nav-button");if(w.indexOf("prev")>=0){u.addClass("prev")}else{u.addClass("next")}return u},p=function(v,u,x){var w=x?"hide-all":"hide";if(typeof u===h){u=true}if(u){v.removeClass(w)}else{v.addClass(w)}},q=function(B,w){var E,u,C,v,D,x,A=6,G=i.getStepTarget(w)[0],H=B.$element,y=B.$arrowEl,F=i.getPixelValue(w.arrowOffset),z=w.fixedElement?"fixed":"absolute";E=i.getPixelValue(w.width)||s.bubbleWidth;C=i.valOrDefault(w.padding,s.bubblePadding);H.removeClass("fade-in-down fade-in-up fade-in-left fade-in-right");v=G.getBoundingClientRect();if(w.orientation==="top"){u=H.height();D=(v.top-u)-s.arrowWidth;x=v.left}else{if(w.orientation==="bottom"){D=v.bottom+s.arrowWidth;x=v.left}else{if(w.orientation==="left"){D=v.top;x=v.left-E-2*C-2*A-s.arrowWidth}else{if(w.orientation==="right"){D=v.top;x=v.right+s.arrowWidth}}}}if(!F){y.css({top:"",left:""})}else{if(w.orientation==="top"||w.orientation==="bottom"){y.css({left:F+"px",top:""})}else{if(w.orientation==="left"||w.orientation==="right"){y.css({top:F+"px",left:""})}}}x+=i.getPixelValue(w.xOffset);D+=i.getPixelValue(w.yOffset);if(!w.fixedElement){D+=i.getScrollTop();x+=i.getScrollLeft()}if(s.animate&&!d){H.animate({top:D+"px",left:x+"px"}).css("position",z)}else{H.css({top:D+"px",left:x+"px",position:z})}},t=function(){var x=$("<div>"),v=$("<div>"),y=$("<div>"),w=this,z=false,u;this.$element=x;this.$containerEl=v;this.$titleEl=$("<h3>");this.$numberEl=$("<span>");this.$contentEl=$("<p>");this.$numberEl.attr("id","hopscotch-bubble-number");y.append(this.$titleEl,this.$contentEl).attr("id","hopscotch-bubble-content");v.attr("id","hopscotch-bubble-container").append(this.$numberEl,y);x.attr("id","hopscotch-bubble").addClass("animated").append(v);this.initNavButtons();this.initCloseButton();this.initArrow();$(window).on("resize",function(){if(z||!o){return}z=true;u=setTimeout(function(){q(w,n,false);z=false},200)});this.hide();$("body").append(x);return this};this.initNavButtons=function(){var u=$("<div>");this.$prevBtnEl=r("hopscotch-prev",j.prevBtn);this.$nextBtnEl=r("hopscotch-next",j.nextBtn);this.$doneBtnEl=r("hopscotch-done",j.doneBtn);this.$doneBtnEl.addClass("hide");this.$prevBtnEl.click(function(v){l.prevStep()});this.$nextBtnEl.click(function(v){l.nextStep()});this.$doneBtnEl.click(l.endTour);u.attr("id","hopscotch-actions").append(this.$prevBtnEl,this.$nextBtnEl,this.$doneBtnEl);this.buttonsEl=u;this.$containerEl.append(u);return this};this.initCloseButton=function(){var u=$("<a>");u.text(j.closeTooltip).attr({id:"hopscotch-bubble-close",href:"#",title:j.closeTooltip}).click(function(w){var v=l.getCurrStepNum(),x=l.getCurrTour(),y=(v===x.steps.length-1);i.invokeCallbacks("close",[x.id,v]);l.endTour(true,y);if(w.preventDefault){w.preventDefault()}else{if(event){event.returnValue=false}}});this.closeBtnEl=u;this.$containerEl.append(u);return this};this.initArrow=function(){var v,u;this.$arrowEl=$("<div>").attr("id","hopscotch-bubble-arrow-container");u=$("<div>").addClass("hopscotch-bubble-arrow-border");v=$("<div>").addClass("hopscotch-bubble-arrow");this.$arrowEl.append(u,v);this.$element.append(this.$arrowEl);return this};this.renderStep=function(w,B,x,y,C){var D=this,v=i.valOrDefault(w.showNextButton,s.showNextButton),u=i.valOrDefault(w.showPrevButton,s.showPrevButton),A,z;n=w;this.setTitle(w.title?w.title:"");this.setContent(w.content?w.content:"");this.setNum(B);this.orientation=w.orientation;this.showPrevButton(this.$prevBtnEl&&u&&(B>0||x>0));this.showNextButton(this.$nextBtnEl&&v&&!y);this.$nextBtnEl.val(w.showSkip?j.skipBtn:j.nextBtn);if(y){this.$doneBtnEl.removeClass("hide")}else{this.$doneBtnEl.addClass("hide")}this.setArrow(w.orientation);A=i.getPixelValue(w.width)||s.bubbleWidth;z=i.valOrDefault(w.padding,s.bubblePadding);this.$containerEl.css({width:A+"px",padding:z+"px"});this.$element.css("zIndex",w.zindex?w.zindex:"");if(w.orientation==="top"){setTimeout(function(){q(D,w);if(C){if(!w.fixedElement){C()}else{D.show()}}},5)}else{q(this,w);if(C){if(!w.fixedElement){C()}else{D.show()}}}return this};this.setTitle=function(u){if(u){this.$titleEl.html(u).removeClass("hide")}else{this.$titleEl.addClass("hide")}return this};this.setContent=function(u){if(u){this.$contentEl.html(u).removeClass("hide")}else{this.$contentEl.addClass("hide")}return this};this.setNum=function(u){if(j.stepNums&&u<j.stepNums.length){u=j.stepNums[u]}else{u=u+1}this.$numberEl.html(u)};this.setArrow=function(u){if(u==="top"){this.$arrowEl.removeClass().addClass("down")}else{if(u==="bottom"){this.$arrowEl.removeClass().addClass("up")}else{if(u==="left"){this.$arrowEl.removeClass().addClass("right")}else{if(u==="right"){this.$arrowEl.removeClass().addClass("left")}}}}};this.getArrowDirection=function(){if(this.orientation==="top"){return"down"}if(this.orientation==="bottom"){return"up"}if(this.orientation==="left"){return"right"}if(this.orientation==="right"){return"left"}};this.show=function(){var u=this,v="fade-in-"+this.getArrowDirection(),w=1000;this.$element.removeClass("hide");if(s.animate){setTimeout(function(){u.$element.addClass("animate")},50)}else{this.$element.addClass(v);setTimeout(function(){u.$element.removeClass("invisible")},50);setTimeout(function(){u.$element.removeClass(v)},w)}o=true;return this};this.hide=function(u){u=i.valOrDefault(u,true);this.$element.removeClass("animate fade-in-up fade-in-down fade-in-right fade-in-left").css({top:"",left:""});if(u){this.$element.addClass("hide").removeClass("invisible")}else{this.$element.addClass(s.animate?"":"invisible").removeClass("hide")}o=false;return this};this.showPrevButton=function(u,v){p(this.$prevBtnEl,u,v)};this.showNextButton=function(u,v){p(this.$nextBtnEl,u,v)};this.showCloseButton=function(u,v){p(this.closeBtnEl,u,v)};this.initAnimate=function(){var u=this;setTimeout(function(){u.$element.addClass("animate")},50)};this.removeAnimate=function(){this.$element.removeClass("animate")};t.call(this)};m=function(o){var z="hopscotch.tour.state",y,q,u,p,A,D,t,v,r,s=function(){if(!y){y=new e(q)}return y},C=function(){var E=u.steps[p];return(E.length>0)?E[A]:E},n=function(){return u.steps[p].length>0},B=function(){var E=u.steps[p].length;if(A<E-1){++A;return true}else{if(p<u.steps.length-1){++p;A=n()?0:undefined;return true}}return false},x=function(){var E;if(A>0){--A;return true}else{if(p>0){E=u.steps[--p].length;if(E){A=E-1}else{A=undefined}return true}}return false},w=function(E){var J=s().$element,F=i.getPixelValue(J.css("top")),K=i.getStepTarget(C())[0],I=K.getBoundingClientRect(),L=I.top+i.getScrollTop(),H=(F<L)?F:L,G=H-q.scrollTopMargin;$("body, html").animate({scrollTop:G},q.scrollDuration,E)};this.init=function(){if(o){this.configure(o)}return this};this.loadTour=function(J){var H={},F,K,E,I,G;u=J;for(K in J){if(J.hasOwnProperty(K)&&K!=="id"&&K!=="steps"){H[K]=J[K]}}this.resetDefaultOptions();r.call(this,H,true);E=i.getState(q.cookieName);if(E){I=E.split(":");D=I[0];t=I[1];v=undefined;G=t.split("-");if(G.length>1){t=parseInt(G[0],10);v=parseInt(G[1],10)}else{t=parseInt(t,10)}if(I.length>2&&I[2]==="mp"){if(v&&v<u.steps[t].length-1){++v}else{if(t<u.steps.length-1){++t;if(u.steps[t].length>0){v=0}else{v=undefined}}}}}F=s();F.showPrevButton(q.showPrevButton,true);F.showNextButton(q.showNextButton,true);return this};this.startTour=function(H,G){var E,F;if(!u){throw"Need to load a tour before you start it!"}if(document.readyState!=="complete"){a=true;return this}if(typeof H!==h){p=H;A=G}else{if(u.id===D&&typeof t!==h){p=t;A=v;F=C();if(!i.getStepTarget(F)){x();F=C();if(!i.getStepTarget(F)){this.endTour(false,false);return this}}}else{p=0}}if(!A&&n()){A=0}i.invokeCallbacks("start",[u.id,p]);E=s();this.isActive=true;if(q.animate){E.initAnimate()}if(!i.getStepTarget(C())){i.invokeCallbacks("error",[u.id,p]);if(q.skipIfNoElement){this.nextStep(false)}}else{this.showStep(p,A)}return this};this.showStep=function(M,F){var H=u.steps,G=H[M],E=H.length,L=u.id+":"+M,K=s(),J=i.valOrDefault(G.delay,0),I;p=M;A=F;if(!q.animate){K.hide(false)}if(typeof F!==h&&n()){G=G[F];L+="-"+F}I=(M===E-1)||(F>=G.length-1);setTimeout(function(){K.renderStep(G,M,F,I,function(){w(function(){K.show.call(K)})});i.invokeCallbacks("show",[u.id,p])},J);if(G.multipage){L+=":mp"}i.setState(q.cookieName,L,1);return this};this.prevStep=function(){var F=C(),E=[];if(F.onPrev){F.onPrev()}i.invokeCallbacks("prev",[u.id,p]);if(q.skipIfNoElement){while(E.length===0&&x()){F=C();E=i.getStepTarget(F);if(E.length===0){i.invokeCallbacks("error",[u.id,p])}}if(E.length===0){return this.endTour(true,false)}}else{if(x()){F=C();if(!i.getStepTarget(F)){i.invokeCallbacks("error",[u.id,p]);return this.endTour(true,false)}}}this.showStep(p,A);return this};this.nextStep=function(H){var G=C(),F=p,E=[];H=i.valOrDefault(H,true);if(q.skipIfNoElement){while(E.length===0&&B()){G=C();E=i.getStepTarget(G);if(E.length===0){i.invokeCallbacks("error",[u.id,p])}}if(!E.length){return this.endTour(true,false)}}else{if(B()){G=C();if(!i.getStepTarget(G)){i.invokeCallbacks("error",[u.id,p]);return this.endTour(true,false)}}}if(H){if(G.onNext){G.onNext()}i.invokeCallbacks("next",[u.id,F])}this.showStep(p,A);return this};this.endTour=function(G,F){var E=s();G=i.valOrDefault(G,true);F=i.valOrDefault(F,true);p=0;A=undefined;t=undefined;E.hide();if(G){i.clearState(q.cookieName)}l.isActive=false;if(F){i.invokeCallbacks("end",[u.id])}l.removeCallbacks(true);return this};this.getCurrTour=function(){return u};this.getCurrStepNum=function(){return p};this.getCurrSubstepNum=function(){return A};this.hasTakenTour=function(E){if(k){i.getState(q.cookieName+"_history")}return false};this.setHasTakenTour=function(F){var E;if(k&&!this.hasTakenTour(F)){E=i.getState(q.cookieName+"_history");if(E){E+=";"+F}else{E=F}}};this.clearHasTakenTour=function(K){var J,I,F,E,G=q.cookieName+"_history",H=false;if(k){J=i.getState(G);if(J){I=J.split(";");for(F=0,E=I.length;F<E;++F){if(I[F]===K){I.splice(F,1);H=true;break}}if(H){i.setState(G,I.join(";"))}}}};this.addCallback=function(G,E,F){if(E){g[G].push({cb:E,fromTour:F})}return this};this.removeCallbacks=function(F){var I,G,E,H;for(H in g){if(F){I=g[H];for(G=0,E=I.length;G<E;++G){if(I[G].fromTour){I.splice(G--,1);--E}}}else{g[H]=[]}}return this};this.setCookieName=function(E){z=E;q.cookieName=E};this.resetDefaultOptions=function(){q={animate:false,smoothScroll:true,scrollDuration:1000,scrollTopMargin:200,showCloseButton:true,showPrevButton:false,showNextButton:true,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:true,cookieName:z}};r=function(F,G){var E;if(!q){this.resetDefaultOptions()}i.extend(q,F);if(F){i.extend(j,F.i18n)}this.addCallback("next",F.onNext,G).addCallback("prev",F.onPrev,G).addCallback("start",F.onStart,G).addCallback("end",F.onEnd,G).addCallback("show",F.onShow,G).addCallback("error",F.onError,G).addCallback("close",F.onClose,G);E=s();if(q.animate){E.initAnimate()}else{E.removeAnimate()}E.showPrevButton(q.showPrevButton,true);E.showNextButton(q.showNextButton,true);E.showCloseButton(q.showCloseButton,true);return this};this.configure=function(E){return r.call(this,E,false)};this.init(o)};l=new m();b[c]=l}(window,"hopscotch"));